<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
                    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
                                    <title>Quick Start Guide to FileBench (Community Group performance.quick_start) - XWiki</title>
                <meta http-equiv="Content-Script-Type" content="text/javascript" />
                        <meta http-equiv="imagetoolbar" content="no"/>
                      <link rel="alternate" type="application/x-wiki" title="Edit" href="/bin/edit/Community+Group+performance/quick_start" />
                    <link rel="canonical" href="/bin/view/Community+Group+performance/quick_start" />
                            <meta name="document" content="Community Group performance.quick_start"/>
    <meta name="wiki" content="xwiki"/>
    <meta name="space" content="Community Group performance"/>
    <meta name="page" content="quick_start"/>
    <meta name="version" content="1.1"/>
    <meta name="restURL" content="/rest/wikis/xwiki/spaces/Community+Group+performance/pages/quick_start"/>
                <meta name="gwt:property" content="locale=en" />
                <meta name="revisit-after" content="7 days" />
<meta name="description" content="Quick Start Guide to FileBench" />
<meta name="keywords" content="wiki " />
<meta name="distribution" content="GLOBAL" />
<meta name="rating" content="General" />
<meta name="author" content="admin" />
<meta http-equiv="reply-to" content="" />
<meta name="language" content="en" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="alternate" type="application/rss+xml" title="Wiki Feed RSS" href="/bin/view/Main/WebRss?xpage=rdf" />
<link rel="alternate" type="application/rss+xml" title="Blog RSS Feed" href="/bin/view/Blog/GlobalBlogRss?xpage=plain" />
<link rel="shortcut icon" href="/resources/icons/oso/icon.png">
                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
<link href="https://markebrooks.github.io/static/css/stylesheet.css" rel="stylesheet" type="text/css" media="all" />
<link href="/bin/skin/skins/colibri/style.css?colorTheme=ColorThemes.Oso" rel="stylesheet" type="text/css" media="all" />
<link href="/bin/skin/skins/colibri/print.css" rel="stylesheet" type="text/css" media="print" />
        <!--[if IE]>
  <link href="/bin/skin/skins/colibri/ie%2Dall.css" rel="stylesheet" type="text/css" />
<![endif]-->
<!--[if IE 6]>
  <link href="/bin/skin/skins/colibri/ie%2D6.css" rel="stylesheet" type="text/css" />
<![endif]-->
<link rel='stylesheet' type='text/css' href='/bin/ssx/AnnotationCode/Settings?language=en'/><link rel='stylesheet' type='text/css' href='/bin/ssx/AnnotationCode/Style?language=en'/><link rel='stylesheet' type='text/css' href='/bin/ssx/XWiki/SharePage?language=en'/>
<link rel='stylesheet' type='text/css' href='/bin/skin/resources/js/xwiki/widgets/modalPopup.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/js/xwiki/widgets/jumpToPage.css?language=en'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/uicomponents/widgets/confirmationBox.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/uicomponents/widgets/notification.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/uicomponents/widgets/fullScreen.css'/>

    
    <link href="/bin/skin/resources/js/xwiki/suggest/ajaxSuggest.css" rel="stylesheet" type="text/css" />
<link href="/bin/skin/resources/js/xwiki/lightbox/lightbox.css" rel="stylesheet" type="text/css" />
<!--[if IE]>
  <link href="/bin/skin/resources/js/xwiki/lightbox/lightboxIE.css" rel="stylesheet" type="text/css" />
<![endif]-->












<script type="text/javascript" src="/resources/js/prototype/prototype.js"></script>
<script type="text/javascript" src="/bin/skin/resources/js/xwiki/xwiki.js"></script>
<script type="text/javascript">
// <![CDATA[
XWiki.webapppath = "";
XWiki.servletpath = "bin/";
XWiki.contextPath = "";
XWiki.mainWiki = "xwiki";
XWiki.currentWiki = "xwiki";
XWiki.currentSpace = "Community Group performance";
XWiki.currentPage = "quick_start";
XWiki.editor = "";
XWiki.viewer = "";
XWiki.contextaction = "view";
XWiki.docisnew = false;
XWiki.docsyntax = "xwiki/2.0";
XWiki.blacklistedSpaces = [ "Import","Panels","Scheduler","Stats","XAppClasses","XAppSheets","XAppTemplates","XWiki","WatchCode","WatchSheets","XApp","WatchAdmin","Watch","ColorThemes","AnnotationCode" ];
XWiki.hasEdit = false;
XWiki.hasProgramming = false;
XWiki.hasBackupPackImportRights = false;
window.docviewurl = "/bin/view/Community+Group+performance/quick_start";
window.docediturl = "/bin/edit/Community+Group+performance/quick_start";
window.docsaveurl = "/bin/save/Community+Group+performance/quick_start";
window.docgeturl = "/bin/get/Community+Group+performance/quick_start";
// ]]>
</script>
<script type='text/javascript' src='/bin/skin/resources/js/scriptaculous/effects.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/js/xwiki/widgets/modalPopup.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/js/xwiki/widgets/jumpToPage.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/confirmationBox.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/confirmedAjaxRequest.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/notification.js' defer='defer'></script>
<script type='text/javascript' src='/resources/uicomponents/widgets/list/xlist.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/xwiki/suggest/ajaxSuggest.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/viewers/code.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/fullScreen.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/scriptaculous/scriptaculous.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/xwiki/accordion/accordion.js' defer='defer'></script>

<script type='text/javascript' src='/bin/jsx/XWiki/WebDAV?language=en' defer='defer'></script>
<script type='text/javascript' src='/bin/jsx/AnnotationCode/Settings?language=en' defer='defer'></script>
<script type='text/javascript' src='/bin/jsx/AnnotationCode/Script?language=en' defer='defer'></script>

<script type="text/javascript" src="/resources/js/xwiki/compatibility.js" defer="defer"></script>

  </head>
  <body id="body" class="wiki-xwiki space-Community_Group_performance viewbody hideright">
<div id="xwikimaincontainer">
<div id="xwikimaincontainerinner">

  <div id="menuview">
    <div id="mainmenu" class="layoutsubsection actionmenu">
<strong id="xwikimenutitle" class="hidden">General Actions:</strong>
<div class="rightmenu">
      <div id="tmLogin" class="tmLogin topmenuentry ">
   <a class="tme" href="https://auth.opensolaris.org/login.action?targetUrl=http%3A%2F%2Fmarkebrooks.github.io%2Fbin%2Fview%2FCommunity%2BGroup%2Bperformance%2Fquick_start%3Fviewer%3Dcode%26%2338%3Blanguage%3Den"><strong>Log-in</strong></a>
  </div>
  </div>
<div class="leftmenu">
  <div id="tmWiki" class="tmWiki topmenuentry hasIcon">
   <a class="tme" href="/bin/view/Main/"><strong>Wiki</strong></a>
  </div>
  <div id="tmSpace" class="tmSpace topmenuentry dropdownmenuentry  hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme" href="/bin/view/Community+Group+performance/"><strong>Community Group performance</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
                <span class="submenuitem "><a href="/bin/view/Main/SpaceIndex?space=Community+Group+performance" id="tmSpaceDocumentIndex" class="tmSpaceDocumentIndex">Document Index</a></span>
    </span></div>

<div id="tmSubSites" class="tmSubSites topmenuentry dropdownmenuentry dropdownnolink hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>Subsites</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
<span class="submenuitem hasIcon"><a href="https://cr.opensolaris.org/" id="tmCR" class="tmCR">Code Reviews</a></span>
<span class="submenuitem hasIcon"><a href="http://repo.opensolaris.org/" id="tmRepo" class="tmRepo">SCM Management</a></span>
<span class="submenuitem hasIcon"><a href="http://pkg.opensolaris.org/" id="tmPkg" class="tmPkg">Package Search</a></span>
<span class="submenuitem hasIcon"><a href="http://bugs.opensolaris.org/" id="tmBugs" class="tmBugs">Bugster</a></span>
<span class="submenuitem hasIcon"><a href="http://defect.opensolaris.org/" id="tmDefect" class="tmDefect">Bugzilla</a></span>
<span class="submenuitem hasIcon"><a href="http://test.opensolaris.org/" id="tmTest" class="tmTest">Test Machines</a></span>
<span class="submenuitem hasIcon"><a href="http://planet.opensolaris.org/" id="tmPlanet" class="tmPlanet">Planet</a></span>
<span class="submenuitem hasIcon"><a href="http://mail.opensolaris.org/" id="tmMail" class="tmMail">Mailing Lists</a></span>
<span class="submenuitem hasIcon"><a href="http://poll.opensolaris.org/" id="tmPoll" class="tmPoll">Elections &amp; Polls</a></span>
<span class="submenuitem hasIcon"><a href="http://arc.opensolaris.org/" id="tmArc" class="tmArc">ARC Case Logs</a></span>
<span class="submenuitem hasIcon"><a href="http://jucr.opensolaris.org/" id="tmJucr" class="tmJucr">Source Juicer</a></span>
<span class="submenuitem hasIcon"><a href="http://pkgfactory.opensolaris.org/" id="tmPkgfactory" class="tmPkgfactory">Package Factory</a></span>
<span class="submenuitem hasIcon"><a href="http://auth.opensolaris.org/" id="tmAuth" class="tmAuth">Auth</a></span>
</span></div>

</div>
</div>

  </div>
 <div id="header" class="layoutsection">
<div class="minwidthb"></div>

  <div id="header">
    <table style="width: 100%;">
        <tr>
            <td style="width: 1%;">
                 <a href="https://markebrooks.github.io/bin/view/Main/"><div id="logo"></div></a>  
            </td>
            <td id="logo-text" style="width: 1%;">
                Solaris
            </td>         
            <td style="width: 98%;">
                <table id="loading-indicator">
                    <tr>
                        <td><img src="https://markebrooks.github.io:443/static/images/busy.gif"
                                 alt="Loading" title="Loading"/></td>
                        <td>Loading...</td>
                    </tr>
                </table>
            </td>
            <td style="width: 1%;">
                <table id="iconbar">
                    <tr>
                    <td><a id="collectives-icon" href="https://markebrooks.github.io/bin/view/Main/collectives">
                        Collectives</a></td>
                    <td><a id="discussions-icon" href="https://markebrooks.github.io/bin/view/Main/discussions">
                            Discussions</a></td>
                    <td><a id="documentation-icon" href="https://markebrooks.github.io/bin/view/Main/documentation">
                            Documentation</a></td>
                    <td><a id="download-icon" href="https://markebrooks.github.io/bin/view/Main/downloads">
                            Download</a></td>
                    <td><a id="source-browser-icon" href="http://src.opensolaris.org/source">
                            Source Browser</a></td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>

 </div> 
  <div id="globallinks">
    <form action="/bin/view/Main/Search">
      <div class="globalsearch">
        <label class="hidden" for="headerglobalsearchinput">Search</label><input class="globalsearchinput withTip" id="headerglobalsearchinput" type="text" name="text" value="search..." size="15"/><input class="button" type="image" value="Go" alt="Go" src="/resources/icons/xwiki/search.png"/>
      </div>
    </form>
  </div> <div style="float:left;">

                

   <div id="hierarchy">
                              <a href='/bin/view/Community+Group+performance/filebench'>FileBench</a> <span class='separator'>&#187;</span> <span class='current'>Quick Start Guide to FileBench</span>
                </div>

</div>
  <span class="glink" id="headerlanguages" style="float:right">
        <a href="/bin/view/Community+Group+performance/quick_start?language=en" class="language-default language-current">en</a>
    </span>


<div class="contenthideright" id="contentcontainer">
<div id="contentcontainerinner">
<div class="leftsidecolumns">
  <div id="contentcolumn"> 
        <div class="main layoutsubsection">
      <div id="contentmenu" class="actionmenu">
    <strong id="xwikicontentmenutitle" class="hidden">Page Actions:</strong>
<div class="rightmenu">
</div>
<div class="leftmenu">
  <div id="tmExport" class="tmExport topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>Export</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="/bin/export/Community+Group+performance/quick_start?format=pdf&amp;language=en" id="tmExportPdf" class="tmExportPdf">Export as PDF</a></span>
  <span class="submenuitem "><a href="/bin/export/Community+Group+performance/quick_start?format=rtf&amp;language=en" id="tmExportRtf" class="tmExportRtf">Export as RTF</a></span>
  <span class="submenuitem "><a href="/bin/export/Community+Group+performance/quick_start?format=html&amp;language=en" id="tmExportHtml" class="tmExportHtml">Export as HTML</a></span>
    </span></div>

<div id="tmShow" class="tmShow topmenuentry dropdownmenuentry  " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme" href="/bin/view/Community+Group+performance/quick_start?viewer=code&amp;language=en"><strong>View</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
<span class="submenuitem "><a href="/bin/view/Community+Group+performance/quick_start?viewer=comments&amp;language=en" id="tmViewComments" class="tmViewComments">Comments</a></span>
<span class="submenuitem "><a href="/bin/view/Community+Group+performance/quick_start?viewer=attachments&amp;language=en" id="tmViewAttachments" class="tmViewAttachments">Attachments</a></span>
<span class="submenuitem "><a href="/bin/view/Community+Group+performance/quick_start?viewer=history&amp;language=en" id="tmViewHistory" class="tmViewHistory">History</a></span>
<span class="submenuitem "><a href="/bin/view/Community+Group+performance/quick_start?viewer=information&amp;language=en" id="tmViewInformation" class="tmViewInformation">Information</a></span>
<span class="submenuitem "><a href="/bin/view/Community+Group+performance/quick_start?viewer=code&amp;language=en" id="tmViewSource" class="tmViewSource">View Source</a></span>
</span></div>

  <div id="tmMoreActions" class="tmMoreActions topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>More actions</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="/bin/view/Community+Group+performance/quick_start?xpage=print&amp;language=en" id="tmPrintPreview" class="tmPrintPreview">Print preview</a></span>
          <span class="submenuitem "><a href="/bin/view/Community+Group+performance/quick_start?xpage=copy" id="tmActionCopy" class="tmActionCopy">Copy</a></span>
      </span></div>
</div>

    </div>
    <div id="mainContentArea">
      


<div id="document-title"><h1>Wiki source code of <a href="/bin/view/Community+Group+performance/quick_start">Quick Start Guide to FileBench</a></h1></div>
                <div id="document-info">
    <div>
                      <span id="contentshortcut"><a href="/bin/view/Community+Group+performance/quick_start?viewer=content">Content</a></span>
          </div>
    <div class="clearfloats"></div>
  </div>







<div>
  <a href="/bin/view/Community+Group+performance/quick_start?viewer=code&amp;showlinenumbers=0&amp;language=en" id="toggleLineNumbers">Hide line numbers</a>
                                  <textarea readonly="readonly" class="wiki-code" rows="25" cols="80">
  1:  Temporary Note: we are about to give FileBench a much needed facelift. This guide does *NOT* represent the current bits hanging out on sourceforge. This guide is for bits that will update sourceforge and appear in ON. This guide is made temporary to help us get PSARC approval to integrate FileBench into Solaris, and will be made permanent once the PSARC case gets approved.
  2: 
  3: == FileBench Command
  4: 
  5:  The 'filebench' command can be found in /usr/benchmarks/filebench:
  6: 
  7: {{{
  8: 
  9: diskmonster# /usr/benchmarks/filebench/bin/filebench 
 10: Usage:
 11:         filebench &lt;profile name&gt;
 12:         filebench -c &lt;stat_dir&gt; ...
 13: diskmonster# 
 14: 
 15: }}}
 16: 
 17: == Profiles
 18: 
 19:  In order to do a run, you first need a &quot;profile&quot;. A profile specifies what workload(s) you'd like to run, where you would like your results to be saved, what parameters you'd like to have for each workload, what directory you'd like to test against, your filesystem type, a description of your run, and how long you'd like to run for. A nice feature of having a profile is that you don't have to re-enter your specifics every time you want to do a run.
 20: 
 21:  A profile is described by a file ending in '.prof'. Example profiles can be found here:
 22: 
 23: {{{
 24: 
 25: diskmonster# ls /usr/benchmarks/filebench/config                                
 26: fileio.prof     filemacro.prof  filemicro.prof  generic.func    seqread.prof
 27: diskmonster# 
 28: 
 29: }}}
 30: 
 31:  Let's take a look at one profile:
 32: 
 33: {{{
 34: 
 35: diskmonster# cat /usr/benchmarks/filebench/config/seqread.prof 
 36: 
 37: DEFAULTS {
 38:         runtime = 120;
 39:         dir = /tmp;
 40:         stats = /tmp;
 41:         filesystem = tmpfs;
 42:         description = &quot;fileio tmpfs&quot;;
 43: }
 44: 
 45: CONFIG seqread1m {
 46:         function = generic;
 47:         personality = multistreamread;
 48:         filesize = 40g;
 49:         iosize = 1m;
 50: }
 51: diskmonster# 
 52: 
 53: }}}
 54: 
 55:  For the &quot;DEFAULTS&quot; part, what this tells us is that filebench will run for 120 seconds, will run (create files, do I/O, etc) on /tmp, save the results in /tmp, treats the filesystem as tmpfs, and has the &quot;fileio tmpfs&quot; description (this is used for comparing results).
 56: 
 57:  For the &quot;CONFIG&quot; part, what this tells us is that filebench is going to run the 'multistreamread' workload with files of size 40GB and I/O sizes of 1MB. The 'function' definition can be safely ignored for now as its for future use. The parameters that you specify here (filesize, iosize) override the workload's default. The defaults can be found in the workload description (a '.f' file). If you want to know more about a workload's description, go [[here&gt;&gt;#workload]].
 58: 
 59: == Doing an Actual Run
 60: 
 61:  The first thing to do is to create your own profile. Let's leverage an example profile:
 62: 
 63: {{{
 64: 
 65: diskmonster# pwd
 66: /var/tmp/ekstarz/fb
 67: diskmonster# cp /usr/benchmarks/filebench/config/seqread.prof my_seqread.prof
 68: 
 69: }}}
 70: 
 71:  Now edit the parts that you wish to change. In my case, i have a ZFS filesystem mounted at '/bigIO'. Here's an example of what you could change it to (i've changed dir, stats, filesystem, description, and filesize):
 72: 
 73: {{{
 74: 
 75: diskmonster# cat my_seqread.prof 
 76: 
 77: DEFAULTS {
 78:         runtime = 120;
 79:         dir = /bigIO;
 80:         stats = /var/tmp/ekstarz/fb/stats;
 81:         filesystem = zfs;
 82:         description = &quot;zfs ON 8/1/2007&quot;;
 83: }
 84: 
 85: CONFIG seqread1m {
 86:         function = generic;
 87:         personality = multistreamread;
 88:         filesize = 40g;
 89:         iosize = 1m;
 90: }
 91: diskmonster# 
 92: 
 93: }}}
 94: 
 95:  Ok, now that we have our own profile, let's do a run (note that we pass in the profile file, 'my_seqread.prof', with the ending suffix of '.prof' chopped off):
 96: 
 97: {{{
 98: 
 99: diskmonster# /usr/benchmarks/filebench/bin/filebench my_seqread      
100: parsing profile for config: seqread1m
101: Running /tmp/diskmonster-tmpfs-my_seqread-May_7_2008-14h_31m_48s/seqread1m/thisrun.f
102: FileBench Version 1.3.0
103: 102330: 0.020: Multi Stream Read Version 2.0 personality successfully loaded
104: 102330: 0.020: Creating/pre-allocating files and filesets
105: 102330: 0.021: File largefile4: mbytes=40
106: 102330: 0.021: Re-using file largefile4.
107: 102330: 0.021: Creating file largefile4...
108: 102330: 0.021: Re-using file /tmp/largefile4/00000001/00000001
109: 102330: 0.035: Preallocated 1 of 1 of file largefile4 in 1 seconds
110: 102330: 0.035: File largefile3: mbytes=40
111: 102330: 0.035: Re-using file largefile3.
112: 102330: 0.035: Creating file largefile3...
113: 102330: 0.035: Re-using file /tmp/largefile3/00000001/00000001
114: 102330: 0.050: Preallocated 1 of 1 of file largefile3 in 1 seconds
115: 102330: 0.050: File largefile2: mbytes=40
116: 102330: 0.050: Re-using file largefile2.
117: 102330: 0.050: Creating file largefile2...
118: 102330: 0.050: Re-using file /tmp/largefile2/00000001/00000001
119: 102330: 0.066: Preallocated 1 of 1 of file largefile2 in 1 seconds
120: 102330: 0.066: File largefile1: mbytes=40
121: 102330: 0.066: Re-using file largefile1.
122: 102330: 0.066: Creating file largefile1...
123: 102330: 0.066: Re-using file /tmp/largefile1/00000001/00000001
124: 102330: 0.080: Preallocated 1 of 1 of file largefile1 in 1 seconds
125: 102330: 0.080: waiting for fileset pre-allocation to finish
126: 102330: 0.080: Running '/usr/benchmarks/filebench/scripts/fs_flush tmpfs /tmp'
127: filesystem type is: tmpfs, no action required, so exiting
128: 102330: 0.089: Change dir to /tmp/diskmonster-tmpfs-my_seqread-May_7_2008-14h_31m_48s/seqread1m
129: 102330: 0.089: Starting 1 seqread instances
130: 102333: 1.091: Starting 1 seqread4 threads
131: 102333: 1.092: Starting 1 seqread3 threads
132: 102333: 1.092: Starting 1 seqread2 threads
133: 102333: 1.092: Starting 1 seqread1 threads
134: 102330: 4.101: Running...
135: 102330: 125.301: Run took 120 seconds...
136: 102330: 125.302: Per-Operation Breakdown
137: limit                       0ops/s   0.0mb/s      0.0ms/op        0us/op-cpu
138: seqread4                  633ops/s 618.0mb/s      1.6ms/op     1471us/op-cpu
139: limit                       0ops/s   0.0mb/s      0.0ms/op        0us/op-cpu
140: seqread3                  596ops/s 581.5mb/s      1.7ms/op     1559us/op-cpu
141: limit                       0ops/s   0.0mb/s      0.0ms/op        0us/op-cpu
142: seqread2                  615ops/s 600.4mb/s      1.6ms/op     1516us/op-cpu
143: limit                       0ops/s   0.0mb/s      0.0ms/op        0us/op-cpu
144: seqread1                  638ops/s 622.2mb/s      1.6ms/op     1454us/op-cpu
145: 
146: 102330: 125.302: 
147: IO Summary:      300905 ops 2482.7 ops/s, (2483/0 r/w) 2422.1mb/s,   1509us cpu/op,   1.6ms latency
148: 102330: 125.302: Stats dump to file 'stats.seqread1m.out'
149: 102330: 125.302: in statsdump stats.seqread1m.out
150: 102330: 125.303: Shutting down processes
151: Generating html for /tmp/diskmonster-tmpfs-my_seqread-May_7_2008-14h_31m_48s
152: file = /tmp/diskmonster-tmpfs-my_seqread-May_7_2008-14h_31m_48s/seqread1m/stats.seqread1m.out
153: 
154: diskmonster# 
155: 
156: }}}
157: 
158:  In order to compare results, use the '-c' option:
159: 
160: {{{
161: 
162: diskmonster# /usr/benchmarks/filebench/bin/filebench -c stats/diskmonster-zfs-my_sqread-Aug_1_2007-13h_04m_05s stats/diskmonster-zfs-my_sqread-Aug_1_2007-13h_18m_00s 
163: Generating html for stats/diskmonster-zfs-my_sqread-Aug_1_2007-13h_04m_05s
164: file = stats/diskmonster-zfs-my_sqread-Aug_1_2007-13h_04m_05s/seqread1m/stats.seqread1m.out
165: Generating html for stats/diskmonster-zfs-my_sqread-Aug_1_2007-13h_18m_00s
166: file = stats/diskmonster-zfs-my_sqread-Aug_1_2007-13h_18m_00s/seqread1m/stats.seqread1m.out
167: diskmonster#
168: 
169: }}}
170: 
171:  This generates an 'index.html' file that you can proudly show your management of how you've increased performance by 2x. An example of what the output looks like is [[here&gt;&gt;Community Group performance.example_comparison]].
172: 
173: == Workloads
174: 
175:  You can find the available workloads at:
176: 
177: {{{
178: 
179: diskmonster# ls /usr/benchmarks/filebench/workloads 
180: bringover.f                     fileserver.f
181: compflow_demo.f                 mongo.f
182: copyfiles.f                     multistreamread.f
183: createfiles.f                   multistreamreaddirect.f
184: deletefiles.f                   multistreamwrite.f
185: filemicro_create.f              multistreamwritedirect.f
186: filemicro_createfiles.f         oltp.f
187: filemicro_createrand.f          randomread.f
188: filemicro_delete.f              randomrw.f
189: filemicro_rread.f               randomwrite.f
190: filemicro_rwrite.f              singlestreamread.f
191: filemicro_rwritedsync.f         singlestreamreaddirect.f
192: filemicro_rwritefsync.f         singlestreamwrite.f
193: filemicro_seqread.f             singlestreamwritedirect.f
194: filemicro_seqwrite.f            tpcso.f
195: filemicro_seqwriterand.f        varmail.f
196: filemicro_seqwriterandvargam.f  webproxy.f
197: filemicro_seqwriterandvartab.f  webserver.f
198: filemicro_writefsync.f
199: diskmonster# 
200: 
201: }}}
202: 
203:  So what is a workload, and what does it do? Let's take a look at the 'multistreamread.f' workload. We can find its description here:
204: 
205: {{{
206: 
207: diskmonster# cat /usr/benchmarks/filebench/workloads/multistreamread.f 
208: 
209: set $dir=/tmp
210: set $filesize=1g
211: set $nthreads=1
212: set $iosize=1m
213: set $directio=0
214: 
215: define file name=largefile1,path=$dir,size=$filesize,prealloc,reuse
216: define file name=largefile2,path=$dir,size=$filesize,prealloc,reuse
217: define file name=largefile3,path=$dir,size=$filesize,prealloc,reuse
218: define file name=largefile4,path=$dir,size=$filesize,prealloc,reuse
219: 
220: define process name=seqread,instances=1
221: {
222:   thread name=seqread1,memsize=10m,instances=$nthreads
223:   {
224:     flowop read name=seqread1,filename=largefile1,iosize=$iosize,directio=$directio
225:     flowop bwlimit name=limit
226:   }
227:   thread name=seqread2,memsize=10m,instances=$nthreads
228:   {
229:     flowop read name=seqread2,filename=largefile2,iosize=$iosize,directio=$directio
230:     flowop bwlimit name=limit
231:   }
232:   thread name=seqread3,memsize=10m,instances=$nthreads
233:   {
234:     flowop read name=seqread3,filename=largefile3,iosize=$iosize,directio=$directio
235:     flowop bwlimit name=limit
236:   }
237:   thread name=seqread4,memsize=10m,instances=$nthreads
238:   {
239:     flowop read name=seqread4,filename=largefile4,iosize=$iosize,directio=$directio
240:     flowop bwlimit name=limit
241:   }
242: }
243: 
244: echo  &quot;Multi Stream Read Version 1.9 2005/06/21 21:18:52 personality successfully loaded&quot;
245: usage &quot;Usage: set \$dir=&quot;
246: usage &quot;       set \$filesize=    defaults to $filesize&quot;
247: usage &quot;       set \$nthreads=   defaults to $nthreads&quot;
248: usage &quot;       set \$iosize= defaults to $iosize&quot;
249: usage &quot;       set \$directio= defaults to $directio&quot;
250: usage &quot; &quot;
251: usage &quot;       run runtime (e.g. run 60)&quot;
252: 
253: diskmonster# 
254: 
255: }}}
256: 
257:  We can see that the workload has pre-defined defaults:
258: 
259: {{{
260: 
261: set $dir=/tmp
262: set $filesize=1g
263: set $nthreads=1
264: set $iosize=1m
265: set $directio=0
266: 
267: }}}
268: 
269:  Since our 'my_seqread.prof' profile specified filesize and iosize, those parameters will override the defaults.
270: 
271:  We can also see that this workload creates four files (of name 'largefile1', 'largefile2', 'largefile3', and 'largefile4'):
272: 
273: {{{
274: 
275: define file name=largefile1,path=$dir,size=$filesize,prealloc,reuse
276: define file name=largefile2,path=$dir,size=$filesize,prealloc,reuse
277: define file name=largefile3,path=$dir,size=$filesize,prealloc,reuse
278: define file name=largefile4,path=$dir,size=$filesize,prealloc,reuse
279: 
280: }}}
281: 
282:  This workload then creates four threads (each thread operates on its own file). Each of these main threads then creates 'nthreads' to do the processing. In our case (the default), 'nthreads' is set to 1.
283: 
284: {{{
285: 
286: thread name=seqread1,memsize=10m,instances=$nthreads
287:   {
288:     flowop read name=seqread1,filename=largefile1,iosize=$iosize,directio=$directio
289:     flowop bwlimit name=limit
290:   }
291: 
292: }}}
293: 
294:  Without being a '.f' expert, one can easily see what this workload is doing: four parallel threads, each thread reading in 1MB sequential I/Os on a 40GB file.
295: 
296:  More detailed information can be found on the [[FileBench wiki&gt;&gt;http://www.solarisinternals.com/wiki/index.php/FileBench]].
297: 
298:  Happy FileBenching!
</textarea>
</div>

    <div class="clearfloats"></div>
  </div>    </div>      </div><div id="leftPanels" class="panels left">
                  <div class="panel expanded OSNav">
<h1 class="xwikipaneltitle" onclick="XWiki.togglePanelVisibility(this.parentNode, 'XWiki.XWikiGuest_Panels.OSNav');">Collectives</h1>
<div class="xwikipanelcontents">
<div id="xwikinavcontainer">
<span class="wikilink"><a href="/bin/view/Main/communities">Community Groups</a></span><br/>
<span class="wikilink"><a href="/bin/view/Main/projects">Projects</a></span><br/>
<span class="wikilink"><a href="/bin/view/Main/usergroups">User Groups</a></span>
</div><p/>
<script type="text/javascript">
document.observe('xwiki:dom:loaded', function() {
var obj = {div:'xwikinav',no:$count,height:250};
var acc = createAccordion(obj);
});
</script>
</div>
</div>
                        <div class="panel expanded OSDocs">
<h1 class="xwikipaneltitle" onclick="XWiki.togglePanelVisibility(this.parentNode, 'XWiki.XWikiGuest_Panels.OSDocs');">Community Group performance Pages</h1>
<div class="xwikipanelcontents">
<ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+performance/filebench">FileBench</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+performance/filebench_sample">Sample Comparison</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+performance/gotchas">Gotchas</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+performance/quick_start">Quick Start Guide to FileBench</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+performance/files">Files</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+performance/libmicro">libMicro</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+performance/libmicro_sample">Sample Comparison</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+performance/numa">OpenSolaris  NUMA project</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+performance/8opteron">8 CPU chip Opteron</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+performance/latency">Improved Latency Discovery</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+performance/load_balancing">Load Balancing</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+performance/observability">Observability</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+performance/roles">Roles and Grants</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+performance/technical_docs">Technical Documents</a></span></li>
</ul>
                              </div>
</div>
      </div>

  </div>
<div class="clearfloats"></div>
  </div></div><div id="footerglobal" class="layoutsection">
<div class="minwidth"></div>
<hr/>
        <div id="xwikiplatformversion">XWiki Enterprise 2.7.1.34853 - <a onclick="openURL('http://enterprise.xwiki.org/xwiki/bin/view/Main/Documentation', '_blank'); return false;" href="http://www.xwiki.org/xwiki/bin/view/Main/Documentation">Documentation</a></div>
<br/>
  
      <div id="footer">
    <p>
                <a href="https://markebrooks.github.io/bin/view/Main/tou/">Terms of Use</a>
                |
                <a href="http://www.oracle.com/html/privacy.html">Privacy</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/trademark/">Trademarks</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/copyrights/">Copyright Policy</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/site_guidelines/">Site Guidelines</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/site-map/">Site Map</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/help/">Help</a>
                <br/>Your use of this web site or any of its content or software indicates your agreement to be bound by these Terms of Use.<br/>
                &copy; 2012, Oracle Corporation and/or its affiliates.<br/><img src="https://markebrooks.github.io:443/static/images/logo_oracle_footer.gif" alt="Oracle Logo"/>
            </p>
        </div>

  
</div>

</div></div></body>
</html>
