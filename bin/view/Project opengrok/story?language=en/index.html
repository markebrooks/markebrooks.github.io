<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
                    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
                                    <title>Project OpenGrok</title>
                <meta http-equiv="Content-Script-Type" content="text/javascript" />
                        <meta http-equiv="imagetoolbar" content="no"/>
                      <link rel="alternate" type="application/x-wiki" title="Edit" href="/bin/edit/Project+opengrok/story" />
                    <link rel="canonical" href="/bin/view/Project+opengrok/story" />
                            <meta name="document" content="Project opengrok.story"/>
    <meta name="wiki" content="xwiki"/>
    <meta name="space" content="Project opengrok"/>
    <meta name="page" content="story"/>
    <meta name="version" content="3.1"/>
    <meta name="restURL" content="/rest/wikis/xwiki/spaces/Project+opengrok/pages/story"/>
                <meta name="gwt:property" content="locale=en" />
                <meta name="revisit-after" content="7 days" />
<meta name="description" content="Story of OpenGrok" />
<meta name="keywords" content="wiki " />
<meta name="distribution" content="GLOBAL" />
<meta name="rating" content="General" />
<meta name="author" content="Lubos Kosco" />
<meta http-equiv="reply-to" content="" />
<meta name="language" content="en" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="alternate" type="application/rss+xml" title="Wiki Feed RSS" href="/bin/view/Main/WebRss?xpage=rdf" />
<link rel="alternate" type="application/rss+xml" title="Blog RSS Feed" href="/bin/view/Blog/GlobalBlogRss?xpage=plain" />
<link rel="shortcut icon" href="/resources/icons/oso/icon.png">
                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
<link href="https://markebrooks.github.io/static/css/stylesheet.css" rel="stylesheet" type="text/css" media="all" />
<link href="/bin/skin/skins/colibri/style.css?colorTheme=ColorThemes.Oso" rel="stylesheet" type="text/css" media="all" />
<link href="/bin/skin/skins/colibri/print.css" rel="stylesheet" type="text/css" media="print" />
        <!--[if IE]>
  <link href="/bin/skin/skins/colibri/ie%2Dall.css" rel="stylesheet" type="text/css" />
<![endif]-->
<!--[if IE 6]>
  <link href="/bin/skin/skins/colibri/ie%2D6.css" rel="stylesheet" type="text/css" />
<![endif]-->
<link rel='stylesheet' type='text/css' href='/bin/ssx/AnnotationCode/Settings?language=en'/><link rel='stylesheet' type='text/css' href='/bin/ssx/AnnotationCode/Style?language=en'/><link rel='stylesheet' type='text/css' href='/bin/ssx/XWiki/SharePage?language=en'/>
<link rel='stylesheet' type='text/css' href='/bin/skin/resources/js/xwiki/widgets/modalPopup.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/js/xwiki/widgets/jumpToPage.css?language=en'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/uicomponents/widgets/confirmationBox.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/uicomponents/widgets/notification.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/skins/colibri/resources/uicomponents/viewers/tags.css'/>

    
    <link href="/bin/skin/resources/js/xwiki/suggest/ajaxSuggest.css" rel="stylesheet" type="text/css" />
<link href="/bin/skin/resources/js/xwiki/lightbox/lightbox.css" rel="stylesheet" type="text/css" />
<!--[if IE]>
  <link href="/bin/skin/resources/js/xwiki/lightbox/lightboxIE.css" rel="stylesheet" type="text/css" />
<![endif]-->












<script type="text/javascript" src="/resources/js/prototype/prototype.js"></script>
<script type="text/javascript" src="/bin/skin/resources/js/xwiki/xwiki.js"></script>
<script type="text/javascript">
// <![CDATA[
XWiki.webapppath = "";
XWiki.servletpath = "bin/";
XWiki.contextPath = "";
XWiki.mainWiki = "xwiki";
XWiki.currentWiki = "xwiki";
XWiki.currentSpace = "Project opengrok";
XWiki.currentPage = "story";
XWiki.editor = "";
XWiki.viewer = "";
XWiki.contextaction = "view";
XWiki.docisnew = false;
XWiki.docsyntax = "xwiki/2.0";
XWiki.blacklistedSpaces = [ "Import","Panels","Scheduler","Stats","XAppClasses","XAppSheets","XAppTemplates","XWiki","WatchCode","WatchSheets","XApp","WatchAdmin","Watch","ColorThemes","AnnotationCode" ];
XWiki.hasEdit = false;
XWiki.hasProgramming = false;
XWiki.hasBackupPackImportRights = false;
window.docviewurl = "/bin/view/Project+opengrok/story";
window.docediturl = "/bin/edit/Project+opengrok/story";
window.docsaveurl = "/bin/save/Project+opengrok/story";
window.docgeturl = "/bin/get/Project+opengrok/story";
// ]]>
</script>
<script type='text/javascript' src='/bin/skin/resources/js/scriptaculous/effects.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/js/xwiki/widgets/modalPopup.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/js/xwiki/widgets/jumpToPage.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/confirmationBox.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/confirmedAjaxRequest.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/notification.js' defer='defer'></script>
<script type='text/javascript' src='/resources/uicomponents/widgets/list/xlist.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/xwiki/suggest/ajaxSuggest.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/skins/colibri/resources/uicomponents/viewers/tags.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/scriptaculous/scriptaculous.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/xwiki/accordion/accordion.js' defer='defer'></script>

<script type='text/javascript' src='/bin/jsx/XWiki/WebDAV?language=en' defer='defer'></script>
<script type='text/javascript' src='/bin/jsx/AnnotationCode/Settings?language=en' defer='defer'></script>
<script type='text/javascript' src='/bin/jsx/AnnotationCode/Script?language=en' defer='defer'></script>

<script type="text/javascript" src="/resources/js/xwiki/compatibility.js" defer="defer"></script>

  </head>
  <body id="body" class="wiki-xwiki space-Project_opengrok viewbody hideright">
<div id="xwikimaincontainer">
<div id="xwikimaincontainerinner">

  <div id="menuview">
    <div id="mainmenu" class="layoutsubsection actionmenu">
<strong id="xwikimenutitle" class="hidden">General Actions:</strong>
<div class="rightmenu">
      <div id="tmLogin" class="tmLogin topmenuentry ">
   <a class="tme" href="https://auth.opensolaris.org/login.action?targetUrl=http%3A%2F%2Fmarkebrooks.github.io%2Fbin%2Fview%2FProject%2Bopengrok%2Fstory%3Flanguage%3Den"><strong>Log-in</strong></a>
  </div>
  </div>
<div class="leftmenu">
  <div id="tmWiki" class="tmWiki topmenuentry hasIcon">
   <a class="tme" href="/bin/view/Main/"><strong>Wiki</strong></a>
  </div>
  <div id="tmSpace" class="tmSpace topmenuentry dropdownmenuentry  hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme" href="/bin/view/Project+opengrok/"><strong>Project opengrok</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
                <span class="submenuitem "><a href="/bin/view/Main/SpaceIndex?space=Project+opengrok" id="tmSpaceDocumentIndex" class="tmSpaceDocumentIndex">Document Index</a></span>
    </span></div>

<div id="tmSubSites" class="tmSubSites topmenuentry dropdownmenuentry dropdownnolink hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>Subsites</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
<span class="submenuitem hasIcon"><a href="https://cr.opensolaris.org/" id="tmCR" class="tmCR">Code Reviews</a></span>
<span class="submenuitem hasIcon"><a href="http://repo.opensolaris.org/" id="tmRepo" class="tmRepo">SCM Management</a></span>
<span class="submenuitem hasIcon"><a href="http://pkg.opensolaris.org/" id="tmPkg" class="tmPkg">Package Search</a></span>
<span class="submenuitem hasIcon"><a href="http://bugs.opensolaris.org/" id="tmBugs" class="tmBugs">Bugster</a></span>
<span class="submenuitem hasIcon"><a href="http://defect.opensolaris.org/" id="tmDefect" class="tmDefect">Bugzilla</a></span>
<span class="submenuitem hasIcon"><a href="http://test.opensolaris.org/" id="tmTest" class="tmTest">Test Machines</a></span>
<span class="submenuitem hasIcon"><a href="http://planet.opensolaris.org/" id="tmPlanet" class="tmPlanet">Planet</a></span>
<span class="submenuitem hasIcon"><a href="http://mail.opensolaris.org/" id="tmMail" class="tmMail">Mailing Lists</a></span>
<span class="submenuitem hasIcon"><a href="http://poll.opensolaris.org/" id="tmPoll" class="tmPoll">Elections &amp; Polls</a></span>
<span class="submenuitem hasIcon"><a href="http://arc.opensolaris.org/" id="tmArc" class="tmArc">ARC Case Logs</a></span>
<span class="submenuitem hasIcon"><a href="http://jucr.opensolaris.org/" id="tmJucr" class="tmJucr">Source Juicer</a></span>
<span class="submenuitem hasIcon"><a href="http://pkgfactory.opensolaris.org/" id="tmPkgfactory" class="tmPkgfactory">Package Factory</a></span>
<span class="submenuitem hasIcon"><a href="http://auth.opensolaris.org/" id="tmAuth" class="tmAuth">Auth</a></span>
</span></div>

</div>
</div>

  </div>
 <div id="header" class="layoutsection">
<div class="minwidthb"></div>

  <div id="header">
    <table style="width: 100%;">
        <tr>
            <td style="width: 1%;">
                 <a href="https://markebrooks.github.io/bin/view/Main/"><div id="logo"></div></a>  
            </td>
            <td id="logo-text" style="width: 1%;">
                Solaris
            </td>         
            <td style="width: 98%;">
                <table id="loading-indicator">
                    <tr>
                        <td><img src="https://markebrooks.github.io:443/static/images/busy.gif"
                                 alt="Loading" title="Loading"/></td>
                        <td>Loading...</td>
                    </tr>
                </table>
            </td>
            <td style="width: 1%;">
                <table id="iconbar">
                    <tr>
                    <td><a id="collectives-icon" href="https://markebrooks.github.io/bin/view/Main/collectives">
                        Collectives</a></td>
                    <td><a id="discussions-icon" href="https://markebrooks.github.io/bin/view/Main/discussions">
                            Discussions</a></td>
                    <td><a id="documentation-icon" href="https://markebrooks.github.io/bin/view/Main/documentation">
                            Documentation</a></td>
                    <td><a id="download-icon" href="https://markebrooks.github.io/bin/view/Main/downloads">
                            Download</a></td>
                    <td><a id="source-browser-icon" href="http://src.opensolaris.org/source">
                            Source Browser</a></td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>

 </div> 
  <div id="globallinks">
    <form action="/bin/view/Main/Search">
      <div class="globalsearch">
        <label class="hidden" for="headerglobalsearchinput">Search</label><input class="globalsearchinput withTip" id="headerglobalsearchinput" type="text" name="text" value="search..." size="15"/><input class="button" type="image" value="Go" alt="Go" src="/resources/icons/xwiki/search.png"/>
      </div>
    </form>
  </div> <div style="float:left;">

                

   <div id="hierarchy">
                              <a href='/bin/view/Project+opengrok/manual'>Documentation</a> <span class='separator'>&#187;</span> <span class='current'>Story of OpenGrok</span>
                </div>

</div>
  <span class="glink" id="headerlanguages" style="float:right">
        <a href="/bin/view/Project+opengrok/story?language=en" class="language-default language-current">en</a>
    </span>


<div class="contenthideright" id="contentcontainer">
<div id="contentcontainerinner">
<div class="leftsidecolumns">
  <div id="contentcolumn"> 
          <div class="main layoutsubsection">
      <div id="contentmenu" class="actionmenu">
    <strong id="xwikicontentmenutitle" class="hidden">Page Actions:</strong>
<div class="rightmenu">
</div>
<div class="leftmenu">
  <div id="tmExport" class="tmExport topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>Export</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="/bin/export/Project+opengrok/story?format=pdf&amp;language=en" id="tmExportPdf" class="tmExportPdf">Export as PDF</a></span>
  <span class="submenuitem "><a href="/bin/export/Project+opengrok/story?format=rtf&amp;language=en" id="tmExportRtf" class="tmExportRtf">Export as RTF</a></span>
  <span class="submenuitem "><a href="/bin/export/Project+opengrok/story?format=html&amp;language=en" id="tmExportHtml" class="tmExportHtml">Export as HTML</a></span>
    </span></div>

<div id="tmShow" class="tmShow topmenuentry dropdownmenuentry  " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme" href="/bin/view/Project+opengrok/story?viewer=code&amp;language=en"><strong>View</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
<span class="submenuitem "><a href="/bin/view/Project+opengrok/story?viewer=comments&amp;language=en" id="tmViewComments" class="tmViewComments">Comments</a></span>
<span class="submenuitem "><a href="/bin/view/Project+opengrok/story?viewer=attachments&amp;language=en" id="tmViewAttachments" class="tmViewAttachments">Attachments</a></span>
<span class="submenuitem "><a href="/bin/view/Project+opengrok/story?viewer=history&amp;language=en" id="tmViewHistory" class="tmViewHistory">History</a></span>
<span class="submenuitem "><a href="/bin/view/Project+opengrok/story?viewer=information&amp;language=en" id="tmViewInformation" class="tmViewInformation">Information</a></span>
<span class="submenuitem "><a href="/bin/view/Project+opengrok/story?viewer=code&amp;language=en" id="tmViewSource" class="tmViewSource">View Source</a></span>
</span></div>

  <div id="tmMoreActions" class="tmMoreActions topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>More actions</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="/bin/view/Project+opengrok/story?xpage=print&amp;language=en" id="tmPrintPreview" class="tmPrintPreview">Print preview</a></span>
          </span></div>
</div>

    </div>
    <div id="mainContentArea">
      








    
<div id="document-title"><h1>Story of OpenGrok</h1></div>





              <div id="document-info">
    <div>
          </div>
    <div class="clearfloats"></div>
  </div>

<div id="xwikicontent">
<h1 id="HTheStoryofOpenGrok-theWickedFastSourceBrowser"><span>The Story of OpenGrok - the Wicked Fast Source Browser</span></h1><p>&nbsp;Chandan B N, Dec 2005</p><p>This blog entry will act as the <del>paper</del> story of <span class="wikilink"><a href="/bin/view/Project+opengrok/">OpenGrok</a></span> the wicked fast source browser that powers the <span class="wikiexternallink"><a href="http://src.opensolaris.org/source/">OpenSolaris source browser</a></span>. <br/><span class="wikiexternallink"><a href="http://mediacast.sun.com/share/chandan/OpenGrok-screenshot.png"><img src="http://static.flickr.com/35/71852240_d42e0556fe_m.jpg" alt="OpenGrok on OpenSolaris.org" width="240" height="167"/></a></span> <br/>This would be explaining the technology behind it in more detail. It would be a living blog entry. i.e I would keep updating as and when there are updates. There would no other technical documentation, if you are fond of reading in postscript or PDF formats, I'll try to make one available sooner.</p><h3 id="HTheRevengeoftheBinaries"><span>The Revenge of the Binaries</span></h3><p>&nbsp;Being a security sentry of all Sun products, I keep a watch on reports of newly discovered security holes and then check if any Sun software is affected by them. Typically I would use <span class="wikiexternallink"><a href="http://docs.sun.com/source/806-3567/cscope.html">cscope</a></span> to find any fragments of code that I suspect to be vulnerable. In Solaris land, most of the ON(OS/Net) gate has <span class="wikiexternallink"><a href="http://docs.sun.com/source/806-3567/cscope.html">cscope</a></span> indexes pre-built nightly. Solaris is not just ON, it is a WOS (Wad Of Stuff); code and binaries flowing in from a dozen or so gates; and there are many more software products which I had no ready access to cscope indexes or sources.</p><p>&nbsp;I gathered Solaris Install images, JES install images, Sun Cluster and N1 software and many other good and great things under Sun. I wrote a Perl script, that would go down recursively on files and directory content. It would extract as much textual information as it could. For example it would convert stream packages to directories, uncompresses and extract tar, zip, gz, bzip files or run <span class="wikiexternallink"><a href="http://docs.sun.com/app/docs/doc/816-5165/6mbb0m9en?a=view">dis(1)</a></span> on <span class="wikiexternallink"><a href="http://docs.sun.com/app/docs/doc/816-5172/6mbb7btp9?a=view">ELF (3)</a></span> files, <span class="wikiexternallink"><a href="http://docs.sun.com/app/docs/doc/816-5165/6mbb0m9t8?a=view">strings(1)</a></span> on binary files. All this textual information was stored in a separate directory. This was gigabytes of characters. The initial perl script was named rob.pl (<strong>r</strong>evenge <strong>o</strong>f the <strong>b</strong>inaries). It took more than a day to complete the process; but it worked.</p><p>&nbsp;Then to be able to search through all the text files rob.pl generated, I needed a really good text search engine. I evaluated a number of them, most were meant for searching generic plain text or html documents. They either had a poor performance or did not give accurate results. <span class="wikiexternallink"><a href="http://lucene.apache.org/java">Lucene</a></span> won the race. It is not a search engine as such. It is a library to create an inverted index and search it. You can use it to build your own search engine to suite your own domain of files. Initially I just used the example search engine that came with Lucene, and was amazed at its speed. Then I looked at the Lucene website and found that <span class="wikiexternallink"><a href="http://nutch.sourceforge.net/blog/cutting.html">Doug Cutting</a></span> was the author of Lucene. To any student of information retrieval (aka study of search engines) it is a familiar name. I took it for granted that Lucene is the right software to use.</p><h3 id="HTheSearchEngines"><span>The Search Engines</span></h3><p>&nbsp;The search engine technology is no rocket science. It has been there, much before modern computers arrived. Take a book and turn the last few pages. Most likely you will find an "Index" section. That is an alphabetically sorted list of special terms and corresponding page numbers. If you are looking for some word in the whole book, (1) you would first look up the page numbers in the index, and then (2) look up the page and (3) scan through the page looking for your word. This is much faster than going page by page reading each line searching for your word.</p><p><img src="http://blogs.sun.com/roller/resources/chandan/ogstory-index.png" alt="http://blogs.sun.com/roller/resources/chandan/ogstory-index.png"/></p><p>&nbsp;All modern search engines to the same thing. For google, yahoo etc., the internet is a big book, each webpage is a page. They generate an Index, that for a given word gives you a list of pages that contain that word. It is called an inverted index since unlike seeing a document as a set of words, it sees as a set of documents for a given word.</p><h3 id="HTheProgram"><span>The Program</span></h3><p>&nbsp;The good thing about Lucene, is that it does not understand document content. You will have to write analyzers for your own content. So you have the control and freedom to interpret different kinds of files the way you want. Lucene does a good job storing your interpretation and searching it. To interpret a variety of languages under common terms, I came up with a very simple idea which fits all programming languages and executables. Programs have "symbol definitions", "symbol references", "human readable text", "path" and may be "revision history". Be it java class files starting with 0xcafebabe or C programs, it is possible to extract definitions, symbols, text, path and history.</p><p><img src="http://blogs.sun.com/roller/resources/chandan/ogstory-program.png" alt="http://blogs.sun.com/roller/resources/chandan/ogstory-program.png"/></p><p>&nbsp;The initial version of OpenGrok was a perl script named rob.pl that extracted the above 5 streams and piped them to a lucene search engine. rob.pl had become more intelligent. It was now running each file through ctags and extracting definitions. It also parsed out program identifiers. It would run <strong>dis(1)</strong> on ELF files and extract labels and call statement symbols.</p><p>&nbsp;I called it the <em>Universal Program Search Engine</em>. I was using this on my machine for quite some time. This system was used to confirm or deny existence of several vulnerabilities. For example I used it to confirm that no code in Solaris 7 was calling gzprintf() which was the cause of <span class="wikiexternallink"><a href="http://www.cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2003-0107">CVE-2003-0107</a></span> Now I could pinpoint affected areas in Solaris for each newly discovered security hole.</p><h3 id="HPerltoJava"><span>Perl to Java</span></h3><p>&nbsp;I choose Perl because it was very easy and quick to code. I could use its efficient data structures. It was really quick to prototype a design and make sure it actually worked. I realized choosing perl for a long term solution was a mistake. Perl is great for onetime <em>use and throw</em> type of applications. When I profiled the processes, java process was mostly waiting for perl to parse the text. Processing the entire program tree source and binaries took a almost half a day. After some profiling the perl code and some optimizations, I could reduce the time to about 8-9 hours. Perl was consuming too many compute cycles, despite my script being only couple of hundred lines.</p><p><img src="http://blogs.sun.com/roller/resources/chandan/ogstory-then.png" alt="http://blogs.sun.com/roller/resources/chandan/ogstory-then.png"/></p><p>&nbsp;Then I realized that I can write custom <span class="wikiexternallink"><a href="http://lucene.apache.org/java/docs/api/org/apache/lucene/analysis/Analyzer.html">Analyzers</a></span> in Lucene that analyzed each type of program giving out token streams to the Lucene indexer. It was very efficient and much faster. It now takes about 20 minutes to both decompose the ON gate sources into 5 streams and then index them.</p><p><img src="http://blogs.sun.com/roller/resources/chandan/ogstory-now.png" alt="http://blogs.sun.com/roller/resources/chandan/ogstory-now.png"/></p><p>&nbsp;The other reason for choosing Java was that after the release of 1.5 it is much like Perl in terms of data structures (aka <span class="wikiexternallink"><a href="http://java.sun.com/j2se/1.5.0/docs/guide/collections/overview.html">Collections</a></span>) and ease of programming, but more efficient and faster.</p><h3 id="HOpenSolaris"><span>OpenSolaris</span></h3><p>&nbsp;Initially a LXR based solution was in mind for hosting OpenSolaris code. Due to many issues with LXR, a web front end for cscope was also prototyped. Internally we use cscope extensively. <strong>cscope</strong> has a good feature that is <span class="wikiexternallink"><a href="http://sourceforge.net/tracker/index.php?func=detail&amp;aid=742274&amp;group_id=27350&amp;atid=390120">missing</a></span> in many other code searching tools like LXR. When search results are shown, LXR dumps line number and gives no clue as to what matched. Where as cscope can show lines where a symbol or function is used. Ctags <span class="wikiexternallink"><a href="http://ctags.sourceforge.net/faq.html#12">does not show</a></span> symbol references, cscope does. Cscope works perfectly for a small project, but wasn't scalable for something as big as OpenSolaris.</p><p>&nbsp;Cscope had a number of minor dificiencies; its full text search is too slow. Giving the book analogy above, it is does something like linearly searching through each page looking for your words. It could not AND two search conditions, which was a severe limitation if you wanted to search only with in a hierarchy of source tree. To work around this limitation, we had pre-built cscope index in each major tree branch (like library or kernel code), which is very expensive and inefficient. Also it understood only C or C like languages, and could not search for definitions in Makefiles for example.</p><p>&nbsp;At that time, this summarizes the state of the art in code lookup and version control web interfaces that were deployed for large open source projects (like <span class="wikiexternallink"><a href="http://lxr.mozilla.org/"><span class="wikiexternallink"><a class="wikimodel-freestanding" href="http://lxr.mozilla.org/"><span class="wikigeneratedlinkcontent">http://lxr.mozilla.org/</span></a></span></a></span> or <span class="wikiexternallink"><a href="http://cvs.gnome.org/"><span class="wikiexternallink"><a class="wikimodel-freestanding" href="http://cvs.gnome.org/"><span class="wikigeneratedlinkcontent">http://cvs.gnome.org/</span></a></span></a></span>)</p><table><tr><th scope="col">Feature</th><th scope="col">&nbsp;LXR&nbsp;</th><th scope="col">&nbsp;ctags&nbsp;</th><th scope="col">&nbsp;cscope&nbsp;</th><th scope="col">&nbsp;CVSview/web</th></tr><tr><td>Full text Search</td><td>&nbsp;Y</td><td> </td><td>&nbsp;#</td><td> </td></tr><tr><td>Definition Search</td><td>&nbsp;#</td><td>&nbsp;Y</td><td>&nbsp;Y</td><td> </td></tr><tr><td>Identifier Search</td><td>&nbsp;Y</td><td> </td><td>&nbsp;Y</td><td> </td></tr><tr><td>Path search</td><td>&nbsp;Y</td><td> </td><td>&nbsp;Y</td><td> </td></tr><tr><td>History Search</td><td> </td><td> </td><td> </td><td> </td></tr><tr><td>Shows matching lines</td><td> </td><td>&nbsp;Y</td><td>&nbsp;Y</td><td> </td></tr><tr><td>Hierarchical Search</td><td> </td><td> </td><td> </td><td> </td></tr><tr><td>query syntax like <strong>AND</strong>, <strong>OR</strong>, <strong>field:</strong></td><td> </td><td> </td><td> </td><td> </td></tr><tr><td>Incremental update</td><td> </td><td> </td><td> </td><td> </td></tr><tr><td>Syntax highlighting-Xref</td><td>&nbsp;Y</td><td> </td><td> </td><td>&nbsp;#</td></tr><tr><td>Interface for SCM</td><td> </td><td> </td><td> </td><td>&nbsp;Y</td></tr><tr><td>open source&nbsp;</td><td> </td><td>&nbsp;Y</td><td>&nbsp;Y</td><td>&nbsp;Y</td></tr><tr><td>Usable URLs&nbsp;</td><td>&nbsp;Y</td><td>&nbsp;-</td><td>&nbsp;-</td><td> </td></tr><tr><td>Individual file download</td><td> </td><td>&nbsp;-</td><td>&nbsp;-</td><td>&nbsp;Y</td></tr><tr><td>Changes at directory level</td><td> </td><td>&nbsp;-</td><td>&nbsp;-</td><td>&nbsp;#</td></tr><tr><td>Multi language support</td><td>#</td><td>&nbsp;Y</td><td>&nbsp;#</td><td>&nbsp;-</td></tr></table><p>&nbsp;Legend:<br/><strong>Y</strong> : Yes the feature is present<br/><strong>#</strong> : the feature may be partly present<br/><strong>-</strong> : not applicable<br/>&nbsp;Note: OpenGrok provides all the above features.</p><p>&nbsp;The Lucene based program search engine readily had all the missing search features above. It did the correct way of doing full text searches. It could identify definitions in any language that ctags understood. It could limit searches to a branch of the source tree (aka hierarchical search). It showed the matching lines for a search instead of just line numbers. And it did an incremental update of its index.</p><p>&nbsp;At that time the only thing missing in OpenGrok was good color-coding of source and displaying version control information, which was not much difficult to implement. I evaluated a number of Lex like code generators and <span class="wikiexternallink"><a href="http://jflex.de/">JFlex</a></span> turned out be the fastest. Jflex is now used for tokenizing and hyper-text cross reference.</p><p>&nbsp;Early this year it was deployed to host the OpenSolaris source code on <span class="wikiexternallink"><a href="http://cvs.opensolaris.org/source/">opensolaris.org</a></span> and accessible only to OpenSolaris pilot community members. Many things improved with the comments and feedback received from community members. By June 14th this year it was ready for broadcasting millions of lines of OpenSolaris source code to the world. Now some consider OpenGrok as one of the <span class="wikiexternallink"><a href="http://www.opensolaris.org/jive/thread.jspa?messageID=11593">10 most important things about OpenSolaris</a></span>.</p><h3 id="H22Makethecommoncasefasterandeasier22"><span>"Make the common case faster and easier"</span></h3><p>&nbsp;Before being considered for OpenSolaris it was just a program written for my own use. If it is going to be deployed for OpenSolaris, and publicly available, there will be hundreds of people and robots hitting it all the time. It had to be secure, fast and efficient and well as usable. OpenGrok then aimed to be a complete integrated and usable solution to source code search and browsing.</p><p>&nbsp;The secret behind OpenGrok is the principle "make the common case faster and easier". Call it Chandan's law. (Since Google says I am the first one to say so!). It combines a fundamental principle in Computer Architecture (i.e "<em>make the common case fast</em>" (also known as <span class="wikiexternallink"><a href="http://en.wikipedia.org/wiki/Amdahl's_law">Amdahl's law</a></span>) with a fundamental principle in Human Computer Interaction (i.e "<em>make the common case easier</em>"). To build your software pick the best tools available like Lucene and Java. The result is what you now see on <span class="wikiexternallink"><a href="http://cvs.opensolaris.org/source/"><span class="wikiexternallink"><a class="wikimodel-freestanding" href="http://cvs.opensolaris.org"><span class="wikigeneratedlinkcontent">http://cvs.opensolaris.org</span></a></span></a></span>. Believe me, it takes lot more effort to make things simple than to make things complicated.</p><p>&nbsp;There are more smaller features and attention to detail that make big difference in usability and speed.</p><h3 id="HRefactoring"><span>Refactoring</span></h3><p>&nbsp;The initial working prototype was available to OpenSolaris pilot community members. It also easily withstood the <span class="wikiexternallink"><a href="http://en.wikipedia.org/wiki/Slashdotted">slashdotting</a></span> on the day OpenSolaris was launched. Allen who owns the webservers said the CPU usage was quite low even when we had tens of thousands of hits on that day. That was a sigh of relief for me, my efforts in making fast, secure and scalable did not go waste.</p><p>&nbsp;Then I started refactoring the code, to keep code organized, to help others extend the functionalities or easily add support for more language types and version control systems. I used <span class="wikiexternallink"><a href="http://www.netbeans.org">Netbeans</a></span> to do the refactoring. Netbeans has changed a lot since the very first time I used it, many years ago. It makes Java programing a more pleasant experience. I could easily move code around; safely delete unused methods and classes; rename things in more logical way and do much more. Refactoring took time, the core analysis engine changed beyond comparison. Once finished, it was open sourced under the name OpenGrok.<br/>&nbsp;It is available for <span class="wikilink"><a href="/bin/view/Project+opengrok/">download here</a></span>. The logo has a opening flower bracket. Which is a common block start symbol in languages like C and Java. It has no closing bracket to signify open source.<br/><span class="wikilink"><a href="/bin/view/Project+opengrok/"><img src="https://markebrooks.github.io/bin/download/Project+opengrok/WebHome/logo.png" alt="logo.png"/></a></span></p><h3 id="HOpenGrokInternals"><span>OpenGrok Internals</span></h3><p>&nbsp;Some details of OpenGrok internal workings can be found on <span class="wikilink"><a href="/bin/view/Project+opengrok/internals">OpenGrok Internals</a></span> page.</p><h3 id="HInRetrospect"><span>In Retrospect</span></h3><p>&nbsp;If people can not easily understand how a piece of software source code works, or if people cannot easily and accurately search through it, then it is as bad as any proprietary software or data formats which are difficult for general public to understand.</p><p>&nbsp;OpenGrok in that sense is a true enabler for source code that is open source. It lets people easily and quickly find the source code, look at it, understand the history and changes made to the source. It makes a developers life easy. It certainly has made my life easy when I am looking for security holes in software.</p><script type="text/javascript">//<![CDATA[

var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));

//]]></script>
<script type="text/javascript">//<![CDATA[

try {
var pageTracker = _gat._getTracker("UA-3665334-1");
pageTracker._trackPageview();
} catch(err) {}
//]]></script>
</div>


    <div class="clearfloats"></div>
  </div>      <div id="xdocFooter">
  
                

       <div class="doc-tags" id="xdocTags">
        Tags:
        </div>
  
  <div id="xdocAuthors">
    <div class="xdocCreation">       Created by admin on 2009/10/26 12:16<br/>
          </div>
    <div class="xdocLastModification">       Last modified by Lubos Kosco on 2009/11/22 07:52
    </div>
  </div>
</div>
<div id="xwikidata" class="layoutsubsection">
        </div>  
    </div>      </div><div id="leftPanels" class="panels left">
                  <div class="panel expanded Search">
<h1 class="xwikipaneltitle hidden">Search</h1>
<div class="xwikipanelcontents">
<form action="/bin/view/Main/Search">
<div class="globalsearch">
<label class="hidden" for="globalsearchinput">Search query</label>
<input class="globalsearchinput" id="globalsearchinput" name="text" onblur="if (this.value == '') value='search...'; this.blur()" onfocus="if (this.value == 'search...') value=''; this.select();" size="15" type="text" value="search..."></input>
&nbsp;
<input alt="Go" class="button" src="/skins/colibri/go.png" type="image" value="Go"></input>
</div>
</form>
</div>
</div>
                        <div class="panel expanded OSDocs">
<h1 class="xwikipaneltitle" onclick="XWiki.togglePanelVisibility(this.parentNode, 'XWiki.XWikiGuest_Panels.OSDocs');">Project opengrok Pages</h1>
<div class="xwikipanelcontents">
<ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+opengrok/Discussions">Discussions</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+opengrok/Issues">Issues</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+opengrok/Roadmap">Tentative Roadmap</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+opengrok/files">Files / Downloads</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+opengrok/manual">Documentation</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+opengrok/Repositories">Supported Revision Control Systems</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+opengrok/Supported+Languages+and+Formats">Supported Languages and Formats</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+opengrok/builddescription">How to build OpenGrok from source</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+opengrok/installdescription">How to install OpenGrok</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+opengrok/internals">Internals</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+opengrok/story">Story of OpenGrok</a></span></li>
</ul></li>
</ul>
                              </div>
</div>
                        <div class="panel expanded OSNav">
<h1 class="xwikipaneltitle" onclick="XWiki.togglePanelVisibility(this.parentNode, 'XWiki.XWikiGuest_Panels.OSNav');">Collectives</h1>
<div class="xwikipanelcontents">
<div id="xwikinavcontainer">
<span class="wikilink"><a href="/bin/view/Main/communities">Community Groups</a></span><br/>
<span class="wikilink"><a href="/bin/view/Main/projects">Projects</a></span><br/>
<span class="wikilink"><a href="/bin/view/Main/usergroups">User Groups</a></span>
</div><p/>
<script type="text/javascript">
document.observe('xwiki:dom:loaded', function() {
var obj = {div:'xwikinav',no:$count,height:250};
var acc = createAccordion(obj);
});
</script>
</div>
</div>
                        <div class="panel expanded Subsites">
<h1 class="xwikipaneltitle" onclick="XWiki.togglePanelVisibility(this.parentNode, 'XWiki.XWikiGuest_Panels.Subsites');">Subsites</h1>
<div class="xwikipanelcontents">
<span class="wikiexternallink"><a href="http://cr.opensolaris.org">Code Reviews</a></span><br/>
<span class="wikiexternallink"><a href="http://repo.opensolaris.org">SCM Management</a></span><br/>
<span class="wikiexternallink"><a href="http://pkg.opensolaris.org">Package Search</a></span><br/>
<span class="wikiexternallink"><a href="http://bugs.opensolaris.org">Bugster</a></span><br/>
<span class="wikiexternallink"><a href="http://defect.opensolaris.org">Bugzilla</a></span><br/>
<span class="wikiexternallink"><a href="http://test.opensolaris.org">Test Machines</a></span><br/>
<span class="wikiexternallink"><a href="http://planet.opensolaris.org">Planet</a></span><br/>
<span class="wikiexternallink"><a href="http://mail.opensolaris.org">Mailing Lists</a></span><br/>
<span class="wikiexternallink"><a href="http://poll.opensolaris.org">Elections & Polls</a></span><br/>
<span class="wikiexternallink"><a href="http://arc.opensolaris.org">ARC Case Logs</a></span><br/>
<span class="wikiexternallink"><a href="http://jucr.opensolaris.org">Source Juicer</a></span><br/>
<span class="wikiexternallink"><a href="http://pkgfactory.opensolaris.org">Package Factory</a></span><br/>
<span class="wikiexternallink"><a href="http://auth.opensolaris.org">User Authentication</a></span><br/>
</div>
</div>
                        
      </div>

  </div>
<div class="clearfloats"></div>
  </div></div><div id="footerglobal" class="layoutsection">
<div class="minwidth"></div>
<hr/>
        <div id="xwikiplatformversion">XWiki Enterprise 2.7.1.34853 - <a onclick="openURL('http://enterprise.xwiki.org/xwiki/bin/view/Main/Documentation', '_blank'); return false;" href="http://www.xwiki.org/xwiki/bin/view/Main/Documentation">Documentation</a></div>
<br/>
  
      <div id="footer">
    <p>
                <a href="https://markebrooks.github.io/bin/view/Main/tou/">Terms of Use</a>
                |
                <a href="http://www.oracle.com/html/privacy.html">Privacy</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/trademark/">Trademarks</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/copyrights/">Copyright Policy</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/site_guidelines/">Site Guidelines</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/site-map/">Site Map</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/help/">Help</a>
                <br/>Your use of this web site or any of its content or software indicates your agreement to be bound by these Terms of Use.<br/>
                &copy; 2012, Oracle Corporation and/or its affiliates.<br/><img src="https://markebrooks.github.io:443/static/images/logo_oracle_footer.gif" alt="Oracle Logo"/>
            </p>
        </div>

  
</div>

</div></div></body>
</html>
