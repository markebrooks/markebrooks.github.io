<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
                    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
                                    <title>System V IPC (Project rm.sysv) - XWiki</title>
                <meta http-equiv="Content-Script-Type" content="text/javascript" />
                        <meta http-equiv="imagetoolbar" content="no"/>
                      <link rel="alternate" type="application/x-wiki" title="Edit" href="/bin/edit/Project+rm/sysv" />
                    <link rel="canonical" href="/bin/view/Project+rm/sysv" />
                            <meta name="document" content="Project rm.sysv"/>
    <meta name="wiki" content="xwiki"/>
    <meta name="space" content="Project rm"/>
    <meta name="page" content="sysv"/>
    <meta name="version" content="1.1"/>
    <meta name="restURL" content="/rest/wikis/xwiki/spaces/Project+rm/pages/sysv"/>
                <meta name="gwt:property" content="locale=en" />
                <meta name="revisit-after" content="7 days" />
<meta name="description" content="System V IPC" />
<meta name="keywords" content="wiki " />
<meta name="distribution" content="GLOBAL" />
<meta name="rating" content="General" />
<meta name="author" content="admin" />
<meta http-equiv="reply-to" content="" />
<meta name="language" content="en" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="alternate" type="application/rss+xml" title="Wiki Feed RSS" href="/bin/view/Main/WebRss?xpage=rdf" />
<link rel="alternate" type="application/rss+xml" title="Blog RSS Feed" href="/bin/view/Blog/GlobalBlogRss?xpage=plain" />
<link rel="shortcut icon" href="/resources/icons/oso/icon.png">
                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
<link href="https://markebrooks.github.io/static/css/stylesheet.css" rel="stylesheet" type="text/css" media="all" />
<link href="/bin/skin/skins/colibri/style.css?colorTheme=ColorThemes.Oso" rel="stylesheet" type="text/css" media="all" />
<link href="/bin/skin/skins/colibri/print.css" rel="stylesheet" type="text/css" media="all" />
        <!--[if IE]>
  <link href="/bin/skin/skins/colibri/ie%2Dall.css" rel="stylesheet" type="text/css" />
<![endif]-->
<!--[if IE 6]>
  <link href="/bin/skin/skins/colibri/ie%2D6.css" rel="stylesheet" type="text/css" />
<![endif]-->
<link rel='stylesheet' type='text/css' href='/bin/ssx/AnnotationCode/Settings?language=en'/><link rel='stylesheet' type='text/css' href='/bin/ssx/AnnotationCode/Style?language=en'/><link rel='stylesheet' type='text/css' href='/bin/ssx/XWiki/SharePage?language=en'/>
<link rel='stylesheet' type='text/css' href='/bin/skin/resources/js/xwiki/widgets/modalPopup.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/js/xwiki/widgets/jumpToPage.css?language=en'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/uicomponents/widgets/confirmationBox.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/uicomponents/widgets/notification.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/skins/colibri/resources/uicomponents/viewers/tags.css'/>

    
    <link href="/bin/skin/resources/js/xwiki/suggest/ajaxSuggest.css" rel="stylesheet" type="text/css" />
<link href="/bin/skin/resources/js/xwiki/lightbox/lightbox.css" rel="stylesheet" type="text/css" />
<!--[if IE]>
  <link href="/bin/skin/resources/js/xwiki/lightbox/lightboxIE.css" rel="stylesheet" type="text/css" />
<![endif]-->












<script type="text/javascript" src="/resources/js/prototype/prototype.js"></script>
<script type="text/javascript" src="/bin/skin/resources/js/xwiki/xwiki.js"></script>
<script type="text/javascript">
// <![CDATA[
XWiki.webapppath = "";
XWiki.servletpath = "bin/";
XWiki.contextPath = "";
XWiki.mainWiki = "xwiki";
XWiki.currentWiki = "xwiki";
XWiki.currentSpace = "Project rm";
XWiki.currentPage = "sysv";
XWiki.editor = "";
XWiki.viewer = "";
XWiki.contextaction = "view";
XWiki.docisnew = false;
XWiki.docsyntax = "xwiki/2.0";
XWiki.blacklistedSpaces = [ "Import","Panels","Scheduler","Stats","XAppClasses","XAppSheets","XAppTemplates","XWiki","WatchCode","WatchSheets","XApp","WatchAdmin","Watch","ColorThemes","AnnotationCode" ];
XWiki.hasEdit = false;
XWiki.hasProgramming = false;
XWiki.hasBackupPackImportRights = false;
window.docviewurl = "/bin/view/Project+rm/sysv";
window.docediturl = "/bin/edit/Project+rm/sysv";
window.docsaveurl = "/bin/save/Project+rm/sysv";
window.docgeturl = "/bin/get/Project+rm/sysv";
// ]]>
</script>
<script type='text/javascript' src='/bin/skin/resources/js/scriptaculous/effects.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/js/xwiki/widgets/modalPopup.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/js/xwiki/widgets/jumpToPage.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/confirmationBox.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/confirmedAjaxRequest.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/notification.js' defer='defer'></script>
<script type='text/javascript' src='/resources/uicomponents/widgets/list/xlist.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/xwiki/suggest/ajaxSuggest.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/skins/colibri/resources/uicomponents/viewers/tags.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/scriptaculous/scriptaculous.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/xwiki/accordion/accordion.js' defer='defer'></script>

<script type='text/javascript' src='/bin/jsx/XWiki/WebDAV?language=en' defer='defer'></script>
<script type='text/javascript' src='/bin/jsx/AnnotationCode/Settings?language=en' defer='defer'></script>
<script type='text/javascript' src='/bin/jsx/AnnotationCode/Script?language=en' defer='defer'></script>

<script type="text/javascript" src="/resources/js/xwiki/compatibility.js" defer="defer"></script>

  </head>
  <body id="body" class="wiki-xwiki space-Project_rm viewbody hideright">
<div id="xwikimaincontainer">
<div id="xwikimaincontainerinner">

  <div id="menuview">
    <div id="mainmenu" class="layoutsubsection actionmenu">
<strong id="xwikimenutitle" class="hidden">General Actions:</strong>
<div class="rightmenu">
      <div id="tmLogin" class="tmLogin topmenuentry ">
   <a class="tme" href="https://auth.opensolaris.org/login.action?targetUrl=http%3A%2F%2Fmarkebrooks.github.io%2Fbin%2Fview%2FProject%2Brm%2Fsysv%3Fxpage%3Dprint%26%2338%3Blanguage%3Den"><strong>Log-in</strong></a>
  </div>
  </div>
<div class="leftmenu">
  <div id="tmWiki" class="tmWiki topmenuentry hasIcon">
   <a class="tme" href="/bin/view/Main/"><strong>Wiki</strong></a>
  </div>
  <div id="tmSpace" class="tmSpace topmenuentry dropdownmenuentry  hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme" href="/bin/view/Project+rm/"><strong>Project rm</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
                <span class="submenuitem "><a href="/bin/view/Main/SpaceIndex?space=Project+rm" id="tmSpaceDocumentIndex" class="tmSpaceDocumentIndex">Document Index</a></span>
    </span></div>

<div id="tmSubSites" class="tmSubSites topmenuentry dropdownmenuentry dropdownnolink hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>Subsites</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
<span class="submenuitem hasIcon"><a href="https://cr.opensolaris.org/" id="tmCR" class="tmCR">Code Reviews</a></span>
<span class="submenuitem hasIcon"><a href="http://repo.opensolaris.org/" id="tmRepo" class="tmRepo">SCM Management</a></span>
<span class="submenuitem hasIcon"><a href="http://pkg.opensolaris.org/" id="tmPkg" class="tmPkg">Package Search</a></span>
<span class="submenuitem hasIcon"><a href="http://bugs.opensolaris.org/" id="tmBugs" class="tmBugs">Bugster</a></span>
<span class="submenuitem hasIcon"><a href="http://defect.opensolaris.org/" id="tmDefect" class="tmDefect">Bugzilla</a></span>
<span class="submenuitem hasIcon"><a href="http://test.opensolaris.org/" id="tmTest" class="tmTest">Test Machines</a></span>
<span class="submenuitem hasIcon"><a href="http://planet.opensolaris.org/" id="tmPlanet" class="tmPlanet">Planet</a></span>
<span class="submenuitem hasIcon"><a href="http://mail.opensolaris.org/" id="tmMail" class="tmMail">Mailing Lists</a></span>
<span class="submenuitem hasIcon"><a href="http://poll.opensolaris.org/" id="tmPoll" class="tmPoll">Elections &amp; Polls</a></span>
<span class="submenuitem hasIcon"><a href="http://arc.opensolaris.org/" id="tmArc" class="tmArc">ARC Case Logs</a></span>
<span class="submenuitem hasIcon"><a href="http://jucr.opensolaris.org/" id="tmJucr" class="tmJucr">Source Juicer</a></span>
<span class="submenuitem hasIcon"><a href="http://pkgfactory.opensolaris.org/" id="tmPkgfactory" class="tmPkgfactory">Package Factory</a></span>
<span class="submenuitem hasIcon"><a href="http://auth.opensolaris.org/" id="tmAuth" class="tmAuth">Auth</a></span>
</span></div>

</div>
</div>

  </div>
 <div id="header" class="layoutsection">
<div class="minwidthb"></div>

  <div id="header">
    <table style="width: 100%;">
        <tr>
            <td style="width: 1%;">
                 <a href="https://markebrooks.github.io/bin/view/Main/"><div id="logo"></div></a>
            </td>
            <td style="width: 99%;">
                <table id="loading-indicator">
                    <tr>
                        <td><img src="https://markebrooks.github.io:443/static/images/busy.gif"
                                 alt="Loading" title="Loading"/></td>
                        <td>Loading...</td>
                    </tr>
                </table>
            </td>
            <td style="width: 1%;">
                <table id="iconbar">
                    <tr>
                    <td><a id="collectives-icon" href="https://markebrooks.github.io/bin/view/Main/collectives">
                        Collectives</a></td>
                    <td><a id="discussions-icon" href="https://markebrooks.github.io/bin/view/Main/discussions">
                            Discussions</a></td>
                    <td><a id="documentation-icon" href="https://markebrooks.github.io/bin/view/Main/documentation">
                            Documentation</a></td>
                    <td><a id="download-icon" href="https://markebrooks.github.io/bin/view/Main/downloads">
                            Download</a></td>
                    <td><a id="source-browser-icon" href="http://src.opensolaris.org/source">
                            Source Browser</a></td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>

 </div> 
  <div id="globallinks">
    <form action="/bin/view/Main/Search">
      <div class="globalsearch">
        <label class="hidden" for="headerglobalsearchinput">Search</label><input class="globalsearchinput withTip" id="headerglobalsearchinput" type="text" name="text" value="search..." size="15"/><input class="button" type="image" value="Go" alt="Go" src="/resources/icons/xwiki/search.png"/>
      </div>
    </form>
  </div> <div style="float:left;">

                

   <div id="hierarchy">
                              <a href='/bin/view/Project+rm/rctls'>Resource Controls</a> <span class='separator'>&#187;</span> <span class='current'>System V IPC</span>
                </div>

</div>
  <span class="glink" id="headerlanguages" style="float:right">
        <a href="/bin/view/Project+rm/sysv?language=en" class="language-default language-current">en</a>
    </span>


<div class="contenthideright" id="contentcontainer">
<div id="contentcontainerinner">
<div class="leftsidecolumns">
  <div id="contentcolumn"> 
          <div class="main layoutsubsection">
      <div id="contentmenu" class="actionmenu">
    <strong id="xwikicontentmenutitle" class="hidden">Page Actions:</strong>
<div class="rightmenu">
</div>
<div class="leftmenu">
  <div id="tmExport" class="tmExport topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>Export</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="/bin/export/Project+rm/sysv?format=pdf&amp;language=en" id="tmExportPdf" class="tmExportPdf">Export as PDF</a></span>
  <span class="submenuitem "><a href="/bin/export/Project+rm/sysv?format=rtf&amp;language=en" id="tmExportRtf" class="tmExportRtf">Export as RTF</a></span>
  <span class="submenuitem "><a href="/bin/export/Project+rm/sysv?format=html&amp;language=en" id="tmExportHtml" class="tmExportHtml">Export as HTML</a></span>
    </span></div>

<div id="tmShow" class="tmShow topmenuentry dropdownmenuentry  " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme" href="/bin/view/Project+rm/sysv?viewer=code&amp;language=en"><strong>View</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
<span class="submenuitem "><a href="/bin/view/Project+rm/sysv?viewer=comments&amp;language=en" id="tmViewComments" class="tmViewComments">Comments</a></span>
<span class="submenuitem "><a href="/bin/view/Project+rm/sysv?viewer=attachments&amp;language=en" id="tmViewAttachments" class="tmViewAttachments">Attachments</a></span>
<span class="submenuitem "><a href="/bin/view/Project+rm/sysv?viewer=history&amp;language=en" id="tmViewHistory" class="tmViewHistory">History</a></span>
<span class="submenuitem "><a href="/bin/view/Project+rm/sysv?viewer=information&amp;language=en" id="tmViewInformation" class="tmViewInformation">Information</a></span>
<span class="submenuitem "><a href="/bin/view/Project+rm/sysv?viewer=code&amp;language=en" id="tmViewSource" class="tmViewSource">View Source</a></span>
</span></div>

  <div id="tmMoreActions" class="tmMoreActions topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>More actions</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="/bin/view/Project+rm/sysv?xpage=print&amp;language=en" id="tmPrintPreview" class="tmPrintPreview">Print preview</a></span>
          <span class="submenuitem "><a href="/bin/view/Project+rm/sysv?xpage=copy" id="tmActionCopy" class="tmActionCopy">Copy</a></span>
      </span></div>
</div>

    </div>
    <div id="mainContentArea">
      








    
<div id="document-title"><h1>System V IPC</h1></div>

              <div id="document-info">
    <div>
          </div>
    <div class="clearfloats"></div>
  </div>

<div id="xwikicontent">
<h1 id="HSystemVIPCresourcecontrols"><span>System V IPC resource controls</span></h1><h2 id="HBackground"><span>Background</span></h2><p>&nbsp;Traditionally, the behavior of the System V IPC facilities (shared memory, message queues, and semaphores) was influenced through a large set of /etc/system tunables. While some of the tunables allowed one to set meaningful administrative limits (e.g. maximum shared memory segment size), many simply exposed implementation details (e.g. the number of undo entries in an undo structure).</p><p>&nbsp;There were many serious problems with the traditional implementation:</p><ul><li>Relying on /etc/system as an administrative mechanism meant reconfiguration required a reboot.</li><li>Many parameters were used to size data structures allocated at boot (or module load) time. There was a penalty for sizing the parameters larger than was needed.</li><li>There were a large variety of parameters to change, many of which were implementation-specific and didn't align well with public interface boundaries. Yet they were necessary to configure the system for different workloads.</li><li>The tunables, named by combining a three character facility abbreviation with a three character parameter abbreviation, were a veritable alphabet soup. It was very easy for an administrator to misconfigure the system (see <span class="wikiexternallink"><a href="http://bugs.opensolaris.org/bugdatabase/view_bug.do?bug_id=4381822">&nbsp;4381822</a></span>).</li><li>The algorithms used by the traditional implementation assumed statically-sized data structures. Even if there was an interface which let one do so, changing many of the tunables at run-time wouldn't have been possible.</li><li>There was no way to allocate additional resources to one user without allowing all users those resources. Since the amount of resources was always fixed, one user could have trivially prevented another from performing its desired allocations.</li><li>There was no good way to observe the values of the parameters.</li></ul><p>&nbsp;Additionally, a perpetual complaint was that the default values for these tunables were too small.</p><h2 id="HTheSolution"><span>The Solution</span></h2><p>&nbsp;In Solaris 10 (build 28), these problems were solved by reworking much of the System V IPC implementation to not require as much administrative hand-holding (removing unnecessary tunables), and by using <span class="wikilink"><a href="/bin/view/Project+rm/rctls">task-based resource controls</a></span> to limit users' access to the System V IPC facilities (replacing the remaining tunables). At the same time, the default values for those limits which remained were raised to more reasonable values. Lastly, for compatibility, the legacy tunables are interpreted and used to initialize the default privileged limit for the new resource controls. The new resource controls are:</p><table><tr><td>Resource control</td><td>Similar tunable</td><td>Old default</td><td>New default</td><td>Max value</td></tr><tr><td><span class="wikilink"><a href="#project.max-shm-ids">project.max-shm-ids</a></span></td><td>&nbsp;shminfo_shmmni&nbsp;</td><td>&nbsp;100&nbsp;</td><td>&nbsp;128&nbsp;</td><td>&nbsp;1&lt;&lt;24</td></tr><tr><td><span class="wikilink"><a href="#project.max-msg-ids">project.max-msg-ids</a></span></td><td>&nbsp;msginfo_msgmni&nbsp;</td><td>&nbsp;50&nbsp;</td><td>&nbsp;128&nbsp;</td><td>&nbsp;1&lt;&lt;24</td></tr><tr><td><span class="wikilink"><a href="#project.max-sem-ids">project.max-sem-ids</a></span></td><td>&nbsp;seminfo_semmni&nbsp;</td><td>&nbsp;10&nbsp;</td><td>&nbsp;128&nbsp;</td><td>&nbsp;1&lt;&lt;24</td></tr><tr><td><span class="wikilink"><a href="#project.max-shm-memory">project.max-shm-memory</a></span></td><td>&nbsp;shminfo_shmmax&nbsp;</td><td>&nbsp;0x800000&nbsp;</td><td>&nbsp;1/4 physical&nbsp;</td><td>&nbsp;UINT64_MAX</td></tr><tr><td><span class="wikilink"><a href="#process.max-sem-nsems">process.max-sem-nsems</a></span></td><td>&nbsp;seminfo_semmsl&nbsp;</td><td>&nbsp;25&nbsp;</td><td>&nbsp;512&nbsp;</td><td>&nbsp;SHRT_MAX</td></tr><tr><td><span class="wikilink"><a href="#process.max-sem-ops">process.max-sem-ops</a></span></td><td>&nbsp;seminfo_semopm&nbsp;</td><td>&nbsp;10&nbsp;</td><td>&nbsp;512&nbsp;</td><td>&nbsp;INT_MAX</td></tr><tr><td><span class="wikilink"><a href="#process.max-msg-qbytes">process.max-msg-qbytes</a></span></td><td>&nbsp;msginfo_msgmnb&nbsp;</td><td>&nbsp;4096&nbsp;</td><td>&nbsp;65536&nbsp;</td><td>&nbsp;ULONG_MAX</td></tr><tr><td><span class="wikilink"><a href="#process.max-msg-messages">process.max-msg-messages</a></span></td><td>&nbsp;msginfo_msgtql&nbsp;</td><td>&nbsp;40&nbsp;</td><td>&nbsp;8192&nbsp;</td><td>&nbsp;UINT_MAX</td></tr></table><p>&nbsp;The following tunables no longer have any effect (tunables listed in italics were removed by previous efforts):</p><table><tr><td>semsys:seminfo_semmns</td><td>semsys:seminfo_semvmx</td><td>semsys:seminfo_semmnu</td></tr><tr><td>semsys:seminfo_semaem</td><td>semsys:seminfo_semume</td><td>semsys:seminfo_semusz</td></tr><tr><td><em>semsys:seminfo_semmap</em></td><td><em>shmsys:shminfo_shmseg</em></td><td><em>shmsys:shminfo_shmmin</em></td></tr><tr><td><em>msgsys:msginfo_msgmap</em></td><td><em>msgsys:msginfo_msgseg</em></td><td><em>msgsys:msginfo_msgssz</em></td></tr><tr><td>msgsys:msginfo_msgmax</td></tr></table><p>&nbsp;The end result of all this is that all the problems listed above have been addressed. The specific improvements are:</p><ul><li>It is now possible to limit use of the System V IPC facilities on a per-process or per-project basis (depending on the resource being limited), without rebooting the system.</li><li>None of these limits affect allocation directly; they can be made as large as possible without any immediate effect on the system. (Note that doing so would allow a user to allocate resources without bound, which <strong>would</strong> have an effect on the system.)</li><li>Implementation internals are no longer exposed to the administrator, simplifying configuration greatly.</li><li>The resource controls are fewer, and are more verbosely and intuitively named, than the tunables.</li><li>Limit settings can be observed using the common resource control interfaces, such as prctl(1) and getrctl(2).</li><li>Shared memory is limited based on the <span class="wikilink"><a href="#project.max-shm-memory">total amount allocated per project</a></span>, not a per segment limit. This means that an administrator can give a user the ability to allocate a lot of segments <strong>and</strong> large segments, without having to give the user the ability to create a lot of large segments.</li><li>Because resource controls are the administrative mechanism, this configuration can be persistent using project(4), as well as be made via the network.</li></ul><p>&nbsp;The following major implementation changes were made (for all the details, see <span class="wikiexternallink"><a href="http://cvs.opensolaris.org/source/xref/on/usr/src/uts/common/os/ipc.c">os/ipc.c</a></span>, <span class="wikiexternallink"><a href="http://cvs.opensolaris.org/source/xref/on/usr/src/uts/common/os/msg.c">os/msg.c</a></span>, <span class="wikiexternallink"><a href="http://cvs.opensolaris.org/source/xref/on/usr/src/uts/common/os/shm.c">os/shm.c</a></span>, <span class="wikiexternallink"><a href="http://cvs.opensolaris.org/source/xref/on/usr/src/uts/common/syscall/sem.c">syscall/sem.c</a></span>):</p><ul><li>Message headers are allocated dynamically. Previously all message headers were allocated at module load time, linked together into a global freelist, and allocated from there. (The locking on this list also caused a scalability problem.)</li><li>Semaphore arrays are allocated dynamically. Previously semaphore arrays were allocated from a seminfo_semmns sized vmem arena, which meant that allocations could fail due to fragmentation.</li><li>Semaphore undo structures are allocated dynamically, and are per-process and per-semaphore array. They are unlimited in number and are always as large as the semaphore array they correspond to. Previously there were a limited number of per-process undo structures, allocated at module load time. Furthermore, the undo structures each had the same, fixed size. It was possible for a process to not be able to allocate an undo structure, or for the process's undo structure to be full.</li><li>Semaphore undo structures maintain their undo values as signed integers, so no semaphore value is too large to be undone.</li><li>All facilities used to allocate objects from a fixed size namespace, allocated at module load time. All facility namespaces are now resizable, and will grow as demand increases.</li></ul><h2 id="HResourceControls"><span>Resource Controls</span></h2><h3 id="Hproject.max-shm-ids"><span>project.max-shm-ids</span></h3><p>&nbsp;Maximum number of shared memory ids allowed a project.</p><p>&nbsp;When shmget() is used to allocate a shared memory segment, one id is allocated. If the id allocation doesn't succeed, shmget() fails and errno is set to ENOSPC (previously returned when "<em>the system-imposed limit on the maximum number of allowed shared memory identifiers system-wide would be exceeded</em>"). Upon successful shmctl(, IPC_RMID) the id is deallocated.</p><h3 id="Hproject.max-sem-ids"><span>project.max-sem-ids</span></h3><p>&nbsp;Maximum number of semaphore ids allowed a project.</p><p>&nbsp;When semget() is used to allocate a semaphore set, one id is allocated. If the id allocation doesn't succeed, semget() fails and errno is set to ENOSPC (previously returned when "<em>the system-imposed limit on the maximum number of allowed semaphores or semaphore identifiers system-wide would be exceeded</em>"). Upon successful semctl(, IPC_RMID) the id is deallocated.</p><h3 id="Hproject.max-msg-ids"><span>project.max-msg-ids</span></h3><p>&nbsp;Maximum number of message queue ids allowed a project.</p><p>&nbsp;When msgget() is used to allocate a message queue, one id is allocated. If the id allocation doesn't succeed, msgget() fails and errno is set to ENOSPC (previously returned when "<em>the system-imposed limit on the maximum number of allowed message queue identifiers system wide would be exceeded</em>"). Upon successful msgctl(, IPC_RMID) the id is deallocated.</p><h3 id="Hproject.max-shm-memory"><span>project.max-shm-memory</span></h3><p>&nbsp;Total amount of shared memory allowed a project.</p><p>&nbsp;When shmget() is used to allocate a shared memory segment, the segment's size is allocated against this limit. If the space allocation doesn't succeed, shmget() fails and errno is set to EINVAL (currently returned when "<em>The size argument is less than the system-imposed minimum or greater than the system-imposed maximum.</em>"). The size will be deallocated once the last process has detached the segment and the segment has been successfully shmctl(, IPC_RMID)ed.</p><h3 id="Hprocess.max-sem-nsems"><span>process.max-sem-nsems</span></h3><p>&nbsp;Maximum number of semaphores allowed per semaphore set.</p><p>&nbsp;When semget() is used to allocate a semaphore set, the size of the set is compared with this limit. If the number of semaphores exceeds the limit, semget() fails and errno is set to EINVAL (previously returned when "<em>The nsems argument is ... greater than the system-imposed limit</em>").</p><h3 id="Hprocess.max-sem-ops"><span>process.max-sem-ops</span></h3><p>&nbsp;Maximum number of semaphore operations allowed per semop call.</p><p>&nbsp;When semget() successfully allocates a semaphore set, the minimum enforced value of this limit is used to initialize the "<em>system-imposed maximum</em>" number of operations a semop() call for this set can perform.</p><h3 id="Hprocess.max-msg-qbytes"><span>process.max-msg-qbytes</span></h3><p>&nbsp;Maximum number of bytes of messages on a message queue.</p><p>&nbsp;When msgget() successfully allocates a message queue, the minimum enforced value of this limit is used to initialize msg_qbytes (which was previously "<em>set to the system limit</em>").</p><h3 id="Hprocess.max-msg-messages"><span>process.max-msg-messages</span></h3><p>&nbsp;Maximum number of messages on a message queue.</p><p>&nbsp;When msgget() successfully allocates a message queue, the minimum enforced value of this limit is used to initialize a per-queue limit on the number of messages.</p><h2 id="HReferenceMaterials"><span>Reference Materials</span></h2><p>&nbsp;Official documentation:</p><p><span class="wikiexternallink"><a href="http://docs.sun.com/app/docs/doc/817-0404">Solaris Tunable Parameters Reference Manual</a></span><br/><span class="wikiexternallink"><a href="http://docs.sun.com/app/docs/doc/817-0547">Solaris 10 What's New</a></span> (see 3/05)</p><p>&nbsp;ARC cases:</p><p>&nbsp;PSARC 2002/694 System V IPC resource controls<br/>&nbsp;PSARC 2003/047 process.max-msg-messages resource control</p><p>&nbsp;Bugs:</p><p><span class="wikiexternallink"><a href="http://bugs.opensolaris.org/bugdatabase/view_bug.do?bug_id=4269168">4269168</a></span> Can't run ICEM Surf with IPC kernel parameters default values.<br/><span class="wikiexternallink"><a href="http://bugs.opensolaris.org/bugdatabase/view_bug.do?bug_id=4325644">4325644</a></span> Shared Memory limits should be exported<br/><span class="wikiexternallink"><a href="http://bugs.opensolaris.org/bugdatabase/view_bug.do?bug_id=4381822">4381822</a></span> System V IPC settings should be dynamic<br/><span class="wikiexternallink"><a href="http://bugs.opensolaris.org/bugdatabase/view_bug.do?bug_id=4678797">4678797</a></span> Solaris default value of shminfo_shmmax is too small<br/><span class="wikiexternallink"><a href="http://bugs.opensolaris.org/bugdatabase/view_bug.do?bug_id=4715904">4715904</a></span> System V semaphores still suffer from false sharing<br/><span class="wikiexternallink"><a href="http://bugs.opensolaris.org/bugdatabase/view_bug.do?bug_id=4715918">4715918</a></span> semaphore operations do not scale when SEM_UNDO is specified<br/><span class="wikiexternallink"><a href="http://bugs.opensolaris.org/bugdatabase/view_bug.do?bug_id=4743342">4743342</a></span> race between msgget and message queue consumers<br/><span class="wikiexternallink"><a href="http://bugs.opensolaris.org/bugdatabase/view_bug.do?bug_id=4743359">4743359</a></span> race between semget and semaphore consumers<br/><span class="wikiexternallink"><a href="http://bugs.opensolaris.org/bugdatabase/view_bug.do?bug_id=4780063">4780063</a></span> ipcs may incorrectly report that a message queue has waiting readers<br/><span class="wikiexternallink"><a href="http://bugs.opensolaris.org/bugdatabase/view_bug.do?bug_id=4788894">4788894</a></span> ipcs may fail to report waiting message queue writers<br/><span class="wikiexternallink"><a href="http://bugs.opensolaris.org/bugdatabase/view_bug.do?bug_id=4808173">4808173</a></span> System V message queues don't scale, period</p>
</div>


    <div class="clearfloats"></div>
  </div>      <div id="xdocFooter">
  
                

       <div class="doc-tags" id="xdocTags">
        Tags:
        </div>
  
  <div id="xdocAuthors">
    <div class="xdocCreation">       Created by admin on 2009/10/26 12:17<br/>
          </div>
    <div class="xdocLastModification">       Last modified by admin on 2009/10/26 12:17
    </div>
  </div>
</div>
<div id="xwikidata" class="layoutsubsection">
        </div>  
    </div>      </div><div id="leftPanels" class="panels left">
                  <div class="panel expanded OSNav">
<h1 class="xwikipaneltitle" onclick="XWiki.togglePanelVisibility(this.parentNode, 'XWiki.XWikiGuest_Panels.OSNav');">Collectives</h1>
<div class="xwikipanelcontents">
<div id="xwikinavcontainer">
<span class="wikilink"><a href="/bin/view/Main/communities">Community Groups</a></span><br/>
<span class="wikilink"><a href="/bin/view/Main/projects">Projects</a></span><br/>
<span class="wikilink"><a href="/bin/view/Main/usergroups">User Groups</a></span>
</div><p/>
<script type="text/javascript">
document.observe('xwiki:dom:loaded', function() {
var obj = {div:'xwikinav',no:$count,height:250};
var acc = createAccordion(obj);
});
</script>
</div>
</div>
                        <div class="panel expanded OSDocs">
<h1 class="xwikipaneltitle" onclick="XWiki.togglePanelVisibility(this.parentNode, 'XWiki.XWikiGuest_Panels.OSDocs');">Project rm Pages</h1>
<div class="xwikipanelcontents">
<ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+rm/docs">Documentation and Examples</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+rm/pools">Resource Pools</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+rm/msets">Memory Sets</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+rm/poolsui">Usability Enhancements</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+rm/rctls">Resource Controls</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+rm/cpu%2Dcaps">CPU caps</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+rm/sysv">System V IPC</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+rm/zones">RM for Zones</a></span></li>
</ul>
                    </div>
</div>
      </div>

  </div>
<div class="clearfloats"></div>
  </div></div><div id="footerglobal" class="layoutsection">
<div class="minwidth"></div>
<hr/>
        <div id="xwikiplatformversion">XWiki Enterprise 2.7.1.34853 - <a onclick="openURL('http://enterprise.xwiki.org/xwiki/bin/view/Main/Documentation', '_blank'); return false;" href="http://www.xwiki.org/xwiki/bin/view/Main/Documentation">Documentation</a></div>
<br/>
  
      <div id="footer">
    <p>
                <a href="https://markebrooks.github.io/bin/view/Main/tou/">Terms of Use</a>
                |
                <a href="http://www.oracle.com/html/privacy.html">Privacy</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/trademark/">Trademarks</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/copyrights/">Copyright Policy</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/site_guidelines/">Site Guidelines</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/site-map/">Site Map</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/help/">Help</a>
                <br/>Your use of this web site or any of its content or software indicates your agreement to be bound by these Terms of Use.<br/>
                &copy; 2011, Oracle Corporation and/or its affiliates.<br/><img src="https://markebrooks.github.io:443/static/images/logo_oracle_footer.gif" alt="Oracle Logo"/>
            </p>
        </div>

  
</div>

</div></div></body>
</html>
