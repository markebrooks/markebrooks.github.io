<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
                    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
                                    <title>AI Image Management (Project caiman.AI Image Management) - XWiki</title>
                <meta http-equiv="Content-Script-Type" content="text/javascript" />
                        <meta http-equiv="imagetoolbar" content="no"/>
                      <link rel="alternate" type="application/x-wiki" title="Edit" href="/bin/edit/Project+caiman/AI+Image+Management" />
                    <link rel="canonical" href="/bin/view/Project+caiman/AI+Image+Management" />
                            <meta name="document" content="Project caiman.AI Image Management"/>
    <meta name="wiki" content="xwiki"/>
    <meta name="space" content="Project caiman"/>
    <meta name="page" content="AI Image Management"/>
    <meta name="version" content="20.2"/>
    <meta name="restURL" content="/rest/wikis/xwiki/spaces/Project+caiman/pages/AI+Image+Management"/>
                <meta name="gwt:property" content="locale=en" />
                <meta name="revisit-after" content="7 days" />
<meta name="description" content="AI Image Management" />
<meta name="keywords" content="wiki " />
<meta name="distribution" content="GLOBAL" />
<meta name="rating" content="General" />
<meta name="author" content="Dave Miner" />
<meta http-equiv="reply-to" content="" />
<meta name="language" content="en" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="alternate" type="application/rss+xml" title="Wiki Feed RSS" href="/bin/view/Main/WebRss?xpage=rdf" />
<link rel="alternate" type="application/rss+xml" title="Blog RSS Feed" href="/bin/view/Blog/GlobalBlogRss?xpage=plain" />
<link rel="shortcut icon" href="/resources/icons/oso/icon.png">
                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
<link href="https://markebrooks.github.io/static/css/stylesheet.css" rel="stylesheet" type="text/css" media="all" />
<link href="/bin/skin/skins/colibri/style.css?colorTheme=ColorThemes.Oso" rel="stylesheet" type="text/css" media="all" />
<link href="/bin/skin/skins/colibri/print.css" rel="stylesheet" type="text/css" media="print" />
        <!--[if IE]>
  <link href="/bin/skin/skins/colibri/ie%2Dall.css" rel="stylesheet" type="text/css" />
<![endif]-->
<!--[if IE 6]>
  <link href="/bin/skin/skins/colibri/ie%2D6.css" rel="stylesheet" type="text/css" />
<![endif]-->
<link rel='stylesheet' type='text/css' href='/bin/ssx/AnnotationCode/Settings?language=en'/><link rel='stylesheet' type='text/css' href='/bin/ssx/AnnotationCode/Style?language=en'/><link rel='stylesheet' type='text/css' href='/bin/ssx/XWiki/SharePage?language=en'/>
<link rel='stylesheet' type='text/css' href='/bin/skin/resources/js/xwiki/widgets/modalPopup.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/js/xwiki/widgets/jumpToPage.css?language=en'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/uicomponents/widgets/confirmationBox.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/uicomponents/widgets/notification.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/skins/colibri/resources/uicomponents/viewers/tags.css'/>

    
    <link href="/bin/skin/resources/js/xwiki/suggest/ajaxSuggest.css" rel="stylesheet" type="text/css" />
<link href="/bin/skin/resources/js/xwiki/lightbox/lightbox.css" rel="stylesheet" type="text/css" />
<!--[if IE]>
  <link href="/bin/skin/resources/js/xwiki/lightbox/lightboxIE.css" rel="stylesheet" type="text/css" />
<![endif]-->












<script type="text/javascript" src="/resources/js/prototype/prototype.js"></script>
<script type="text/javascript" src="/bin/skin/resources/js/xwiki/xwiki.js"></script>
<script type="text/javascript">
// <![CDATA[
XWiki.webapppath = "";
XWiki.servletpath = "bin/";
XWiki.contextPath = "";
XWiki.mainWiki = "xwiki";
XWiki.currentWiki = "xwiki";
XWiki.currentSpace = "Project caiman";
XWiki.currentPage = "AI Image Management";
XWiki.editor = "";
XWiki.viewer = "";
XWiki.contextaction = "view";
XWiki.docisnew = false;
XWiki.docsyntax = "xwiki/2.0";
XWiki.blacklistedSpaces = [ "Import","Panels","Scheduler","Stats","XAppClasses","XAppSheets","XAppTemplates","XWiki","WatchCode","WatchSheets","XApp","WatchAdmin","Watch","ColorThemes","AnnotationCode" ];
XWiki.hasEdit = false;
XWiki.hasProgramming = false;
XWiki.hasBackupPackImportRights = false;
window.docviewurl = "/bin/view/Project+caiman/AI+Image+Management";
window.docediturl = "/bin/edit/Project+caiman/AI+Image+Management";
window.docsaveurl = "/bin/save/Project+caiman/AI+Image+Management";
window.docgeturl = "/bin/get/Project+caiman/AI+Image+Management";
// ]]>
</script>
<script type='text/javascript' src='/bin/skin/resources/js/scriptaculous/effects.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/js/xwiki/widgets/modalPopup.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/js/xwiki/widgets/jumpToPage.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/confirmationBox.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/confirmedAjaxRequest.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/notification.js' defer='defer'></script>
<script type='text/javascript' src='/resources/uicomponents/widgets/list/xlist.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/xwiki/suggest/ajaxSuggest.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/skins/colibri/resources/uicomponents/viewers/tags.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/scriptaculous/scriptaculous.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/xwiki/accordion/accordion.js' defer='defer'></script>

<script type='text/javascript' src='/bin/jsx/XWiki/WebDAV?language=en' defer='defer'></script>
<script type='text/javascript' src='/bin/jsx/AnnotationCode/Settings?language=en' defer='defer'></script>
<script type='text/javascript' src='/bin/jsx/AnnotationCode/Script?language=en' defer='defer'></script>

<script type="text/javascript" src="/resources/js/xwiki/compatibility.js" defer="defer"></script>

  </head>
  <body id="body" class="wiki-xwiki space-Project_caiman viewbody hideright">
<div id="xwikimaincontainer">
<div id="xwikimaincontainerinner">

  <div id="menuview">
    <div id="mainmenu" class="layoutsubsection actionmenu">
<strong id="xwikimenutitle" class="hidden">General Actions:</strong>
<div class="rightmenu">
      <div id="tmLogin" class="tmLogin topmenuentry ">
   <a class="tme" href="https://auth.opensolaris.org/login.action?targetUrl=http%3A%2F%2Fmarkebrooks.github.io%2Fbin%2Fview%2FProject%2Bcaiman%2FAI%2BImage%2BManagement"><strong>Log-in</strong></a>
  </div>
  </div>
<div class="leftmenu">
  <div id="tmWiki" class="tmWiki topmenuentry hasIcon">
   <a class="tme" href="/bin/view/Main/"><strong>Wiki</strong></a>
  </div>
  <div id="tmSpace" class="tmSpace topmenuentry dropdownmenuentry  hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme" href="/bin/view/Project+caiman/"><strong>Project caiman</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
                <span class="submenuitem "><a href="/bin/view/Main/SpaceIndex?space=Project+caiman" id="tmSpaceDocumentIndex" class="tmSpaceDocumentIndex">Document Index</a></span>
    </span></div>

<div id="tmSubSites" class="tmSubSites topmenuentry dropdownmenuentry dropdownnolink hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>Subsites</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
<span class="submenuitem hasIcon"><a href="https://cr.opensolaris.org/" id="tmCR" class="tmCR">Code Reviews</a></span>
<span class="submenuitem hasIcon"><a href="http://repo.opensolaris.org/" id="tmRepo" class="tmRepo">SCM Management</a></span>
<span class="submenuitem hasIcon"><a href="http://pkg.opensolaris.org/" id="tmPkg" class="tmPkg">Package Search</a></span>
<span class="submenuitem hasIcon"><a href="http://bugs.opensolaris.org/" id="tmBugs" class="tmBugs">Bugster</a></span>
<span class="submenuitem hasIcon"><a href="http://defect.opensolaris.org/" id="tmDefect" class="tmDefect">Bugzilla</a></span>
<span class="submenuitem hasIcon"><a href="http://test.opensolaris.org/" id="tmTest" class="tmTest">Test Machines</a></span>
<span class="submenuitem hasIcon"><a href="http://planet.opensolaris.org/" id="tmPlanet" class="tmPlanet">Planet</a></span>
<span class="submenuitem hasIcon"><a href="http://mail.opensolaris.org/" id="tmMail" class="tmMail">Mailing Lists</a></span>
<span class="submenuitem hasIcon"><a href="http://poll.opensolaris.org/" id="tmPoll" class="tmPoll">Elections &amp; Polls</a></span>
<span class="submenuitem hasIcon"><a href="http://arc.opensolaris.org/" id="tmArc" class="tmArc">ARC Case Logs</a></span>
<span class="submenuitem hasIcon"><a href="http://jucr.opensolaris.org/" id="tmJucr" class="tmJucr">Source Juicer</a></span>
<span class="submenuitem hasIcon"><a href="http://pkgfactory.opensolaris.org/" id="tmPkgfactory" class="tmPkgfactory">Package Factory</a></span>
<span class="submenuitem hasIcon"><a href="http://auth.opensolaris.org/" id="tmAuth" class="tmAuth">Auth</a></span>
</span></div>

</div>
</div>

  </div>
 <div id="header" class="layoutsection">
<div class="minwidthb"></div>

  <div id="header">
    <div id="header_banner">
	<table style="width: 100%;">
	    <tr>
		<td style="width: 1%;">
		    <a href="https://markebrooks.github.io/bin/view/Main/"><div id="logo"></div></a>  
		</td>
		<td id="logo-text" style="width: 1%;">
		    Solaris
		</td>         
		<td style="width: 98%;">
		    <table id="loading-indicator">
			<tr>
			    <td><img src="https://markebrooks.github.io:443/static/images/busy.gif"
				    alt="Loading" title="Loading"/></td>
			    <td>Loading...</td>
			</tr>
		    </table>
		</td>
		<td style="width: 1%;">
		    <table id="iconbar">
			<tr>
			<td><a id="collectives-icon" href="https://markebrooks.github.io/bin/view/Main/collectives">
			    Collectives</a></td>
			<td><a id="discussions-icon" href="https://markebrooks.github.io/bin/view/Main/discussions">
				Discussions</a></td>
			<td><a id="documentation-icon" href="https://markebrooks.github.io/bin/view/Main/documentation">
				Documentation</a></td>
			<td><a id="download-icon" href="https://markebrooks.github.io/bin/view/Main/downloads">
				Download</a></td>
			<td><a id="source-browser-icon" href="http://src.opensolaris.org/source">
				Source Browser</a></td>
			</tr>
		    </table>
		</td>
	    </tr>
	</table>
    </div>
    <div id="site-notice">
	<span>
	    <a href="https://markebrooks.github.io/bin/view/Main/">ATTENTION: This website and all services within the opensolaris.org domain will be unavailable after March 24, 2013.</a>	   
	</span>
    </div>
</div>
 </div> 
  <div id="globallinks">
    <form action="/bin/view/Main/Search">
      <div class="globalsearch">
        <label class="hidden" for="headerglobalsearchinput">Search</label><input class="globalsearchinput withTip" id="headerglobalsearchinput" type="text" name="text" value="search..." size="15"/><input class="button" type="image" value="Go" alt="Go" src="/resources/icons/xwiki/search.png"/>
      </div>
    </form>
  </div> <div style="float:left;">

                

   <div id="hierarchy">
                                          <a href='/bin/view/Project+caiman/'>Caiman, Solaris Install Revisited</a> <span class='separator'>&#187;</span> <a href='/bin/view/Project+caiman/auto_install'>Automated Installation Project</a> <span class='separator'>&#187;</span> <span class='current'>AI Image Management</span>
                      </div>

</div>
  <span class="glink" id="headerlanguages" style="float:right">
        <a href="/bin/view/Project+caiman/AI+Image+Management?language=en" class="language-default language-current">en</a>
    </span>


<div class="contenthideright" id="contentcontainer">
<div id="contentcontainerinner">
<div class="leftsidecolumns">
  <div id="contentcolumn"> 
          <div class="main layoutsubsection">
      <div id="contentmenu" class="actionmenu">
    <strong id="xwikicontentmenutitle" class="hidden">Page Actions:</strong>
<div class="rightmenu">
</div>
<div class="leftmenu">
  <div id="tmExport" class="tmExport topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>Export</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="/bin/export/Project+caiman/AI+Image+Management?format=pdf&amp;language=en" id="tmExportPdf" class="tmExportPdf">Export as PDF</a></span>
  <span class="submenuitem "><a href="/bin/export/Project+caiman/AI+Image+Management?format=rtf&amp;language=en" id="tmExportRtf" class="tmExportRtf">Export as RTF</a></span>
  <span class="submenuitem "><a href="/bin/export/Project+caiman/AI+Image+Management?format=html&amp;language=en" id="tmExportHtml" class="tmExportHtml">Export as HTML</a></span>
    </span></div>

<div id="tmShow" class="tmShow topmenuentry dropdownmenuentry  " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme" href="/bin/view/Project+caiman/AI+Image+Management?viewer=code&amp;language=en"><strong>View</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
<span class="submenuitem "><a href="/bin/view/Project+caiman/AI+Image+Management?viewer=comments&amp;language=en" id="tmViewComments" class="tmViewComments">Comments</a></span>
<span class="submenuitem "><a href="/bin/view/Project+caiman/AI+Image+Management?viewer=attachments&amp;language=en" id="tmViewAttachments" class="tmViewAttachments">Attachments</a></span>
<span class="submenuitem "><a href="/bin/view/Project+caiman/AI+Image+Management?viewer=history&amp;language=en" id="tmViewHistory" class="tmViewHistory">History</a></span>
<span class="submenuitem "><a href="/bin/view/Project+caiman/AI+Image+Management?viewer=information&amp;language=en" id="tmViewInformation" class="tmViewInformation">Information</a></span>
<span class="submenuitem "><a href="/bin/view/Project+caiman/AI+Image+Management?viewer=code&amp;language=en" id="tmViewSource" class="tmViewSource">View Source</a></span>
</span></div>

  <div id="tmMoreActions" class="tmMoreActions topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>More actions</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="/bin/view/Project+caiman/AI+Image+Management?xpage=print&amp;language=en" id="tmPrintPreview" class="tmPrintPreview">Print preview</a></span>
          </span></div>
</div>

    </div>
    <div id="mainContentArea">
      








    
<div id="document-title"><h1>AI Image Management</h1></div>





              <div id="document-info">
    <div>
          </div>
    <div class="clearfloats"></div>
  </div>

<div id="xwikicontent">
<h1 id="HAutomatedInstallationServiceandImageManagementDesign"><span>Automated Installation Service and Image Management Design</span></h1><p>Version 3, updated 19 February 2010</p><h2 id="HBackground"><span>Background</span></h2><p>The Automated Installation (AI) system for Solaris Next is required to provide a scalable and easy-to-use automatic deployment capability for organizations that wish to deploy multiple instances of Solaris. &nbsp;At a high level, the Automated Installation process is implemented by booting a Solaris installation environment on the (virtual) machine to be installed, locating an installation manifest, and executing the installation based on the manifest contents, which specify storage configuration, software content, and system configuration attributes. &nbsp;The installation environment may be booted from either local media, such as a CD (perhaps emulated by the system controller using an ISO image) or USB flash memory device, or more commonly over an attached network. &nbsp;The installation environment for Solaris Next is built using the Distribution Constructor (DC) and is currently published in ISO and USB image formats. &nbsp;These images are made available for download from either internal Sun Release Engineering servers (for Sun-internal users) or from Sun's download center and external mirrors for OpenSolaris releases.</p><p>In order to use network booting for AI, it's necessary to first provision services on a server that support the network booting architecture for the client platform (x86 or SPARC). &nbsp;The installadm(1M) utility is provided as part of AI to facilitate this service provisioning. &nbsp;As of OpenSolaris 2009.06, this procedure minimally consists of the steps:</p><ol><li>Install the AI service components:<br/> <tt>pkg install SUNWinstalladm-tools</tt></li><li>Download the ISO <img src="https://markebrooks.github.io/bin/download/Project+caiman/AI+Image+Management/filename" class="wikimodel-freestanding" alt="filename"/><br/> <tt>wget <span class="wikiexternallink"><a class="wikimodel-freestanding" href="http://dlc.sun.com/osol/opensolaris/2009/06/osol-0906-ai-x86.iso"><span class="wikigeneratedlinkcontent">http://dlc.sun.com/osol/opensolaris/2009/06/osol-0906-ai-x86.iso</span></a></span>&nbsp;</tt></li><li>Instantiate an AI service, including DHCP service:<br/> <tt>installadm create-service -n 0906x86 -i 192.168.1.1 -c 10 -s osol-0906-ai-x86.iso /export/ai/0906x86</tt></li></ol><p>Once the above steps have been completed, systems on the server's local network may be booted using DHCP-based network booting (PXE on x86) and will install a standard package set (currently equivalent to the OpenSolaris live CD) from the pkg.opensolaris.org repository onto the boot disk. &nbsp;Customizing this behavior requires generating an alternate AI manifest and publishing it for either the entire service or a specific client using installadm.</p><h2 id="HProblem"><span>Problem</span></h2><p>When deploying a large-scale Solaris infrastructure such as that used by Solaris engineering and many of our larger customers, it's usual to deploy AI service instances that are local to a site or a specific network in order to achieve desired levels of performance and/or to conform to administrative boundaries (the design of the software does not require this, however). &nbsp;Further, in many instances it's desirable to automatically update those local service instances as new releases are made available for deployment. &nbsp;In Solaris engineering, we've historically used an internal tool called "getimage" that automated deployment of each Solaris build from release engineering to local Jumpstart servers; this functionality has not been made available to customers, who presumably either write their own similar scripts or use Sun products such as Ops Center or third-party deployment management solutions. &nbsp;Providing basic deployment management functionality as part of Solaris Next would be helpful in managing its deployment both internally and in customer environments, and is desired as soon as possible.</p><p>Primary requirements to be considered in the solution include:</p><ul><li>Servers need to support serving N different images/services from M different release trains across all supported architectures (currently SPARC and x86)</li><li>AI services must be able to run in a non-global zone</li><li>Limit extra infrastructure requirements, leverage existing required components</li><li>Simple ability to use a default installation, but easily customizable for each client.</li></ul><p>Secondary factors relevant to the solution include:</p><ul><li>Limit post-processing required on each destination server</li><li>Leave door open for non-OpenSolaris servers to provide services</li><li>Would be nice to have analytics on image popularity, user base, etc.</li></ul><h2 id="HSolution"><span>Solution</span></h2><p>A solution to this problem includes several components:</p><ul><li>Publication of images from the supplier (Sun, the customer, others)</li><li>Provisioning of AI services</li><li>Update of images on the AI server</li><li>Removal of images on the AI server</li></ul><p>In defining a solution, we note that controlling the pkg(5) repository contents effectively controls the software made available for installation by the AI clients. &nbsp;As such, customers of any scale can be expected to deploy their own local mirrors of Sun's release and support repositories and select the versions published to aid in change management. &nbsp;We also note that installation performance of AI will typically be dominated by performance of pkg(5), as the installation mode used with AI installs pkg(5) packages; this further encourages provisioning of local mirrors. &nbsp;Thus, to ease alignment of administrative boundariea, limit incompatibility problems, and take advantage of the infrastructure that will be deployed around pkg(5), we should align the deployment methodology for AI boot images with that used to release the corresponding packages.</p><p>While undertaking this alignment, issues encountered so far in deploying OpenSolaris AI services have been considered and, where solutions align with the basic changes required for image management, they are included in this proposal.</p><p>It is important to note that this proposal does not include any changes in how AI manifests are managed. &nbsp;It is expected that parallel work on the manifest and web server design issues may lead to changes in manifest management that are sympathetic with this proposal.</p><h2 id="HPublication"><span>Publication</span></h2><p>We propose to publish the AI boot image content into the pkg(5) repository as the package <tt>image/autoinstall</tt>. &nbsp;The existing ISO and USB images will continue to be made available via other download mechanisms in order to support burning bootable AI media on systems not managing software with pkg(5). &nbsp;The Distribution Constructor will be extended to provide automatic publication of the images to a pkg repository if specified in the construction manifest.</p><p>The packages in the product repositories will be, like other packages, "fat", containing both the x86 and SPARC image content, each element tagged with its appropriate variant.</p><p>Note that this proposal does not address publishing interactive installation images into the pkg repository.</p><h2 id="HProvisioning"><span>Provisioning</span></h2><p>Provisioning an AI server using IPS changes from the process described earlier, both visibly and under the covers.</p><p>The visible change is that the separate download of the ISO image is no longer required. &nbsp;The installadm invocation to provision a service from pkg(5) becomes:</p><p><tt>installadm create-service [-s &lt;package-spec&gt;] [-a &lt;architecture&gt;] [-n &lt;svcname&gt;] [-y] [&lt;targetdir&gt;]</tt></p><p>Note that -s is optional; in its absence, the image/autoinstall package will be installed from the first publisher in the system's publisher preference list providing an instance of that package. &nbsp;The package-spec can also be a full FMRI to an alternate package instance or a URI to a p5i file. &nbsp;Note that if a publisher that requires authenticated access (such as pkg.sun.com/opensolaris/support) is used then appropriate authentication must be set up for the publisher prior to execution of this command. &nbsp;The existing -s option to select a source ISO file will continue to be supported to allow servicing of earlier boot images that were not published into pkg(5), or for convenience when an ISO has already been downloaded. &nbsp;It is not possible to convert a service provisioned using the ISO to be provisioned from the pkg repository, however.</p><p>The -a option allows selection of a specific variant architecture; legal values at this writing are i386 or sparc. &nbsp;If not specified, the variant corresponding to the server's architecture is installed.</p><p>The -n option specifies the service name to be used. &nbsp;It is optional, and if not specified a service name will be generated automatically. &nbsp;To improve the quality of generated names (see bug 6812), the image/autoinstall package published will include a metadata tag defining a default name that can be consumed by installadm to generate an appropriate name for the service; this tag name is proposed as "org.opensolaris.autoinstall.svc_name". &nbsp;Typical values might be names such as "os-dev-131" for OpenSolaris development builds, "opensolaris2010.03" for OpenSolaris release builds. &nbsp;Generated names will append the architecture of the service in order to allow all architectures to be automatically named and served from a single server.</p><p>The &lt;targetdir&gt; is configured as a pkg(5) user image, and the package installed to it. &nbsp;A separate user image is used in order to meet the requirement to support multiple architectures and releases, and to account for the requirement that the server's release level be allowed to evolve independently of the AI services exported from it. &nbsp;If &lt;targetdir&gt; is not specified, the default system path /export/auto_install/&lt;svcname&gt; is used, though the command will prompt to confirm the operation; the prompt may be suppressed by supplying the -y option.</p><p>An alternative design that was considered was to publish the ISO file itself as the package contents, and to have the AI service mount that image using lofi(7D). &nbsp;However, this alternative is not compatible with the requirement (noted in bug 10797) to serve the images from a non-global zone, as lofi is not usable within a non-global zone (see CR 6354954).</p><p>A related change that will be made is to remove the -f option to "installadm create-service", as there are insufficient use cases to support its presence in the interface with the reorganization of the data proposed in this design.</p><p>Internally, the provisioning design will include changes to simplify the implementation:</p><p>- For both SPARC and x86 services, the service image will be mounted using lofs(7FS) at the path /etc/netboot/&lt;service-name&gt;. &nbsp;In the case of SPARC services, the associated wanboot.conf file will be found in the root of the service image. &nbsp;The lofs mounts will not be placed in /etc/vfstab, but will be performed as necessary by the install/server service based on the state of the services. &nbsp;This change requires modifying the tftp/udp6 SMF service to invoke in.tftpd rooted at /etc/netboot. &nbsp;If needed for compatibility purposes, /tftpboot can be created as a symlink to /etc/netboot.</p><p>(An alternate design possibility is to force a service directory to always be a separate ZFS dataset, and manipulate the mountpoint properties; however, we'd need to automatically create ZFS datasets as part of the provisioning; there doesn't seem to be a compelling reason to do this.)</p><p>- For x86 services, the pxegrub 2nd-stage loader will be referenced from the service image, rather than being copied into the /tftpboot (now /etc/netboot) directory; this requires modification to the DHCP configuration. &nbsp;Similarly, we will no longer generate the menu in the /tftpboot directory, but rather in the service image. &nbsp;Further, we propose to extend pxegrub's automatic search for the menu file (see CR 6816519 for details on how this works) to search within the path provided for pxegrub itself in the BootFile DHCP option; specifically, pxegrub will traverse up to the base directory path specified for pxegrub itself. &nbsp;For example, if the path to pxegrub is specified as /foo/boot/grub/pxegrub then pxegrub will search for its menu at /foo/boot/grub/menu.lst, /foo/boot/menu.lst and /foo/menu.lst in turn. &nbsp;This change allows us to dispense with setting the GrubMenu site option in the DHCP configuration (users can still define and use this option to override any of the automatic search behavior in pxegrub, however). &nbsp;Together, these changes address a number of existing issues in the implementation, including bugs 11537, 11064, 11052 and 11008. &nbsp;They also allow the removal of the -f option to installadm create-service; its use case was primarily around helping users to manage the contents of /tftpboot, which is accomplished more directly by this design.</p><p>- For both SPARC and x86 services, the symlinks currently used to link the images into the HTTP server's document hierarchy will be eliminated. &nbsp;The Apache configuration generated by installadm will instead reference /etc/netboot as the document root.&nbsp;</p><p>- The property group names used in SMF for recording each service's configuration will no longer be based on the service name, which is instead (and already) recorded as a property of the service; see bug 13061. &nbsp;Property group names will be generated to be unique for the SMF service, but are otherwise not meaningful; they are an implementation detail and classified as a Project Private interface in the ARC taxonomy.</p><p>- The install.conf file that's currently created for SPARC services will be removed from the implementation. &nbsp;It is currently downloaded separately during boot and used to communicate to the client the name of the AI service it should contact to locate its manifest. &nbsp;The wanboot infrastructure already provides a system configuration file (system.conf) for this purpose that is automatically returned, if configured in wanboot.conf, as part of the wanbootfs payload. &nbsp;The items passed in install.conf will be relocated to system.conf and the wanboot.conf that is generated will include the path to the system.conf file.</p><p>XXX To be investigated is whether we can use system.conf for x86 as well and eliminate the extensive use of boot arguments in the menu.lst file. &nbsp;Alok notes that this would help with restartability of automated installation as well.</p><p>The generated DHCP configuration will be changed substantially in comparison to the existing implementation:&nbsp;</p><p>- The DHCP configuration will be modified to remove the current implementation's manipulation of the per-network DHCP address assignment tables to assign clients to services. &nbsp;The basic idea here is to take advantage of two characteristics of the DHCP protocol specification:</p><ol><li>The DHCP Client Class Identifier option, which is sent by all conforming DHCP implementations, including the SPARC OBP implementation and x86 PXE firmware, is used to identify clients by instruction-set architecture. &nbsp;This allows simple configuration of default AI services for each architecture and eliminates clients obtaining an incorrect architecture, a problem described in bug 6948.</li><li>The client's Client Identifier, which is typically synthesized based on the MAC address of the network interface used for booting, allowing unique identification of the client.&nbsp;&nbsp;</li></ol><p>The Solaris DHCP server provides auto-matching of the Client Class and Client Identifier against the names of any configured macros, returning to clients any options defined in the macros that match the Client Class and Client Identifier. &nbsp;ISC DHCP and other DHCP servers can be configured to provide similar capabilities. &nbsp;It also provides a simple inclusion-by-reference directive that allows construction of simple chains of macros. &nbsp;By leveraging these capabilities, we are able to provide straightforward configuration of default behavior per-architecture, while allowing for client-specific overrides, without need for manipulation of the per-network address assignment tables.</p><p>- The DHCP macro names generated for each AI service will use a prefix of "AI_" rather than the "dhcp_macro_" prefix that is currently prepended.</p><p>- The DHCP macros generated for SPARC services will no longer contain the unnecessary BootSrvA option (bug 9768).</p><p>In order to limit the need for manipulation of the DHCP configuration to support client-specific installations in environments where updates to DHCP configuration are inconvenient, we propose that:</p><p>- When x86 services are configured, the install/server service will automatically assemble a global GRUB menu incorporating the entries from all configured services. &nbsp;The default item selected in the global menu will be the "default-i386" service (see the "Update" section, below). &nbsp;The global menu will be associated with an "any-i386" service that is reserved for this purpose and is automatically created when the first x86 AI service is created. &nbsp;This configuration allows the user to configure all clients to use the any-i386 service in DHCP and then select interactively which specific service will be used. &nbsp;If this capability is not desired the user can merely delete the any-i386 service using "installadm delete-service". &nbsp;As there are implementation limitations on the size of the menu that pxegrub can load, a SMF property (global_menu) is created on each service, with its value set to "true". &nbsp;If a service should be excluded from the any-i386 menu, the administrator can set this property to "false" using the "installadm set" command, which was included in the original AI design but has not yet been implemented; this project implements that command. &nbsp;This property may be present on SPARC services, but has no effect since there is no analogous SPARC service to any-i386 (see following paragraph).</p><p>XXX Consider generalizing the global_menu concept into an aggregating capability that allows a service to be created as an aggregate service (which doesn't have its own image). &nbsp;Change the global_menu property to aggregate_menu and make it a list of aggregate service names.</p><p>- SPARC systems are capable of network booting without the assistance of DHCP using the OBP's wanboot capability. In this case, the user supplies the IP address and associated minimal network configuration, as well as the URL from which the boot program will be downloaded. &nbsp;This URL is the wanboot CGI program (wanboot-cgi), which walks the /etc/netboot hierarchy to locate the appropriate configuration based on the IP network of the client and its client ID. &nbsp;At present, wanboot-cgi requires that a client-specific configuration must be associated with a specific IP network; we propose to enhance wanboot-cgi to allow for client-specific configuration to be associated only with the client ID, without a containing network. &nbsp;Providing an interactive selection such as that described above for x86 is beyond the scope of this project, but may be a useful enhancement to the wanboot loader. &nbsp;In its absence, this project does not propose to create an "any-sparc" service analogous to the "any-i386" service described in the previous section.</p><p>- In order to configure an individual client to use a specific service, installadm create-client will appropriately link client-specific configuration files (wanboot.conf for SPARC, menu.lst for i386) to the files for the specified service, and will not update the DHCP configuration, even if DHCP is being managed locally on the installation server. &nbsp;See the examples at the end of this document. &nbsp;However, as noted above, the administrator can also use appropriate client macros on the DHCP server to assign clients to services.</p><p>As an aside, a future provisioning enhancement that seems attractive is to support the provisioning of a combined pkg depot + AI boot server from the repo-on-DVD images produced beginning with OpenSolaris 2009.06.</p><h2 id="HUpdate"><span>Update</span></h2><p>Once an AI server has been deployed, the administrative focus shifts to maintaining services, defining the service that is the default for the environment as services are added and removed, and configuring specific clients to access services other than the default.</p><p>The typical usage model in Solaris engineering is to maintain installation servers that serve the most recent bi-weekly build of Solaris as the default, as this is what developers are most likely to require in configuring new systems. &nbsp;Older builds retained for varying lengths of time; the retention policies for older builds are usually focused on living within the server's available disk space. &nbsp;To install the older builds, users must perform some administrative action on the server to select the desired non-default build for installation.</p><p>Specialized environments such as those managed by a given consolidation for testing of daily builds, or developers of the installation software, might generate new boot images one or more times per day, and may not wish to retain older versions. &nbsp;Typical customer environments seem to change somewhat less frequently, with new releases deployed monthly, quarterly, semi-annually, or even less frequently; typically they will deploy a new service for testing to a small set of systems, and then transition to it as the default once it is validated for service in that role.&nbsp;&nbsp;</p><p>Regardless of the update frequency, typical usages for updating installation boot images include:</p><ol><li>Add a new service, retaining existing services, and leave the existing default unchanged</li><li>Add a new service, retaining existing services, and make the new service the default</li><li>Replace the image associated with an existing service, leaving the default for the environment unchanged</li></ol><p>An underlying requirement to the above usages is to be able to rename an existing service, an operation that is not yet supported. &nbsp;An additional requirement is to be able to run any of the update scenarios automatically at a scheduled time; for this purpose, use of cron(1) by an appropriately privileged user is asserted to be sufficient.</p><p>We propose new subcommands to installadm to support the above usages:</p><p><tt>installadm update-service [-s &lt;srcimage&gt;] &nbsp;&lt;svcname&gt;</tt></p><p>The service to be updated must be named. &nbsp;Additionally, as noted in the Provisioning section, update-service will not act on a service image provisioned from an ISO image. &nbsp;If -s is specified, the srcimage must be a package specification in the form of a pkg FMRI or URI to a .p5i package info file.</p><p><tt>installadm alias-service &lt;basesvcname&gt; &lt;aliassvcname&gt;</tt></p><p>An aliased service is implemented by the SMF property service_alias, which references the name of the real service underlying the aliased service.</p><p>In support of the update use cases described above, the first service of each architecture that is created on a server will be automatically aliased to the default-&lt;architecture&gt; name, i.e. default-sparc, default-i386. &nbsp;Where DHCP configuration is performed by installadm, DHCP macros are generated for aliased services; these merely include by reference the macro for the base service. &nbsp;The default-&lt;architecture&gt; service names are only a convention and are neither required nor reserved; should they not be desired, they can be deleted.</p><p>In addition, we find that it will be useful to include service rename support in installadm, as:</p><p><tt>installadm rename-service &lt;svcname&gt; &lt;newsvcname&gt;</tt></p><p>Any clients assigned, or services aliased, to the existing service name will be updated to use the new service name.</p><p>To satisfy each of the above use cases, the resulting command invocations would be:</p><ol><li>Add a new service named os-dev-131-sparc, retaining existing services, and leave the existing default unchanged:<br/><tt>installadm create-service -n os-dev-131-sparc /export/ai/os-dev-131-sparc</tt></li><li>Add a new service named os-dev-131-sparc, retaining existing services, and make the new service the default:<br/><tt>installadm create-service -n os-dev-131-sparc /export/ai/os-dev-131-sparc</tt><br/><tt>installadm alias-service os-dev-131-sparc default-sparc</tt></li><li>Replace the image associated with an existing service os-dev-sparc, leaving the default for the environment unchanged:<br/><tt>installadm update-service os-dev-sparc</tt></li></ol><p>One issue that is not addressed in updating of services is the effect on existing, published manifests for that service, as an updated service is potentially incompatible with the existing manifests. &nbsp;Manifest versioning is being examined as part of manifest design efforts and once that direction has been established the service management design will be updated if warranted.</p><h2 id="HRemoval"><span>Removal</span></h2><p>The command for removal of an AI service is modified to be:</p><p><tt>installadm delete-service [-r] &lt;svcname&gt;</tt></p><p>The existing -x option is removed, and its behavior (delete the pkg image used to instantiate the service) is made the default.</p><p>If the service to be removed is currently aliased by another service, the delete-service will fail, noting the services that are aliased to it so that the user can either delete or re-alias them to another service. &nbsp;This has to be handled somewhat carefully when manipulating the DHCP configuration, as removal of a macro that is included by another macro (as in the case of the default-sparc service, see example below) creates an invalid DHCP configuration that will cause poor DHCP server behavior.</p><p>Removal must also attempt to determine whether any clients are specifically configured to use the service; if so, the delete-service will fail and note the clients that are configured to use it.</p><p>The -r option is provided to allow the user to request automatic removal of any dependent alias services and clients.</p><h2 id="HExamples"><span>Examples</span></h2><h3 id="HExample1"><span>Example 1</span></h3><p>The provisioning of an AI service named os-dev-131-i386 on the server at 172.0.0.1 might be performed by the following command:</p><p><tt>installadm create-service -n os-dev-131-i386 -a i386 -i 172.0.0.10 -c 10 /export/ai/os-dev-131-i386</tt></p><p>We assume that this is the first AI service on the system. &nbsp;This would result in the following operations (details of configuring the criteria server are omitted below); the actual sequence of operations may vary somewhat from the sequence shown here.</p><ol><li>Create /export/ai/os-dev-131-i386 as a pkg(5) user image</li><li>Install the image/autoinstall package into /export/ai/os-dev-131-i386</li><li>Generate the Apache configuration at /var/installadm/ai-webserver/ai-httpd.conf, with document root at /etc/netboot.</li><li>Generate the pxegrub menu at /export/ai/os-dev-131-i386/menu.lst, with contents:<br/><tt>default=0<br/>timeout=30<br/>min_mem64=1536<br/>title os-dev-131-i386<br/>&nbsp;kernel$ /os-dev-131-i386/platform/i86pc/kernel/$ISADIR/unix -B install_media=<span class="wikiexternallink"><a class="wikimodel-freestanding" href="http://172.0.0.1:5555/os-dev-131-i386"><span class="wikigeneratedlinkcontent">http://172.0.0.1:5555/os-dev-131-i386</span></a></span>,install_service=os-dev-131-i386,install_svc_address=172.0.0.1:46501,livemode=text<br/>&nbsp;module /os-dev-131-i386/platform/i86pc/$ISADIR/boot_archive<br/></tt></li><li>Create the SMF application property group AI_1 on the install/server:default instance with properties:<br/><tt>service_name os-dev-131-i386<br/>image_path /export/ai/os-dev-131-i386<br/>txt_record aiwebserver=&lt;hostname&gt;:46501<br/>status on<br/>global_menu true<br/></tt></li><li>Create the SMF application property group AI_2 on the install/server:default instance with properties:<br/><tt>service_name default-i386<br/>service_alias os-dev-131-i386<br/>status on<br/>global_menu true<br/></tt></li><li>Create the SMF application property group AI_3 on the install/server:default instance with properties:<br/><tt>service_name any-i386<br/>boot_file pxegrub.any-i386<br/>boot_menu menu.lst.any-i386<br/></tt></li><li>Enable the install/server service, which performs any required mounts, including mounting via lofs of /export/ai/os-dev-131-i386 as /etc/netboot/os-dev-131-i386 and /etc/netboot/default-i386. &nbsp;This also generates the menu.lst.any-i386 and copies the default-i386/boot/grub/pxegrub to pxegrub.any-i386. &nbsp;Since this is the first service, the generated GRUB menu will be identical to the os-dev-131-i386 GRUB menu. &nbsp;It also starts the webserver instance to serve images and the criteria server.</li><li>Create a DHCP service (if necessary) and provision IP addresses 172.0.0.10 - 172.0.0.19.</li><li>Create the DHCP macro AI_os-dev-131-i386:<br/><tt>AI_os-dev-131-i386 :BootSrvA=172.0.0.1:BootFile="os-dev-131-i386/boot/grub/pxegrub":</tt></li><li>Create the DHCP macro AI_default-i386:<br/><tt>AI_default-i386 &nbsp;:BootSrvA=172.0.0.1:BootFile="default-i386/boot/grub/pxegrub":</tt></li><li>Create the DHCP macro for the any-i386 service:<br/><tt>AI_any-i386 :BootSrvA=172.0.0.1:BootFile="pxegrub.any-i386":</tt></li><li>Create the PXE client class macro pointing at the default-i386 service:<br/><tt>PXEClient:Arch:00000:UNDI:002001 :Include=AI_default-i386:</tt></li></ol><p>At this point, the service is operational and a client booted via PXE will boot and install from the default-i386 service. &nbsp;If the administrator decides to make the any-i386 service the default used by the environment, dhtadm or DHCP Manager can be used to change the Include reference on the PXE macro to the AI_any-i386 service.</p><h3 id="HExample2"><span>Example 2</span></h3><p>Provisioning a corresponding SPARC service to that shown in example 1 (assumes example 1 has already been done, so some global setup steps are omitted):</p><p><tt>installadm create-service -n os-dev-131-sparc -a sparc /export/ai/os-dev-131-sparc</tt></p><p>The resulting operations are below.</p><ol><li>Create /export/ai/os-dev-131-sparc as a pkg(5) user image</li><li>Install the image/autoinstall package into /export/ai/os-dev-131-sparc</li><li>Generate the wanboot.conf file for this service at /export/ai/os-dev-131-sparc/wanboot.conf:<br/><tt>root_server=<span class="wikiexternallink"><a class="wikimodel-freestanding" href="http://172.0.0.1:5555/cgi-bin/wanboot-cgi"><span class="wikigeneratedlinkcontent">http://172.0.0.1:5555/cgi-bin/wanboot-cgi</span></a></span><br/>root_file=/os-dev-131-sparc/boot/platform/sun4v/boot_archive<br/>boot_file=/os-dev-131-sparc/platform/sun4v/wanboot<br/>encryption_type=<br/>signature_type=<br/>server_authentication=no<br/>client_authentication=no<br/></tt></li><li>Create the SMF application property group AI_4 on the install/server:default instance with properties:<br/><tt>service_name os-dev-131-sparc<br/>image_path /export/ai/os-dev-131-sparc<br/>txt_record aiwebserver=&lt;hostname&gt;:46502<br/>status on<br/>global_menu false<br/></tt></li><li>Create the SMF application property group AI_2 on the install/server:default instance with properties:<br/><tt>service_name default-sparc<br/>service_alias os-dev-131-sparc<br/>status on<br/>global_menu false<br/></tt></li><li>Refresh the install/server service to mount via lofs /export/ai/os-dev-131-sparc as /etc/netboot/os-dev-131-sparc and /etc/netboot/default-sparc.</li><li>Create /etc/netboot/wanboot.conf as a symbolic link to /etc/netboot/default-sparc/wanboot.conf.</li><li>Create the DHCP macro AI_os-dev-131-sparc:<br/><tt>AI_os-dev-131-sparc :BootFile="<span class="wikiexternallink"><a class="wikimodel-freestanding" href="http://172.0.0.1:5555/cgi-bin/wanboot-cgi"><span class="wikigeneratedlinkcontent">http://172.0.0.1:5555/cgi-bin/wanboot-cgi</span></a></span>":<br/></tt></li><li>Create the DHCP macro AI_default-sparc<br/><tt>AI_default-sparc :BootFile="<span class="wikiexternallink"><a class="wikimodel-freestanding" href="http://172.0.0.1:5555/cgi-bin/wanboot-cgi"><span class="wikigeneratedlinkcontent">http://172.0.0.1:5555/cgi-bin/wanboot-cgi</span></a></span>":<br/></tt></li><li>Create the client class macros for all known SPARC client classes, e.g.:<br/><tt>SUNW.Sun-Fire-T100 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:Include=AI_default-sparc:<br/>SUNW.Sun-Fire-T1000 &nbsp;&nbsp;&nbsp;&nbsp;:Include=AI_default-sparc:<br/>SUNW.Sun-Fire-V215 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:Include=AI_default-sparc:<br/>SUNW.T5140 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:Include=AI_default-sparc:<br/>SUNW.T5240 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:Include=AI_default-sparc:<br/>SUNW.A70 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:Include=AI_default-sparc:<br/>SUNW.Sun-Fire-280R &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:Include=AI_default-sparc:<br/>SUNW.SPARC-Enterprise-T5120 &nbsp;&nbsp;&nbsp;&nbsp;:Include=AI_default-sparc:<br/>SUNW.SPARC-Enterprise-T5220 &nbsp;&nbsp;&nbsp;&nbsp;:Include=AI_default-sparc:<br/>SUNW.Sun-Fire-V890 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:Include=AI_default-sparc:<br/>SUNW.Sun-Fire-T200 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:Include=AI_default-sparc:<br/>...<br/></tt><br/>At this point, the service is operational and a client booted via "boot net:dhcp - install" will boot and install from the default-sparc service.</li></ol><h3 id="HExample3"><span>Example 3</span></h3><p>Deploying a Solaris engineering-style rolling default service with automatic naming is accomplished by initially configuring the service with:</p><p><tt>installadm create-service -a i386 -y</tt></p><p>This creates an x86 service based on the default name under the base directory /export/auto_install, with the default-i386 service aliased to it; an alternate base directory can be specified as an additional argument on the command line. &nbsp;Example 1 describes the processing that occurs.</p><p>The service can be automatically updated by:</p><p><tt>installadm update-service default-i386</tt></p><p>This operation checks whether an update is available for the default-i386 service. &nbsp;If an update is available, the fact that it is an aliased service causes update-service to internally convert to a create-service using the default name provided for the update, then re-alias the default-i386 service to the new service after the create-service has successfully completed. &nbsp;This command can be placed in a cron(1M) job to run at convenient times.</p><h3 id="HExample4"><span>Example 4</span></h3><p>Configuring an x86 client with MAC address 0:14:4f:4a:99:1a to install using a specific service requires the command:</p><p><tt>installadm create-client -e 0:14:4f:4a:99:1a -n os-dev-131-i386</tt></p><p>The resulting operations are:</p><ol><li>Create /etc/netboot/menu.lst.0100144F4A991A as a symbolic link to /etc/netboot/os-dev-131-i386/menu.lst</li></ol><p>A critical assumption here is that the boot loader referenced by the default PXE client class macro is compatible with the service. &nbsp;At GRUB 2 transition this may require some additional work to detect incompatibilities and behave correctly.</p><h3 id="HExample5"><span>Example 5</span></h3><p>Configuring a SPARC client with MAC address 8:0:20:a:b:c to install using a specific service is done by issuing the command:</p><p><tt>installadm create-client -e 8:0:20:a:b:c -n os-dev-131-sparc</tt></p><p>The resulting operations are:</p><ol><li>Create /etc/netboot/010800200A0B0C as a symlink to /etc/netboot/os-dev-131-sparc</li></ol><h2 id="HReferences"><span>References</span></h2><p>Base design documents for Automated Installation can be found at the <span class="wikilink"><a href="/bin/view/Project+caiman/AI_Documentation">documentation page</a></span></p><p>An updated <span class="wikiexternallink"><a href="https://markebrooks.github.io/bin/download/Project+caiman/AI+Image+Management/installadm.1m.txt">installadm(1m)</a></span> man page and <span class="wikiexternallink"><a href="https://markebrooks.github.io/bin/download/Project+caiman/AI+Image+Management/installadm.1m.diff.txt">diffs</a></span> against the existing man page as of this document's writing are available.</p>
</div>


    <div class="clearfloats"></div>
  </div>      <div id="xdocFooter">
  
                

       <div class="doc-tags" id="xdocTags">
        Tags:
        </div>
  
  <div id="xdocAuthors">
    <div class="xdocCreation">       Created by Dave Miner on 2009/12/15 23:09<br/>
          </div>
    <div class="xdocLastModification">       Last modified by Dave Miner on 2010/04/14 01:20
    </div>
  </div>
</div>
<div id="xwikidata" class="layoutsubsection">
        </div>  
    </div>      </div><div id="leftPanels" class="panels left">
                  <div class="panel expanded OSNav">
<h1 class="xwikipaneltitle" onclick="XWiki.togglePanelVisibility(this.parentNode, 'XWiki.XWikiGuest_Panels.OSNav');">Collectives</h1>
<div class="xwikipanelcontents">
<div id="xwikinavcontainer">
<span class="wikilink"><a href="/bin/view/Main/communities">Community Groups</a></span><br/>
<span class="wikilink"><a href="/bin/view/Main/projects">Projects</a></span><br/>
<span class="wikilink"><a href="/bin/view/Main/usergroups">User Groups</a></span>
</div><p/>
<script type="text/javascript">
document.observe('xwiki:dom:loaded', function() {
var obj = {div:'xwikinav',no:$count,height:250};
var acc = createAccordion(obj);
});
</script>
</div>
</div>
                        <div class="panel expanded OSDocs">
<h1 class="xwikipaneltitle" onclick="XWiki.togglePanelVisibility(this.parentNode, 'XWiki.XWikiGuest_Panels.OSDocs');">Project caiman Pages</h1>
<div class="xwikipanelcontents">
<ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Automated_Installer_Wipe_Disk_and_custom_layout_functionality">Automated Installer Wipe Disk and custom layout functionality</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/CUD">Caiman Architecture</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/CUE_docs">Caiman Unified Engine Documentation</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Meeting_notes">Meetings</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/CVERS">Caiman Version Compatibility</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/CVERS%2DFUNC">Install Versioning functional spec</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Meet5%2D20">Meeting Notes for 5/20/09</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Meet5%2D28">Meetings Notes from 5/28 and 5/29</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Meet6%2D10">Meeting notes for 6/10/2009</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/NOTES">Meeting notes 5/14/2009</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/mor%2Dnotes">Thoughts and Ideas</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/proposal">Draft Proposal Notes</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Constructor">Distribution Constructor Project</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/DC+Changes+for+CUD_TI">Project caiman.DC Changes for CUD_TI</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/DC+Changes+for+Language+Facets">Project caiman.DC Changes for Language Facets</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/DC+to+CUD+Migration">DC to CUD Migration</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/DC_docs">Distribution Constructor Documentation</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/design_notes">Design Notes</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/weekly_meetings">Distribution Constructor Meetings</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/DataObjectCache">OpenSolaris Installer &#45; Data Object Cache</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Developers">Developer Information</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Driver_Update">Driver Update</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/dduGUIspec">DDU GUI Specification</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Dwarf">Dwarf Caiman Project</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Agendas">Dwarf Project Team Meetings</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Dwarf_Demo">Dwarf Caiman Demo Page</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Extended_Partition_Support">Extended Partition Support</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/EP_Design_Notes">EP Design Notes</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/EP_Reqts_Scope">Extended Partition Support Requirements and Scope</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/SM_design_notes">Slice Modification Design Notes</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+Days">Flag Days</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/AI+Image+Management+Changes">AI Image Management Changes</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/AI+support+for+Zones">AI support for Zones</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/AI+support+for+timezone+configuration">AI support for timezone configuration</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/AI_Manifest_Changes">Flag Day: AI Manifest Changes</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/DC+Changes+for+Boot+Menu">DC Changes for Boot Menu</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/DCfor169">Project caiman.DCfor169</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Derived_Manifests_1">Derived_Manifests_1</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Driver_Update_Heads_Up">Driver Update Heads Up</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+Day+for+DC+for+AI+image+build+167">Flag Day for DC for AI image build 167</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+Day+for+Distro+constructor">Flag Day for DC in build 164</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+Day+for+bug+15372">Flag Day for bug 15372</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+Day+for+bug+15723">Flag Day for bug 15723</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+Day+for+bug+15784">Flag Day for bug 15784</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+Day+for+bug+4322">Flag Day for bug 4322</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+Day+for+bug+6984618">Flag Day for bug 6984618</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+Day+for+bug+6998550">Flag Day for bug 6998550</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+Day+for+bug+7012389">Flag Day for bug 7012389</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+Day+for+bugs+15678%2D4585">Flag Day for bugs 15678&#45;4585</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+Day+for+bugs+7850%2C10781">Flag Day for bugs 7850,10781</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+day+16740">Flag day 16740</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+day+bug+10039">FLAG DAY: Bootable AI project/defect 10039</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+day+bug+10687">FLAG DAY: Build Machine Maintainers &#45;  additional package required to build slim_source</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+day+bug+13042">Flag Day/Heads Up for bug 13043</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+day+bug+8140">Flag day bug 8140</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+day+bug+8347%2D6092">Flag day bug 8347&#45;6092</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+day+for+AI+manifest+missing+slice+size">Flag day for AI manifest missing slice size</a></span></li>
<li><a class="wikicreatelink" href="/bin/edit/Project+caiman/+CDDL+stripping+on+binary+product+objects?parent=Project+caiman.AI+Image+Management"><span class="wikicreatelinktext">Flag day: CDDL stripping on binary product objects</span><span class="wikicreatelinkqm">?</span></a></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Heads+Up+for+CBE+change">Project caiman.Heads Up for CBE change</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Heads+Up+for+bug+14082">Heads Up for bug 14082</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Heads+Up+for+bug+8205">Heads Up for bug 8205</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Heads+up+for+bug+10039">Heads up: AI from media (aka Bootable AI)</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Heads+up+for+bug+13393">Heads up for bug 13393</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Heads+upFlag+day+for+bugs+5451%2C7057%2C7058">Heads up/Flag day for bugs 5451,7057,7058</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Install+Media+Root+Password">Install Media Root Password</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Name+Services">Project caiman.Name Services</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Pre%2DFlag+Day+for+bug+16423">Flag Day for bug 16423</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/SC+Profiles+for+AI">Project Caiman SC Profiles for AI</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/SCIv1">Heads up: SCIv1</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Text+Installer+via+AI">Text Installer via AI</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/create+service+from+pkg">Project caiman.create service from pkg</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/flag+day+bug+11827">Flag day bug 11827</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/heads_up_Derived_Manifests_script_freedom">Project caiman.Derived_Manifests_script_freedom</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/heads_up_create_manifest">Project caiman.heads_up_create_manifest</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/minilander+install+changes">Project caiman.minilander install changes</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/system_config_renamed">smf service configuring user and root account renamed in 171</a></span></li>
</ul></li>
<li><a class="wikicreatelink" rel="_tags removed from AI manifest" href="/bin/edit/Project+caiman/Heads%2Dup+%3Cadd_drivers?parent=Project+caiman.AI+Image+Management"><span class="wikicreatelinktext">Project caiman: Heads&#45;up: add_drivers tags removed from AI manifest</span><span class="wikicreatelinkqm">?</span></a></li>
<li><a class="wikicreatelink" href="/bin/edit/Project+caiman/+AI+usage+of+prompt+bootarg+needs+a+revisit?parent=Project+caiman.AI+Image+Management"><span class="wikicreatelinktext">Heads&#45;up: AI usage of prompt bootarg needs a revisit</span><span class="wikicreatelinkqm">?</span></a></li>
<li><a class="wikicreatelink" href="/bin/edit/Project+caiman/+DTD+Versioning+in+install+XML+manifests?parent=Project+caiman.AI+Image+Management"><span class="wikicreatelinktext">Heads&#45;up: DTD Versioning in install XML manifests</span><span class="wikicreatelinkqm">?</span></a></li>
<li><a class="wikicreatelink" href="/bin/edit/Project+caiman/+Separate%2Dvar%2Ddataset%2Dfor%2Dinitial%2Dglobal%2Dzone%2Dinstalls%2Din%2Dbuild%2D174?parent=Project+caiman.AI+Image+Management"><span class="wikicreatelinktext">Heads&#45;up: Separate var dataset for initial global zone installs in build 174</span><span class="wikicreatelinkqm">?</span></a></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Logging">OpenSolaris Install Logging</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/OpenSolarisInstaller+%2D+ManifestParser+and+ManifestWriter">OpenSolarisInstaller &#45; ManifestParser and ManifestWriter</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/SPARC">Caiman on SPARC</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/SPARC_Minutes">SPARC meeting minutes</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Separate+var+dataset+for+initial+Zones+install">Separate var dataset for initial Zones install</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Slim_Install">Slim Install Project</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Meeting_page">Slim Install Meetings</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/issues">Issues Tracked for Oct 2007</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/project_documents">Slim Install Documentation</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/slim_annoucememts">Slim Install Announcements</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/uiroadmap">Slim UI Roadmap</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/uispec">UI Specification</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Snap_Upgrade">Snap Upgrade Project</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Meetings">Meetings</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Snap_Upgrade_Test">Snap Upgrade Test</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/snap%2Ddocuments">Snap Upgrade Documentation</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/System+Configuration+Project">System Configuration Project</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/SMF_SC_for_AI">SMF based SysConfig manifest</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/TextInstallerProject">Text Based Installer Project</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Prototype">Text Installer Prototype</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Text+Install+b131+Notes">Text Install b131 Notes</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Text+Install+b134+Notes">Text Install b134 Notes</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Text_Install_Prog_Language">Text Installer Programming Language</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Text_Install_Reqts_Scope">Text Installer Requirements and Scope</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/UI+Code+Review">UI Functionality and Code Review TODO List</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/UI_Specification">Text Installer UI Specification and UI Mockup Screenshots</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/UML_Diagrams">Text Installer UML Diagrams</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/integration_tests">integration_tests</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/UEFI+support">UEFI and Grub2 support</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/VMC">Virtual Machine Constructor</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/XML_Parsing">XML Parsing</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/auto_install">Automated Installation Project</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/AI+Image+Management">AI Image Management</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/AI_Documentation">Automated Installation Documentation</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/AI_Reqs_Final">Ai Requirements, June 2008</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/AI_Testing">Automated Installation Testing</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/AI_mtg">Automated Installer Team Meeting</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/DerivedManifests">Derived Manifests</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/WebServerProblemStatement">Web Server Design Problem Statement</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/WebserverUseCases">WebServer Design Use Cases</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/ai_design">Design Notes</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/ai_prototype">Automated Installer Prototype</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/auto_requirements">Automated Installer Requirements&#45;Initial</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/files">Files</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/iSCSI+Boot">iSCSI Boot</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/test_info_summary">Test Information Summary</a></span></li>
</ul>
                              </div>
</div>
      </div>

  </div>
<div class="clearfloats"></div>
  </div></div><div id="footerglobal" class="layoutsection">
<div class="minwidth"></div>
<hr/>
        <div id="xwikiplatformversion">XWiki Enterprise 2.7.1.34853 - <a onclick="openURL('http://enterprise.xwiki.org/xwiki/bin/view/Main/Documentation', '_blank'); return false;" href="http://www.xwiki.org/xwiki/bin/view/Main/Documentation">Documentation</a></div>
<br/>
  
      <div id="footer">
    <p>
                <a href="https://markebrooks.github.io/bin/view/Main/tou/">Terms of Use</a>
                |
                <a href="http://www.oracle.com/html/privacy.html">Privacy</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/trademark/">Trademarks</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/copyrights/">Copyright Policy</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/site_guidelines/">Site Guidelines</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/site-map/">Site Map</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/help/">Help</a>
                <br/>Your use of this web site or any of its content or software indicates your agreement to be bound by these Terms of Use.<br/>
                &copy; 2013, Oracle Corporation and/or its affiliates.<br/><img src="https://markebrooks.github.io:443/static/images/logo_oracle_footer.gif" alt="Oracle Logo"/>
            </p>
        </div>

  
</div>

</div></div></body>
</html>
