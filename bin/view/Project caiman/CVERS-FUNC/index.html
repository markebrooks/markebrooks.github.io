<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
                    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
                                    <title>Install Versioning functional spec (Project caiman.CVERS-FUNC) - XWiki</title>
                <meta http-equiv="Content-Script-Type" content="text/javascript" />
                        <meta http-equiv="imagetoolbar" content="no"/>
                      <link rel="alternate" type="application/x-wiki" title="Edit" href="/bin/edit/Project+caiman/CVERS%2DFUNC" />
                    <link rel="canonical" href="/bin/view/Project+caiman/CVERS%2DFUNC" />
                            <meta name="document" content="Project caiman.CVERS-FUNC"/>
    <meta name="wiki" content="xwiki"/>
    <meta name="space" content="Project caiman"/>
    <meta name="page" content="CVERS-FUNC"/>
    <meta name="version" content="1.1"/>
    <meta name="restURL" content="/rest/wikis/xwiki/spaces/Project+caiman/pages/CVERS-FUNC"/>
                <meta name="gwt:property" content="locale=en" />
                <meta name="revisit-after" content="7 days" />
<meta name="description" content="Install Versioning functional spec" />
<meta name="keywords" content="wiki " />
<meta name="distribution" content="GLOBAL" />
<meta name="rating" content="General" />
<meta name="author" content="Administrator" />
<meta http-equiv="reply-to" content="" />
<meta name="language" content="en" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="alternate" type="application/rss+xml" title="Wiki Feed RSS" href="/bin/view/Main/WebRss?xpage=rdf" />
<link rel="alternate" type="application/rss+xml" title="Blog RSS Feed" href="/bin/view/Blog/GlobalBlogRss?xpage=plain" />
<link rel="shortcut icon" href="/resources/icons/oso/icon.png">
                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
<link href="https://markebrooks.github.io/static/css/stylesheet.css" rel="stylesheet" type="text/css" media="all" />
<link href="/bin/skin/skins/colibri/style.css?colorTheme=ColorThemes.Oso" rel="stylesheet" type="text/css" media="all" />
<link href="/bin/skin/skins/colibri/print.css" rel="stylesheet" type="text/css" media="print" />
        <!--[if IE]>
  <link href="/bin/skin/skins/colibri/ie%2Dall.css" rel="stylesheet" type="text/css" />
<![endif]-->
<!--[if IE 6]>
  <link href="/bin/skin/skins/colibri/ie%2D6.css" rel="stylesheet" type="text/css" />
<![endif]-->
<link rel='stylesheet' type='text/css' href='/bin/ssx/AnnotationCode/Settings?language=en'/><link rel='stylesheet' type='text/css' href='/bin/ssx/AnnotationCode/Style?language=en'/><link rel='stylesheet' type='text/css' href='/bin/ssx/XWiki/SharePage?language=en'/>
<link rel='stylesheet' type='text/css' href='/bin/skin/resources/js/xwiki/widgets/modalPopup.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/js/xwiki/widgets/jumpToPage.css?language=en'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/uicomponents/widgets/confirmationBox.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/uicomponents/widgets/notification.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/skins/colibri/resources/uicomponents/viewers/tags.css'/>

    
    <link href="/bin/skin/resources/js/xwiki/suggest/ajaxSuggest.css" rel="stylesheet" type="text/css" />
<link href="/bin/skin/resources/js/xwiki/lightbox/lightbox.css" rel="stylesheet" type="text/css" />
<!--[if IE]>
  <link href="/bin/skin/resources/js/xwiki/lightbox/lightboxIE.css" rel="stylesheet" type="text/css" />
<![endif]-->












<script type="text/javascript" src="/resources/js/prototype/prototype.js"></script>
<script type="text/javascript" src="/bin/skin/resources/js/xwiki/xwiki.js"></script>
<script type="text/javascript">
// <![CDATA[
XWiki.webapppath = "";
XWiki.servletpath = "bin/";
XWiki.contextPath = "";
XWiki.mainWiki = "xwiki";
XWiki.currentWiki = "xwiki";
XWiki.currentSpace = "Project caiman";
XWiki.currentPage = "CVERS-FUNC";
XWiki.editor = "";
XWiki.viewer = "";
XWiki.contextaction = "view";
XWiki.docisnew = false;
XWiki.docsyntax = "xwiki/2.0";
XWiki.blacklistedSpaces = [ "Import","Panels","Scheduler","Stats","XAppClasses","XAppSheets","XAppTemplates","XWiki","WatchCode","WatchSheets","XApp","WatchAdmin","Watch","ColorThemes","AnnotationCode" ];
XWiki.hasEdit = false;
XWiki.hasProgramming = false;
XWiki.hasBackupPackImportRights = false;
window.docviewurl = "/bin/view/Project+caiman/CVERS%2DFUNC";
window.docediturl = "/bin/edit/Project+caiman/CVERS%2DFUNC";
window.docsaveurl = "/bin/save/Project+caiman/CVERS%2DFUNC";
window.docgeturl = "/bin/get/Project+caiman/CVERS%2DFUNC";
// ]]>
</script>
<script type='text/javascript' src='/bin/skin/resources/js/scriptaculous/effects.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/js/xwiki/widgets/modalPopup.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/js/xwiki/widgets/jumpToPage.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/confirmationBox.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/confirmedAjaxRequest.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/notification.js' defer='defer'></script>
<script type='text/javascript' src='/resources/uicomponents/widgets/list/xlist.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/xwiki/suggest/ajaxSuggest.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/skins/colibri/resources/uicomponents/viewers/tags.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/scriptaculous/scriptaculous.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/xwiki/accordion/accordion.js' defer='defer'></script>

<script type='text/javascript' src='/bin/jsx/XWiki/WebDAV?language=en' defer='defer'></script>
<script type='text/javascript' src='/bin/jsx/AnnotationCode/Settings?language=en' defer='defer'></script>
<script type='text/javascript' src='/bin/jsx/AnnotationCode/Script?language=en' defer='defer'></script>

<script type="text/javascript" src="/resources/js/xwiki/compatibility.js" defer="defer"></script>

  </head>
  <body id="body" class="wiki-xwiki space-Project_caiman viewbody hideright">
<div id="xwikimaincontainer">
<div id="xwikimaincontainerinner">

  <div id="menuview">
    <div id="mainmenu" class="layoutsubsection actionmenu">
<strong id="xwikimenutitle" class="hidden">General Actions:</strong>
<div class="rightmenu">
      <div id="tmLogin" class="tmLogin topmenuentry ">
   <a class="tme" href="https://auth.opensolaris.org/login.action?targetUrl=http%3A%2F%2Fmarkebrooks.github.io%2Fbin%2Fview%2FProject%2Bcaiman%2FCVERS%252DFUNC"><strong>Log-in</strong></a>
  </div>
  </div>
<div class="leftmenu">
  <div id="tmWiki" class="tmWiki topmenuentry hasIcon">
   <a class="tme" href="/bin/view/Main/"><strong>Wiki</strong></a>
  </div>
  <div id="tmSpace" class="tmSpace topmenuentry dropdownmenuentry  hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme" href="/bin/view/Project+caiman/"><strong>Project caiman</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
                <span class="submenuitem "><a href="/bin/view/Main/SpaceIndex?space=Project+caiman" id="tmSpaceDocumentIndex" class="tmSpaceDocumentIndex">Document Index</a></span>
    </span></div>

<div id="tmSubSites" class="tmSubSites topmenuentry dropdownmenuentry dropdownnolink hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>Subsites</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
<span class="submenuitem hasIcon"><a href="https://cr.opensolaris.org/" id="tmCR" class="tmCR">Code Reviews</a></span>
<span class="submenuitem hasIcon"><a href="http://repo.opensolaris.org/" id="tmRepo" class="tmRepo">SCM Management</a></span>
<span class="submenuitem hasIcon"><a href="http://pkg.opensolaris.org/" id="tmPkg" class="tmPkg">Package Search</a></span>
<span class="submenuitem hasIcon"><a href="http://bugs.opensolaris.org/" id="tmBugs" class="tmBugs">Bugster</a></span>
<span class="submenuitem hasIcon"><a href="http://defect.opensolaris.org/" id="tmDefect" class="tmDefect">Bugzilla</a></span>
<span class="submenuitem hasIcon"><a href="http://test.opensolaris.org/" id="tmTest" class="tmTest">Test Machines</a></span>
<span class="submenuitem hasIcon"><a href="http://planet.opensolaris.org/" id="tmPlanet" class="tmPlanet">Planet</a></span>
<span class="submenuitem hasIcon"><a href="http://mail.opensolaris.org/" id="tmMail" class="tmMail">Mailing Lists</a></span>
<span class="submenuitem hasIcon"><a href="http://poll.opensolaris.org/" id="tmPoll" class="tmPoll">Elections &amp; Polls</a></span>
<span class="submenuitem hasIcon"><a href="http://arc.opensolaris.org/" id="tmArc" class="tmArc">ARC Case Logs</a></span>
<span class="submenuitem hasIcon"><a href="http://jucr.opensolaris.org/" id="tmJucr" class="tmJucr">Source Juicer</a></span>
<span class="submenuitem hasIcon"><a href="http://pkgfactory.opensolaris.org/" id="tmPkgfactory" class="tmPkgfactory">Package Factory</a></span>
<span class="submenuitem hasIcon"><a href="http://auth.opensolaris.org/" id="tmAuth" class="tmAuth">Auth</a></span>
</span></div>

</div>
</div>

  </div>
 <div id="header" class="layoutsection">
<div class="minwidthb"></div>

  <div id="header">
    <div id="header_banner">
	<table style="width: 100%;">
	    <tr>
		<td style="width: 1%;">
		    <a href="https://markebrooks.github.io/bin/view/Main/"><div id="logo"></div></a>  
		</td>
		<td id="logo-text" style="width: 1%;">
		    Solaris
		</td>         
		<td style="width: 98%;">
		    <table id="loading-indicator">
			<tr>
			    <td><img src="https://markebrooks.github.io:443/static/images/busy.gif"
				    alt="Loading" title="Loading"/></td>
			    <td>Loading...</td>
			</tr>
		    </table>
		</td>
		<td style="width: 1%;">
		    <table id="iconbar">
			<tr>
			<td><a id="collectives-icon" href="https://markebrooks.github.io/bin/view/Main/collectives">
			    Collectives</a></td>
			<td><a id="discussions-icon" href="https://markebrooks.github.io/bin/view/Main/discussions">
				Discussions</a></td>
			<td><a id="documentation-icon" href="https://markebrooks.github.io/bin/view/Main/documentation">
				Documentation</a></td>
			<td><a id="download-icon" href="https://markebrooks.github.io/bin/view/Main/downloads">
				Download</a></td>
			<td><a id="source-browser-icon" href="http://src.opensolaris.org/source">
				Source Browser</a></td>
			</tr>
		    </table>
		</td>
	    </tr>
	</table>
    </div>
    <div id="site-notice">
	<span>
	    <a href="https://markebrooks.github.io/bin/view/Main/">ATTENTION: This website and all services within the opensolaris.org domain will be unavailable after March 24, 2013.</a>	   
	</span>
    </div>
</div>
 </div> 
  <div id="globallinks">
    <form action="/bin/view/Main/Search">
      <div class="globalsearch">
        <label class="hidden" for="headerglobalsearchinput">Search</label><input class="globalsearchinput withTip" id="headerglobalsearchinput" type="text" name="text" value="search..." size="15"/><input class="button" type="image" value="Go" alt="Go" src="/resources/icons/xwiki/search.png"/>
      </div>
    </form>
  </div> <div style="float:left;">

                

   <div id="hierarchy">
                              <a href='/bin/view/Project+caiman/CVERS'>Caiman Version Compatibility</a> <span class='separator'>&#187;</span> <span class='current'>Install Versioning functional spec</span>
                </div>

</div>
  <span class="glink" id="headerlanguages" style="float:right">
        <a href="/bin/view/Project+caiman/CVERS%2DFUNC?language=en" class="language-default language-current">en</a>
    </span>


<div class="contenthideright" id="contentcontainer">
<div id="contentcontainerinner">
<div class="leftsidecolumns">
  <div id="contentcolumn"> 
          <div class="main layoutsubsection">
      <div id="contentmenu" class="actionmenu">
    <strong id="xwikicontentmenutitle" class="hidden">Page Actions:</strong>
<div class="rightmenu">
</div>
<div class="leftmenu">
  <div id="tmExport" class="tmExport topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>Export</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="/bin/export/Project+caiman/CVERS%2DFUNC?format=pdf&amp;language=en" id="tmExportPdf" class="tmExportPdf">Export as PDF</a></span>
  <span class="submenuitem "><a href="/bin/export/Project+caiman/CVERS%2DFUNC?format=rtf&amp;language=en" id="tmExportRtf" class="tmExportRtf">Export as RTF</a></span>
  <span class="submenuitem "><a href="/bin/export/Project+caiman/CVERS%2DFUNC?format=html&amp;language=en" id="tmExportHtml" class="tmExportHtml">Export as HTML</a></span>
    </span></div>

<div id="tmShow" class="tmShow topmenuentry dropdownmenuentry  " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme" href="/bin/view/Project+caiman/CVERS%2DFUNC?viewer=code&amp;language=en"><strong>View</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
<span class="submenuitem "><a href="/bin/view/Project+caiman/CVERS%2DFUNC?viewer=comments&amp;language=en" id="tmViewComments" class="tmViewComments">Comments</a></span>
<span class="submenuitem "><a href="/bin/view/Project+caiman/CVERS%2DFUNC?viewer=attachments&amp;language=en" id="tmViewAttachments" class="tmViewAttachments">Attachments</a></span>
<span class="submenuitem "><a href="/bin/view/Project+caiman/CVERS%2DFUNC?viewer=history&amp;language=en" id="tmViewHistory" class="tmViewHistory">History</a></span>
<span class="submenuitem "><a href="/bin/view/Project+caiman/CVERS%2DFUNC?viewer=information&amp;language=en" id="tmViewInformation" class="tmViewInformation">Information</a></span>
<span class="submenuitem "><a href="/bin/view/Project+caiman/CVERS%2DFUNC?viewer=code&amp;language=en" id="tmViewSource" class="tmViewSource">View Source</a></span>
</span></div>

  <div id="tmMoreActions" class="tmMoreActions topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>More actions</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="/bin/view/Project+caiman/CVERS%2DFUNC?xpage=print&amp;language=en" id="tmPrintPreview" class="tmPrintPreview">Print preview</a></span>
          <span class="submenuitem "><a href="/bin/view/Project+caiman/CVERS%2DFUNC?xpage=copy" id="tmActionCopy" class="tmActionCopy">Copy</a></span>
      </span></div>
</div>

    </div>
    <div id="mainContentArea">
      








    
<div id="document-title"><h1>Install Versioning functional spec</h1></div>





              <div id="document-info">
    <div>
          </div>
    <div class="clearfloats"></div>
  </div>

<div id="xwikicontent">
<p>1 Problem statement<br/><tt class="wikimodel-verbatim">
    - Currently, when installing a client where the booted image doesn't match the OS bits being installed, the installation behavior will be unexpected and have undefined results.
        - Further, the user is given no information on why the installation may have failed because the failure is not handled gracefully or logged.
        - Additionally both the user and the installer application have no insight into where or why we failed.
        - It is also possible that the installation may succeed however the resultant installation status is undefined and we can not guarantee that it is correct.
</tt></p><p>2 Scope of Project<br/><tt class="wikimodel-verbatim">
    - The version checking project (includes all types of installs, AI, Live CD etc...):
        - Will be responsible for checking the version of the booted image and installer against the image being installed.
        - In the case where a version mismatch is found the user will be notified of the mismatch and the mismatch will be logged.
            - At this point a best effort will be made to complete the install however the user will be warned that the install may not be successful.
        - Will provide functionality to "opt out" of the attempt to install in the case of a version mismatch.
        - Will only track the release and build/branch numbers for determining the versions.
</tt></p><p>3 Other Documentation</p><p>Overall caiman project - <span class="wikilink"><a href="/bin/view/Project+caiman/"><span class="wikiexternallink"><a class="wikimodel-freestanding" href="http://opensolaris.org/os/project/caiman/"><span class="wikigeneratedlinkcontent">http://opensolaris.org/os/project/caiman/</span></a></span></a></span></p><p>Slim install - <span class="wikilink"><a href="/bin/view/Project+caiman/Slim_Install"><span class="wikiexternallink"><a class="wikimodel-freestanding" href="http://opensolaris.org/os/project/caiman/Slim_Install/"><span class="wikigeneratedlinkcontent">http://opensolaris.org/os/project/caiman/Slim_Install/</span></a></span></a></span></p><p>Automated installer - <span class="wikilink"><a href="/bin/view/Project+caiman/auto_install"><span class="wikiexternallink"><a class="wikimodel-freestanding" href="http://opensolaris.org/os/project/caiman/auto_install/"><span class="wikigeneratedlinkcontent">http://opensolaris.org/os/project/caiman/auto_install/</span></a></span></a></span></p><p>Versioning (this project) information, meeting notes etc. - <span class="wikilink"><a href="/bin/view/Project+caiman/CVERS"><span class="wikiexternallink"><a class="wikimodel-freestanding" href="http://opensolaris.org/os/project/caiman/CVERS/"><span class="wikigeneratedlinkcontent">http://opensolaris.org/os/project/caiman/CVERS/</span></a></span></a></span></p><p>4 Requirements<br/><tt class="wikimodel-verbatim">
    - The packages on the resulting image from installing a version of the OS should match (whenever possible) independent of the installer method which was used to do the installation.
    - When a mismatch is found it must be logged and the user informed. This should include enough information for the user to know how to resolve the issue if possible.
    - If a mismatch is found we should make a best effort to do the installation unless the user has specified that a mismatch should cause an install failure.
        - We will need to provide a method that the user can choose which allows the installer to just fail if a mismatch is found.
    - A mismatch of the architecture (SPARC vs x86/AMD64) will always cause the install to fail.
</tt></p><p>5 Requirements on other projects<br/><tt class="wikimodel-verbatim">
    - There is a requirement on the IPS system to provide the version string that will be used to identify the version. This string includes the release number (e.g. 5.11) the build number and a date stamp for that version. (this requirement has already been met by IPS and is stated here for completeness)
    - There is a requirement on ZFS and IPS to include a tag in the package information that lets us know the highest zpool version supported for the bits being installed.
    - There is a requirement on some of the ICT's that they are moved into the installed image so they can be run on first boot. This is part of the "System Configuration Parameters Setup" project.
    - It is expected that the boot image and the installer will always match as discussed in the [[proposal&gt;&gt;Project caiman.proposal]].
    - There is a requirement on replication and recovery that we be able to mount or in some other way access an image before installing it so that the versions of the packages the image contains can be checked.
</tt></p><p>6 Version definition<br/><tt class="wikimodel-verbatim">
    - The version of the bits is determined by information returned from IPS and what is part of the booted image. In both cases there is package information that can be checked to find this version. For example this is currently the version as listed by the FMRI of the packages on the currently booted image. The version string includes the release number (i.e. 5.11) and the build (or branch) number (i.e. 111) . Both of these must match for the versions to match.
        - For pkg-based installs all of the packages on the booted image (for example the list of packages returned by a call to pkg list) will be used to determine the overall version compatibility. We will check these package versions and on the first difference found return a mis-match.
        - For image based installs the image will need to be mounted or in some way made available so that the version numbers of the packages within it can be checked.
        - For archive (or cpio) based installs the versions can only be checked after the installation. Since this is a scenario that should never happen and is always an error it is at this point that the failure would be reported.
</tt></p><p>7 Supported configuration<br/><tt class="wikimodel-verbatim">
    - The only fully supported configuration for doing an install is when the versions of the booted image packages match the versions being installed. When a version mismatch is detected the user will be warned and an error/warning will be logged which indicates the version mismatch. The install will not fail at this point but an attempt to complete the install will be made. This will be the default behavior but a method will be provided to turn this off so that a version mismatch will cause the install to quit.
</tt></p><p>8 Components<br/><tt class="wikimodel-verbatim">
    - There is one main component for version checking but with two types of version checks. These checks are for release and build (or branch) number. These checks are separated so that they can be used in different ways going forward. Additionally this gives us the ability to provide more information on what doesn't match so that this can be given to the user as part of any warnings or error messages.
        - The release check determines if the version strings of the booted image and the bits being installed contain the the same release number. For example Solaris 10 vs Solaris next (5.10 vs 5.11).
        - The build number check determines if the version strings of the booted image and the bits being installed contain the the same build number. For example build 101b vs 111b.
            - At this point both types of check must match for the version check to verify a match.
    - Pool version discovery for attempting to install bits that are older than the booted image and possibly don't have support for the current zpool version.
        - We also need to check for the pool version of any existing pool and insure that the bits to be installed can support that pool version.
    - Grub version updater for use when attempting to install with a mismatch.
        - This will be something like what is done now in beadm activate where installgrub is run on the alternate root using the stage files from the alternate root.
    - Boot archive updater for use when attempting to install with a mismatch.
        - This will be something like a simple wrapper around bootadm update grub that updates the boot archive for the alternate root.
</tt></p><p>9 Deliverables<br/><tt class="wikimodel-verbatim">
    - Installer check for version (includes the checks for release number and build (or branch) number)
    - Error message generator which creates warning and error messages based on type of version check that fails (if it fails...)
    - The ability to turn off the "best effort install" so that the user can choose to have the install fail if a mismatch is found.
    - If installing newer bits than the installer is running on:
        - GRUB version updater to attempt running installgrub on newly installed bits, if needed.
        - Boot archive updater which will attempt to update the boot archive on newly installed bits.
    - If installing older bits than the installer is running on:
        - Pool version discovery. This will determine which pool version will be supported by the bits being installed and this information will be used when creating the root pool for that installation.
</tt></p><p>10 Use cases</p><pre>
    Note: The following terminology is used in these use cases.
** pkg-based-install: IPS repository based installation.
** archive install: installation of a collection of bits based on the current bits, eg: cpio archives as used in live CD installer.
** image install: installation of images built from functioning systems.
</pre><pre>
    - 1. The booted OS version matches the OS version being installed. 
        - Continue with installation (nothing to do).
    - 2. The booted version is used to install on the system using cpio or some other archiving functionality.
        - In this case the versions will always match and the install will continue.
    - 3. The architecture booted doesn't match the bits to be installed.
        - This always results in an error message that is sent to the user and logged and the install fails.
    - 4. The booted version is older than the version of the bits being installed.
        - If the install is an archive(cpio) the install should fail and report to the user and log that this is not supported. This should never actually happen since in this case the bits being installed are coping from the booted image. If this does happen then something outside the version checking has gone very wrong and we should not continue.
        - If the install is pkg-based then we will do a best effort to install the bits. However a warning message will be send to the use and logged stating that there was an unsupported mismatch and that the install may not be successful. In this case we will also make a best effort to get the correct grub version installed as well as the boot archive updated correctly.
        - If the install is image based then any configuration required will need to be done post installation. This may require that there is something available such as a transient SMF service that runs on first boot that performs the configuration required.
    - 5. The booted version is newer than the version of the bits being installed.
        - If the install is an archive(cpio) the install should fail and report to the user and log that this is not supported. This should never actually happen since in this case the bits being installed are coping from the booted image. If this does happen then something outside the version checking has gone very wrong and we should not continue.
        - If the install is pkg-based then we will do a best effort to install the bits. However a warning message will be send to the use and logged stating that there was an unsupported mismatch and that the install may not be successful. In this case we will attempt to determine the correct zpool version for the root pool and we will also make a best effort to get the correct grub version installed as well as the boot archive updated correctly.
        - If the install is image based then any configuration required will need to be done post installation. This may require that there is something available such as a transient SMF service that runs on first boot that performs the configuration required. It may also be required that we be able to obtaine the correct pool version and handle that the same as the pkg-based install.
    - 6. There is an existing root pool.
        - If the bits being installed can support this pool we continue without an error or additional warning message.
        - If the bits being installed can't support the existing pool's version then we send and error to the user, log the error and fail the install.

</pre>
</div>


    <div class="clearfloats"></div>
  </div>      <div id="xdocFooter">
  
                

       <div class="doc-tags" id="xdocTags">
        Tags:
        </div>
  
  <div id="xdocAuthors">
    <div class="xdocCreation">       Created by Administrator on 2009/10/26 12:12<br/>
          </div>
    <div class="xdocLastModification">       Last modified by Administrator on 2009/10/26 12:12
    </div>
  </div>
</div>
<div id="xwikidata" class="layoutsubsection">
        </div>  
    </div>      </div><div id="leftPanels" class="panels left">
                  <div class="panel expanded OSNav">
<h1 class="xwikipaneltitle" onclick="XWiki.togglePanelVisibility(this.parentNode, 'XWiki.XWikiGuest_Panels.OSNav');">Collectives</h1>
<div class="xwikipanelcontents">
<div id="xwikinavcontainer">
<span class="wikilink"><a href="/bin/view/Main/communities">Community Groups</a></span><br/>
<span class="wikilink"><a href="/bin/view/Main/projects">Projects</a></span><br/>
<span class="wikilink"><a href="/bin/view/Main/usergroups">User Groups</a></span>
</div><p/>
<script type="text/javascript">
document.observe('xwiki:dom:loaded', function() {
var obj = {div:'xwikinav',no:$count,height:250};
var acc = createAccordion(obj);
});
</script>
</div>
</div>
                        <div class="panel expanded OSDocs">
<h1 class="xwikipaneltitle" onclick="XWiki.togglePanelVisibility(this.parentNode, 'XWiki.XWikiGuest_Panels.OSDocs');">Project caiman Pages</h1>
<div class="xwikipanelcontents">
<ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Automated_Installer_Wipe_Disk_and_custom_layout_functionality">Automated Installer Wipe Disk and custom layout functionality</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/CUD">Caiman Architecture</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/CUE_docs">Caiman Unified Engine Documentation</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Meeting_notes">Meetings</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/CVERS">Caiman Version Compatibility</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/CVERS%2DFUNC">Install Versioning functional spec</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Meet5%2D20">Meeting Notes for 5/20/09</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Meet5%2D28">Meetings Notes from 5/28 and 5/29</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Meet6%2D10">Meeting notes for 6/10/2009</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/NOTES">Meeting notes 5/14/2009</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/mor%2Dnotes">Thoughts and Ideas</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/proposal">Draft Proposal Notes</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Constructor">Distribution Constructor Project</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/DC+Changes+for+CUD_TI">Project caiman.DC Changes for CUD_TI</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/DC+Changes+for+Language+Facets">Project caiman.DC Changes for Language Facets</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/DC+to+CUD+Migration">DC to CUD Migration</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/DC_docs">Distribution Constructor Documentation</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/design_notes">Design Notes</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/weekly_meetings">Distribution Constructor Meetings</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/DataObjectCache">OpenSolaris Installer &#45; Data Object Cache</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Developers">Developer Information</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Driver_Update">Driver Update</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/dduGUIspec">DDU GUI Specification</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Dwarf">Dwarf Caiman Project</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Agendas">Dwarf Project Team Meetings</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Dwarf_Demo">Dwarf Caiman Demo Page</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Extended_Partition_Support">Extended Partition Support</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/EP_Design_Notes">EP Design Notes</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/EP_Reqts_Scope">Extended Partition Support Requirements and Scope</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/SM_design_notes">Slice Modification Design Notes</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+Days">Flag Days</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/AI+Image+Management+Changes">AI Image Management Changes</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/AI+support+for+Zones">AI support for Zones</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/AI+support+for+timezone+configuration">AI support for timezone configuration</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/AI_Manifest_Changes">Flag Day: AI Manifest Changes</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/DC+Changes+for+Boot+Menu">DC Changes for Boot Menu</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/DCfor169">Project caiman.DCfor169</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Derived_Manifests_1">Derived_Manifests_1</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Driver_Update_Heads_Up">Driver Update Heads Up</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+Day+for+DC+for+AI+image+build+167">Flag Day for DC for AI image build 167</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+Day+for+Distro+constructor">Flag Day for DC in build 164</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+Day+for+bug+15372">Flag Day for bug 15372</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+Day+for+bug+15723">Flag Day for bug 15723</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+Day+for+bug+15784">Flag Day for bug 15784</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+Day+for+bug+4322">Flag Day for bug 4322</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+Day+for+bug+6984618">Flag Day for bug 6984618</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+Day+for+bug+6998550">Flag Day for bug 6998550</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+Day+for+bug+7012389">Flag Day for bug 7012389</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+Day+for+bugs+15678%2D4585">Flag Day for bugs 15678&#45;4585</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+Day+for+bugs+7850%2C10781">Flag Day for bugs 7850,10781</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+day+16740">Flag day 16740</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+day+bug+10039">FLAG DAY: Bootable AI project/defect 10039</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+day+bug+10687">FLAG DAY: Build Machine Maintainers &#45;  additional package required to build slim_source</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+day+bug+13042">Flag Day/Heads Up for bug 13043</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+day+bug+8140">Flag day bug 8140</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+day+bug+8347%2D6092">Flag day bug 8347&#45;6092</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Flag+day+for+AI+manifest+missing+slice+size">Flag day for AI manifest missing slice size</a></span></li>
<li><a class="wikicreatelink" href="/bin/edit/Project+caiman/+CDDL+stripping+on+binary+product+objects?parent=Project+caiman.CVERS%2DFUNC"><span class="wikicreatelinktext">Flag day: CDDL stripping on binary product objects</span><span class="wikicreatelinkqm">?</span></a></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Heads+Up+for+CBE+change">Project caiman.Heads Up for CBE change</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Heads+Up+for+bug+14082">Heads Up for bug 14082</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Heads+Up+for+bug+8205">Heads Up for bug 8205</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Heads+up+for+bug+10039">Heads up: AI from media (aka Bootable AI)</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Heads+up+for+bug+13393">Heads up for bug 13393</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Heads+upFlag+day+for+bugs+5451%2C7057%2C7058">Heads up/Flag day for bugs 5451,7057,7058</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Install+Media+Root+Password">Install Media Root Password</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Name+Services">Project caiman.Name Services</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Pre%2DFlag+Day+for+bug+16423">Flag Day for bug 16423</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/SC+Profiles+for+AI">Project Caiman SC Profiles for AI</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/SCIv1">Heads up: SCIv1</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Text+Installer+via+AI">Text Installer via AI</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/create+service+from+pkg">Project caiman.create service from pkg</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/flag+day+bug+11827">Flag day bug 11827</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/heads_up_Derived_Manifests_script_freedom">Project caiman.Derived_Manifests_script_freedom</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/heads_up_create_manifest">Project caiman.heads_up_create_manifest</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/minilander+install+changes">Project caiman.minilander install changes</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/system_config_renamed">smf service configuring user and root account renamed in 171</a></span></li>
</ul></li>
<li><a class="wikicreatelink" rel="_tags removed from AI manifest" href="/bin/edit/Project+caiman/Heads%2Dup+%3Cadd_drivers?parent=Project+caiman.CVERS%2DFUNC"><span class="wikicreatelinktext">Project caiman: Heads&#45;up: add_drivers tags removed from AI manifest</span><span class="wikicreatelinkqm">?</span></a></li>
<li><a class="wikicreatelink" href="/bin/edit/Project+caiman/+AI+usage+of+prompt+bootarg+needs+a+revisit?parent=Project+caiman.CVERS%2DFUNC"><span class="wikicreatelinktext">Heads&#45;up: AI usage of prompt bootarg needs a revisit</span><span class="wikicreatelinkqm">?</span></a></li>
<li><a class="wikicreatelink" href="/bin/edit/Project+caiman/+DTD+Versioning+in+install+XML+manifests?parent=Project+caiman.CVERS%2DFUNC"><span class="wikicreatelinktext">Heads&#45;up: DTD Versioning in install XML manifests</span><span class="wikicreatelinkqm">?</span></a></li>
<li><a class="wikicreatelink" href="/bin/edit/Project+caiman/+Separate%2Dvar%2Ddataset%2Dfor%2Dinitial%2Dglobal%2Dzone%2Dinstalls%2Din%2Dbuild%2D174?parent=Project+caiman.CVERS%2DFUNC"><span class="wikicreatelinktext">Heads&#45;up: Separate var dataset for initial global zone installs in build 174</span><span class="wikicreatelinkqm">?</span></a></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Logging">OpenSolaris Install Logging</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/OpenSolarisInstaller+%2D+ManifestParser+and+ManifestWriter">OpenSolarisInstaller &#45; ManifestParser and ManifestWriter</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/SPARC">Caiman on SPARC</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/SPARC_Minutes">SPARC meeting minutes</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Separate+var+dataset+for+initial+Zones+install">Separate var dataset for initial Zones install</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Slim_Install">Slim Install Project</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Meeting_page">Slim Install Meetings</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/issues">Issues Tracked for Oct 2007</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/project_documents">Slim Install Documentation</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/slim_annoucememts">Slim Install Announcements</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/uiroadmap">Slim UI Roadmap</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/uispec">UI Specification</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Snap_Upgrade">Snap Upgrade Project</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Meetings">Meetings</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Snap_Upgrade_Test">Snap Upgrade Test</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/snap%2Ddocuments">Snap Upgrade Documentation</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/System+Configuration+Project">System Configuration Project</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/SMF_SC_for_AI">SMF based SysConfig manifest</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/TextInstallerProject">Text Based Installer Project</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Prototype">Text Installer Prototype</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Text+Install+b131+Notes">Text Install b131 Notes</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Text+Install+b134+Notes">Text Install b134 Notes</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Text_Install_Prog_Language">Text Installer Programming Language</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/Text_Install_Reqts_Scope">Text Installer Requirements and Scope</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/UI+Code+Review">UI Functionality and Code Review TODO List</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/UI_Specification">Text Installer UI Specification and UI Mockup Screenshots</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/UML_Diagrams">Text Installer UML Diagrams</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/integration_tests">integration_tests</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/UEFI+support">UEFI and Grub2 support</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/VMC">Virtual Machine Constructor</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/XML_Parsing">XML Parsing</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/auto_install">Automated Installation Project</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+caiman/AI+Image+Management">AI Image Management</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/AI_Documentation">Automated Installation Documentation</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/AI_Reqs_Final">Ai Requirements, June 2008</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/AI_Testing">Automated Installation Testing</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/AI_mtg">Automated Installer Team Meeting</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/DerivedManifests">Derived Manifests</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/WebServerProblemStatement">Web Server Design Problem Statement</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/WebserverUseCases">WebServer Design Use Cases</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/ai_design">Design Notes</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/ai_prototype">Automated Installer Prototype</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/auto_requirements">Automated Installer Requirements&#45;Initial</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/files">Files</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/iSCSI+Boot">iSCSI Boot</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+caiman/test_info_summary">Test Information Summary</a></span></li>
</ul>
                              </div>
</div>
      </div>

  </div>
<div class="clearfloats"></div>
  </div></div><div id="footerglobal" class="layoutsection">
<div class="minwidth"></div>
<hr/>
        <div id="xwikiplatformversion">XWiki Enterprise 2.7.1.34853 - <a onclick="openURL('http://enterprise.xwiki.org/xwiki/bin/view/Main/Documentation', '_blank'); return false;" href="http://www.xwiki.org/xwiki/bin/view/Main/Documentation">Documentation</a></div>
<br/>
  
      <div id="footer">
    <p>
                <a href="https://markebrooks.github.io/bin/view/Main/tou/">Terms of Use</a>
                |
                <a href="http://www.oracle.com/html/privacy.html">Privacy</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/trademark/">Trademarks</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/copyrights/">Copyright Policy</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/site_guidelines/">Site Guidelines</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/site-map/">Site Map</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/help/">Help</a>
                <br/>Your use of this web site or any of its content or software indicates your agreement to be bound by these Terms of Use.<br/>
                &copy; 2013, Oracle Corporation and/or its affiliates.<br/><img src="https://markebrooks.github.io:443/static/images/logo_oracle_footer.gif" alt="Oracle Logo"/>
            </p>
        </div>

  
</div>

</div></div></body>
</html>
