<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
                    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
                                    <title>Source Tour (Community Group zfs.source) - XWiki</title>
                <meta http-equiv="Content-Script-Type" content="text/javascript" />
                        <meta http-equiv="imagetoolbar" content="no"/>
                      <link rel="alternate" type="application/x-wiki" title="Edit" href="/bin/edit/Community+Group+zfs/source" />
                    <link rel="canonical" href="/bin/view/Community+Group+zfs/source" />
                            <meta name="document" content="Community Group zfs.source"/>
    <meta name="wiki" content="xwiki"/>
    <meta name="space" content="Community Group zfs"/>
    <meta name="page" content="source"/>
    <meta name="version" content="3.1"/>
    <meta name="restURL" content="/rest/wikis/xwiki/spaces/Community+Group+zfs/pages/source"/>
                <meta name="gwt:property" content="locale=en" />
                <meta name="revisit-after" content="7 days" />
<meta name="description" content="Source Tour" />
<meta name="keywords" content="wiki " />
<meta name="distribution" content="GLOBAL" />
<meta name="rating" content="General" />
<meta name="author" content="admin" />
<meta http-equiv="reply-to" content="" />
<meta name="language" content="en" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="alternate" type="application/rss+xml" title="Wiki Feed RSS" href="/bin/view/Main/WebRss?xpage=rdf" />
<link rel="alternate" type="application/rss+xml" title="Blog RSS Feed" href="/bin/view/Blog/GlobalBlogRss?xpage=plain" />
<link rel="shortcut icon" href="/resources/icons/oso/icon.png">
                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
<link href="https://markebrooks.github.io/static/css/stylesheet.css" rel="stylesheet" type="text/css" media="all" />
<link href="/bin/skin/skins/colibri/style.css?colorTheme=ColorThemes.Oso" rel="stylesheet" type="text/css" media="all" />
<link href="/bin/skin/skins/colibri/print.css" rel="stylesheet" type="text/css" media="print" />
        <!--[if IE]>
  <link href="/bin/skin/skins/colibri/ie%2Dall.css" rel="stylesheet" type="text/css" />
<![endif]-->
<!--[if IE 6]>
  <link href="/bin/skin/skins/colibri/ie%2D6.css" rel="stylesheet" type="text/css" />
<![endif]-->
<link rel='stylesheet' type='text/css' href='/bin/ssx/AnnotationCode/Settings?language=en'/><link rel='stylesheet' type='text/css' href='/bin/ssx/AnnotationCode/Style?language=en'/><link rel='stylesheet' type='text/css' href='/bin/ssx/XWiki/SharePage?language=en'/>
<link rel='stylesheet' type='text/css' href='/bin/skin/resources/js/xwiki/widgets/modalPopup.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/js/xwiki/widgets/jumpToPage.css?language=en'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/uicomponents/widgets/confirmationBox.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/uicomponents/widgets/notification.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/skins/colibri/resources/uicomponents/viewers/tags.css'/>

    
    <link href="/bin/skin/resources/js/xwiki/suggest/ajaxSuggest.css" rel="stylesheet" type="text/css" />
<link href="/bin/skin/resources/js/xwiki/lightbox/lightbox.css" rel="stylesheet" type="text/css" />
<!--[if IE]>
  <link href="/bin/skin/resources/js/xwiki/lightbox/lightboxIE.css" rel="stylesheet" type="text/css" />
<![endif]-->












<script type="text/javascript" src="/resources/js/prototype/prototype.js"></script>
<script type="text/javascript" src="/bin/skin/resources/js/xwiki/xwiki.js"></script>
<script type="text/javascript">
// <![CDATA[
XWiki.webapppath = "";
XWiki.servletpath = "bin/";
XWiki.contextPath = "";
XWiki.mainWiki = "xwiki";
XWiki.currentWiki = "xwiki";
XWiki.currentSpace = "Community Group zfs";
XWiki.currentPage = "source";
XWiki.editor = "";
XWiki.viewer = "";
XWiki.contextaction = "view";
XWiki.docisnew = false;
XWiki.docsyntax = "xwiki/2.0";
XWiki.blacklistedSpaces = [ "Import","Panels","Scheduler","Stats","XAppClasses","XAppSheets","XAppTemplates","XWiki","WatchCode","WatchSheets","XApp","WatchAdmin","Watch","ColorThemes","AnnotationCode" ];
XWiki.hasEdit = false;
XWiki.hasProgramming = false;
XWiki.hasBackupPackImportRights = false;
window.docviewurl = "/bin/view/Community+Group+zfs/source";
window.docediturl = "/bin/edit/Community+Group+zfs/source";
window.docsaveurl = "/bin/save/Community+Group+zfs/source";
window.docgeturl = "/bin/get/Community+Group+zfs/source";
// ]]>
</script>
<script type='text/javascript' src='/bin/skin/resources/js/scriptaculous/effects.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/js/xwiki/widgets/modalPopup.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/js/xwiki/widgets/jumpToPage.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/confirmationBox.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/confirmedAjaxRequest.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/notification.js' defer='defer'></script>
<script type='text/javascript' src='/resources/uicomponents/widgets/list/xlist.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/xwiki/suggest/ajaxSuggest.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/skins/colibri/resources/uicomponents/viewers/tags.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/scriptaculous/scriptaculous.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/xwiki/accordion/accordion.js' defer='defer'></script>

<script type='text/javascript' src='/bin/jsx/XWiki/WebDAV?language=en' defer='defer'></script>
<script type='text/javascript' src='/bin/jsx/AnnotationCode/Settings?language=en' defer='defer'></script>
<script type='text/javascript' src='/bin/jsx/AnnotationCode/Script?language=en' defer='defer'></script>

<script type="text/javascript" src="/resources/js/xwiki/compatibility.js" defer="defer"></script>

  </head>
  <body id="body" class="wiki-xwiki space-Community_Group_zfs viewbody hideright">
<div id="xwikimaincontainer">
<div id="xwikimaincontainerinner">

  <div id="menuview">
    <div id="mainmenu" class="layoutsubsection actionmenu">
<strong id="xwikimenutitle" class="hidden">General Actions:</strong>
<div class="rightmenu">
      <div id="tmLogin" class="tmLogin topmenuentry ">
   <a class="tme" href="https://auth.opensolaris.org/login.action?targetUrl=http%3A%2F%2Fmarkebrooks.github.io%2Fbin%2Fview%2FCommunity%2BGroup%2Bzfs%2Fsource%3Flanguage%3Den"><strong>Log-in</strong></a>
  </div>
  </div>
<div class="leftmenu">
  <div id="tmWiki" class="tmWiki topmenuentry hasIcon">
   <a class="tme" href="/bin/view/Main/"><strong>Wiki</strong></a>
  </div>
  <div id="tmSpace" class="tmSpace topmenuentry dropdownmenuentry  hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme" href="/bin/view/Community+Group+zfs/"><strong>Community Group zfs</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
                <span class="submenuitem "><a href="/bin/view/Main/SpaceIndex?space=Community+Group+zfs" id="tmSpaceDocumentIndex" class="tmSpaceDocumentIndex">Document Index</a></span>
    </span></div>

<div id="tmSubSites" class="tmSubSites topmenuentry dropdownmenuentry dropdownnolink hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>Subsites</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
<span class="submenuitem hasIcon"><a href="https://cr.opensolaris.org/" id="tmCR" class="tmCR">Code Reviews</a></span>
<span class="submenuitem hasIcon"><a href="http://repo.opensolaris.org/" id="tmRepo" class="tmRepo">SCM Management</a></span>
<span class="submenuitem hasIcon"><a href="http://pkg.opensolaris.org/" id="tmPkg" class="tmPkg">Package Search</a></span>
<span class="submenuitem hasIcon"><a href="http://bugs.opensolaris.org/" id="tmBugs" class="tmBugs">Bugster</a></span>
<span class="submenuitem hasIcon"><a href="http://defect.opensolaris.org/" id="tmDefect" class="tmDefect">Bugzilla</a></span>
<span class="submenuitem hasIcon"><a href="http://test.opensolaris.org/" id="tmTest" class="tmTest">Test Machines</a></span>
<span class="submenuitem hasIcon"><a href="http://planet.opensolaris.org/" id="tmPlanet" class="tmPlanet">Planet</a></span>
<span class="submenuitem hasIcon"><a href="http://mail.opensolaris.org/" id="tmMail" class="tmMail">Mailing Lists</a></span>
<span class="submenuitem hasIcon"><a href="http://poll.opensolaris.org/" id="tmPoll" class="tmPoll">Elections &amp; Polls</a></span>
<span class="submenuitem hasIcon"><a href="http://arc.opensolaris.org/" id="tmArc" class="tmArc">ARC Case Logs</a></span>
<span class="submenuitem hasIcon"><a href="http://jucr.opensolaris.org/" id="tmJucr" class="tmJucr">Source Juicer</a></span>
<span class="submenuitem hasIcon"><a href="http://pkgfactory.opensolaris.org/" id="tmPkgfactory" class="tmPkgfactory">Package Factory</a></span>
<span class="submenuitem hasIcon"><a href="http://auth.opensolaris.org/" id="tmAuth" class="tmAuth">Auth</a></span>
</span></div>

</div>
</div>

  </div>
 <div id="header" class="layoutsection">
<div class="minwidthb"></div>

  <div id="header">
    <table style="width: 100%;">
        <tr>
            <td style="width: 1%;">
                 <a href="https://markebrooks.github.io/bin/view/Main/"><div id="logo"></div></a>  
            </td>
            <td id="logo-text" style="width: 1%;">
                Solaris
            </td>         
            <td style="width: 98%;">
                <table id="loading-indicator">
                    <tr>
                        <td><img src="https://markebrooks.github.io:443/static/images/busy.gif"
                                 alt="Loading" title="Loading"/></td>
                        <td>Loading...</td>
                    </tr>
                </table>
            </td>
            <td style="width: 1%;">
                <table id="iconbar">
                    <tr>
                    <td><a id="collectives-icon" href="https://markebrooks.github.io/bin/view/Main/collectives">
                        Collectives</a></td>
                    <td><a id="discussions-icon" href="https://markebrooks.github.io/bin/view/Main/discussions">
                            Discussions</a></td>
                    <td><a id="documentation-icon" href="https://markebrooks.github.io/bin/view/Main/documentation">
                            Documentation</a></td>
                    <td><a id="download-icon" href="https://markebrooks.github.io/bin/view/Main/downloads">
                            Download</a></td>
                    <td><a id="source-browser-icon" href="http://src.opensolaris.org/source">
                            Source Browser</a></td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>

 </div> 
  <div id="globallinks">
    <form action="/bin/view/Main/Search">
      <div class="globalsearch">
        <label class="hidden" for="headerglobalsearchinput">Search</label><input class="globalsearchinput withTip" id="headerglobalsearchinput" type="text" name="text" value="search..." size="15"/><input class="button" type="image" value="Go" alt="Go" src="/resources/icons/xwiki/search.png"/>
      </div>
    </form>
  </div> <div style="float:left;">

                

   <div id="hierarchy">
                  <span class='current'>Source Tour</span>
          </div>

</div>
  <span class="glink" id="headerlanguages" style="float:right">
        <a href="/bin/view/Community+Group+zfs/source?language=en" class="language-default language-current">en</a>
    </span>


<div class="contenthideright" id="contentcontainer">
<div id="contentcontainerinner">
<div class="leftsidecolumns">
  <div id="contentcolumn"> 
          <div class="main layoutsubsection">
      <div id="contentmenu" class="actionmenu">
    <strong id="xwikicontentmenutitle" class="hidden">Page Actions:</strong>
<div class="rightmenu">
</div>
<div class="leftmenu">
  <div id="tmExport" class="tmExport topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>Export</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="/bin/export/Community+Group+zfs/source?format=pdf&amp;language=en" id="tmExportPdf" class="tmExportPdf">Export as PDF</a></span>
  <span class="submenuitem "><a href="/bin/export/Community+Group+zfs/source?format=rtf&amp;language=en" id="tmExportRtf" class="tmExportRtf">Export as RTF</a></span>
  <span class="submenuitem "><a href="/bin/export/Community+Group+zfs/source?format=html&amp;language=en" id="tmExportHtml" class="tmExportHtml">Export as HTML</a></span>
    </span></div>

<div id="tmShow" class="tmShow topmenuentry dropdownmenuentry  " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme" href="/bin/view/Community+Group+zfs/source?viewer=code&amp;language=en"><strong>View</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
<span class="submenuitem "><a href="/bin/view/Community+Group+zfs/source?viewer=comments&amp;language=en" id="tmViewComments" class="tmViewComments">Comments</a></span>
<span class="submenuitem "><a href="/bin/view/Community+Group+zfs/source?viewer=attachments&amp;language=en" id="tmViewAttachments" class="tmViewAttachments">Attachments</a></span>
<span class="submenuitem "><a href="/bin/view/Community+Group+zfs/source?viewer=history&amp;language=en" id="tmViewHistory" class="tmViewHistory">History</a></span>
<span class="submenuitem "><a href="/bin/view/Community+Group+zfs/source?viewer=information&amp;language=en" id="tmViewInformation" class="tmViewInformation">Information</a></span>
<span class="submenuitem "><a href="/bin/view/Community+Group+zfs/source?viewer=code&amp;language=en" id="tmViewSource" class="tmViewSource">View Source</a></span>
</span></div>

  <div id="tmMoreActions" class="tmMoreActions topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>More actions</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="/bin/view/Community+Group+zfs/source?xpage=print&amp;language=en" id="tmPrintPreview" class="tmPrintPreview">Print preview</a></span>
          <span class="submenuitem "><a href="/bin/view/Community+Group+zfs/source?xpage=copy" id="tmActionCopy" class="tmActionCopy">Copy</a></span>
      </span></div>
</div>

    </div>
    <div id="mainContentArea">
      








    
<div id="document-title"><h1>Source Tour</h1></div>





              <div id="document-info">
    <div>
          </div>
    <div class="clearfloats"></div>
  </div>

<div id="xwikicontent">
<h2 id="HZFSSourceTour"><span>ZFS Source Tour</span></h2><p> <img src="https://markebrooks.github.io/bin/download/Community+Group+zfs/source/zfstour.png" alt="zfstour.png"/> <span class="wikiexternallink"><a href="https://markebrooks.github.io/bin/download/Community+Group+zfs/source/zfstour.odg">[ odg ]</a></span></p><p>This page is designed to take users through a brief overview of the source code associated with the ZFS filesystem. It is not intended as an introduction to ZFS – it is assumed that you already have some familiarity with common terms and definitions, as well as a general sense of filesystem architecture.</p><p>Traditionally, we describe ZFS as being made of up of three components: ZPL (ZFS POSIX Layer), DMU (Data Management Unit), and SPA (Storage Pool Allocator). While this serves as a useful example for slideware, the real story is a little more complex. The following image gives a more detailed overview; clicking on one of the areas will take you to a more detailed description and links to source code.</p><p>In this picture, you can still see the three basic layers, though there are quite a few more elements in each. In addition, we show zvol consumers, as well as the management path, namely zfs(1M) and zpool(1M). You'll find a brief description of all these subsystems below. This is not intended to be an exhaustive overview of exactly how everything works. In the end, the source code is the final documentation. We hope that it is easy to follow and well commented.If not, feel free to post to the <span class="wikiexternallink"><a href="http://www.opensolaris.org/jive/forum.jspa?forumID=80">ZFS discussion forum</a></span>.</p><h3 id="HFilesystemConsumers"><span>Filesystem Consumers</span></h3><p>These are your basic applications that interact with ZFS solely through the POSIX filesystem APIs. Virtually every application falls into this category. The system calls are passed through the generic OpenSolaris VFS layer to the ZPL.</p><h3 id="HDeviceConsumers"><span>Device Consumers</span></h3><p>ZFS provides a means to created 'emulated volumes'. These volumes are backed by storage from a storage pool, but appear as a normal device under <span class="box code"><span style="color: #666666; ">/</span>dev</span>. This is not a typical use case, but there are a small set of cases where this capability is useful. There are a small number of applications that interact directly with these devices, but the most common consumer is a kernel filesystem or target driver layered on top of the device.</p><h3 id="HManagementGUI"><span>Management GUI</span></h3><p>Solaris will ship with a web-based ZFS GUI in build 28. While not part of OpenSolaris (yet), it is an example of a Java-based GUI layered on top of the JNI.</p><h3 id="HManagementConsumers"><span>Management Consumers</span></h3><p>These applications are those which manipulate ZFS filesystem or Storage pools, including examining properties and dataset hierarchy. While there are some scattered exceptions (zoneadm, zoneadmd, fstyp), the two main applications are zpool(1M) and zfs(1M).</p><h4 id="Hzpool281M29"><span>zpool(1M)</span></h4><p>This command is responsible for creating and managing ZFS storage pools. Its primary purpose is to parse command line input and translate them into libzfs calls, handling any errors along the way. The source for this command can be found in <span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/cmd/zpool">usr/src/cmd/zpool</a></span>. It covers the following files:</p><table><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/cmd/zpool/zpool_main.c">zpool_main.c</a></span></td><td>The bulk of the command, responsible for processing all arguments and subcommands</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/cmd/zpool/zpool_vdev.c">zpool_vdev.c</a></span></td><td>Code responsible for converting a series of vdevs into an nvlist representation for libzfs</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/cmd/zpool/zpool_iter.c">zpool_iter.c</a></span></td><td>Code to iterate over some or all the pools in the system easily</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/cmd/zpool/zpool_util.c">zpool_util.c</a></span></td><td>Miscellaneous utility functions</td></tr></table><h4 id="Hzfs281M29"><span>zfs(1M)</span></h4><p>This command is responsible for creating and managing ZFS filesystems. Similar to zpool(1M), its purpose is really just to parse command line arguments and pass the handling off to libzfs. The source for this command can be found in <span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/cmd/zfs">usr/src/cmd/zfs</a></span>. It covers the following ilfes:</p><table><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/cmd/zfs/zfs_main.c">zfs_main.c</a></span></td><td>The bulk of the command, responsible for processing all arguments and subcommands</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/cmd/zfs/zfs_iter.c">zfs_iter.c</a></span></td><td>Code to iterate over some or all of the datasets in the system</td></tr></table><h3 id="HJNI"><span>JNI</span></h3><p>This library provides a Java interface to libzfs. It is currently a private interface, and is tailored specifically for the GUI. As such, it is geared primarily toward observability, as the GUI performs most actions through the CLI. The source for this library can be found in <span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/lib/libzfs_jni">usr/src/lib/libzfs_jni</a></span></p><h3 id="Hlibzfs"><span>libzfs</span></h3><p>This is the primary interface for management apps to interact with the ZFS kernel module. The library presents a unified, object-based mechanism for accessing and manipulating both storage pools and filesystems. The underlying mechanism used to communicate with the kernel is ioctl(2) calls through /dev/zfs. The source for this library can be found in <span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/lib/libzfs">usr/src/lib/libzfs</a></span>. It covers the following files:</p><table><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/lib/libzfs/common/libzfs_dataset.c">libzfs_dataset.c</a></span></td><td>Primary interfaces for manipulating datasets</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/lib/libzfs/common/libzfs_pool.c">libzfs_pool.c</a></span></td><td>Primary interfaces for manipulating pool</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/lib/libzfs/common/libzfs_changelist.c">libzfs_changelist.c</a></span></td><td>Utility routines for propagating property changes across children</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/lib/libzfs/common/libzfs_config.c">libzfs_config.c</a></span></td><td>Read and manipulate pool configuration information</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/lib/libzfs/common/libzfs_graph.c">libzfs_graph.c</a></span></td><td>Construct dependent lists for datasets</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/lib/libzfs/common/libzfs_import.c">libzfs_import.c</a></span></td><td>Discover and import pools</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/lib/libzfs/common/libzfs_mount.c">libzfs_mount.c</a></span></td><td>Mount, unmount, and share datasets.</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/lib/libzfs/common/libzfs_status.c">libzfs_status.c</a></span></td><td>Link to FMA knowledge articles based on pool state</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/lib/libzfs/common/libzfs_util.c">libzfs_util.c</a></span></td><td>Miscellaneous routines</td></tr></table><h3 id="HZPL28ZFSPOSIXLayer29"><span>ZPL (ZFS POSIX Layer)</span></h3><p>The ZPL is the primary interface for interacting with ZFS as a filesystem. It is a (relatively) thin layer that sits atop the DMU and presents a filesystem abstraction of files and directories. It is responsible for bridging the gap between the OpenSolaris VFS interfaces and the underlying DMU interfaces. It is also responsible for enforcing ACL (Access Control List) rules as well as synchronous (O_DSYNC) semantics.</p><table><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/zfs_vfsops.c">zfs_vfsops.c</a></span></td><td>OpenSolaris VFS interfaces</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/zfs_vnops.c">zfs_vnops.c</a></span></td><td>OpenSolaris vnode interfaces</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/zfs_znode.c">zfs_znode.c</a></span></td><td>Each vnode corresponds to an underlying znode</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/zfs_dir.c">zfs_dir.c</a></span></td><td>Directory operations</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/zfs_acl.c">zfs_acl.c</a></span></td><td>ACL implementation</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/zfs_ctldir.c">zfs_ctldir.c</a></span></td><td>Pseudo filesystem implementation .zfs/snapshot</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/zfs_log.c">zfs_log.c</a></span></td><td>ZPL interface to record intent log entries</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/zfs_replay.c">zfs_replay.c</a></span></td><td>ZPL interface to replay intent log entries</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/zfs_byteswap.c">zfs_byteswap.c</a></span></td><td>Byteswap routines for ZPL data structures</td></tr></table><h3 id="HZVOL28ZFSEmulatedVolume29"><span>ZVOL (ZFS Emulated Volume)</span></h3><p>ZFS includes the ability to present raw devices backed by space from a storage pool. These are known as 'zvols' within the source code, and is implemented by a single file in the ZFS source.</p><table><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/zvol.c">zvol.c</a></span></td><td>Volume emulation interface</td></tr></table><h3 id="H2Fdev2Fzfs"><span>/dev/zfs</span></h3><p>This device is the primary point of control for libzfs. While consumers could consume the ioctl(2) interface directly, it is closely entwined with libzfs, and not a public interface (not that libzfs is, either). It consists of a single file, which does some validation on the ioctl() parameters and then vectors the request to the appropriate place within ZFS.</p><table><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/zfs_ioctl.c">zfs_ioctl.c</a></span></td><td>/dev/zfs ioctl() interface</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/sys/fs/zfs.h">zfs.h</a></span></td><td>Interfaces shared between kernel and userland</td></tr></table><h3 id="HDMU28DataManagementUnit29"><span>DMU (Data Management Unit)</span></h3><p>The DMU is responsible for presenting a transactional object model, built atop the flat address space presented by the SPA. Consumers interact with the DMU via objsets, objects, and transactions. An objset is a collection of objects, where each object is an arbitrary piece of storage from the SPA. Each transaction is a series of operations that must be committed to disk as a group; it is central to the on-disk consistency for ZFS.</p><table><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/dmu.c">dmu.c</a></span></td><td>Primary external DMU interfaces</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/dmu_objset.c">dmu_objset.c</a></span></td><td>Objset open/close/manipulate external interfaces</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/dmu_object.c">dmu_object.c</a></span></td><td>Object allocate/free interfaces</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/txg.c">txg.c</a></span></td><td>Transaction model control threads</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/dmu_tx.c">dmu_tx.c</a></span></td><td>Transaction creation/manipulation interfaces</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/dnode.c">dnode.c</a></span></td><td>Open context object-level manipulation functions</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/dnode_sync.c">dnode_sync.c</a></span></td><td>Syncing context object-level manipulation functions</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/dbuf.c">dbuf.c</a></span></td><td>Buffer management functions</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/dmu_zfetch.c">dmu_zfetch.c</a></span></td><td>Data stream prefetch logic</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/refcount.c">refcount.c</a></span></td><td>Generic reference counting interfaces</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/dmu_send.c">dmu_send.c</a></span></td><td>Send and receive functions for snapshots</td></tr></table><h3 id="HDSL28DatasetandSnapshotLayer29"><span>DSL (Dataset and Snapshot Layer)</span></h3><p>The DSL aggregates DMU objsets into a hierarchical namespace, with inherited properties, as well as quota and reservation enforcement. It is also responsible for managing snapshots and clones of objsets.</p><p>For more information on how snapshots are implemented, see <span class="wikiexternallink"><a href="http://blogs.sun.com/roller/page/ahrens?entry=is_it_magic">Matt's blog entry</a></span>.</p><table><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/dsl_dir.c">dsl_dir.c</a></span></td><td>Namespace management functions</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/dsl_dataset.c">dsl_dataset.c</a></span></td><td>Snapshot/Rollback/Clone support interfaces</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/dsl_pool.c">dsl_pool.c</a></span></td><td>Pool-level support interfaces</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/dsl_prop.c">dsl_prop.c</a></span></td><td>Property manipulation functions</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/unique.c">unique.c</a></span></td><td>Support functions for unique objset IDs</td></tr></table><h3 id="HZAP28ZFSAttributeProcessor29"><span>ZAP (ZFS Attribute Processor)</span></h3><p>The ZAP is built atop the DMU, and uses scalable hash algorithms to create arbitrary (name, object) associations within an objset. It is most commonly used to implement directories within the ZPL, but is also used extensively throughout the DSL, as well as a method of storing pool-wide properties. There are two very different ZAP algorithms, designed for different type of directories. The "micro zap" is used when the number of entries is relatively small and each entry is reasonably short. The "fat zap" is used for larger directories, or those with extremely long names.</p><table><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/zap.c">zap.c</a></span></td><td>Fat ZAP interfaces</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/zap_leaf.c">zap_leaf.c</a></span></td><td>Low-level support functions</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/zap_micro.c">zap_micro.c</a></span></td><td>Micro ZAP interfaces</td></tr></table><h3 id="HZIL28ZFSIntentLog29"><span>ZIL (ZFS Intent Log)</span></h3><p>While ZFS provides always-consistent data on disk, it follows traditional filesystem semantics where the majority of data is not written to disk immediately; otherwise performance would be pathologically slow. But there are applications that require more stringent semantics where the data is guaranteed to be on disk by the time the read(2) or write(2) call returns. For those applications requiring this behavior (specified with O_DSYNC), the ZIL provides the necessary semantics using an efficient per-dataset transaction log that can be replayed in event of a crash.</p><p>For a more detailed look at the ZIL implementation, see Neil's <span class="wikiexternallink"><a href="http://blogs.sun.com/roller/page/perrin?entry=the_lumberjack">blog entry</a></span>.</p><table><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/zil.c">zil.c</a></span></td><td>Intent Log</td></tr></table><h3 id="HTraversal"><span>Traversal</span></h3><p>Traversal provides a safe, efficient, restartable method of walking all data within a live pool. It forms the basis of resilvering and scrubbing. It walks all metadata looking for blocks modified within a certain period of time. Thanks to the copy-on-write nature of ZFS, this has the benefit of quickly excluding large subtrees that have not been touched during an outage period. It is fundamentally a SPA facility, but has intimate knowledge of some DMU structures in order to handle snapshots, clones, and certain other characteristics of the on-disk format.</p><table><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/dmu_traverse.c">dmu_traverse.c</a></span></td><td>Traversal code</td></tr></table><h3 id="HARC28AdaptiveReplacementCache29"><span>ARC (Adaptive Replacement Cache)</span></h3><p>ZFS uses a modified version of an Adaptive Replacement Cache to provide its primary cacheing needs. This cache is layered between the DMU and the SPA and so acts at the virtual block-level. This allows filesystems to share their cached data with their snapshots and clones.</p><table><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/arc.c">arc.c</a></span></td><td>Adaptive Replacement Cache implementation</td></tr></table><h3 id="HPoolConfiguration28SPA29"><span>Pool Configuration (SPA)</span></h3><p>While the entire pool layer is often referred to as the SPA (Storage Pool Allocator), the configuration portion is really the public interface. It is responsible for gluing together the ZIO and vdev layers into a consistent pool object. It includes routines to create and destroy pools from their configuration information, as well as sync the data out to the vdevs on regular intervals.</p><table><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/spa.c">spa.c</a></span></td><td>Routines for opening, importing, exporting, and destroying pools</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/spa_misc.c">spa_misc.c</a></span></td><td>Miscellaneous SPA routines, including locking</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/spa_config.c">spa_config.c</a></span></td><td>Parse and update pool configuration data</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/spa_errlog.c">spa_errlog.c</a></span></td><td>Log of persistent pool-wide data errors.</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/spa_history.c">spa_history.c</a></span></td><td>Persistent ring buffer of successful commands that modified the pool's state.</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/zfs_fm.c">zfs_fm.c</a></span></td><td>Routines to post ereports for FMA consumption.</td></tr></table><h3 id="HZIO28ZFSI2FOPipeline29"><span>ZIO (ZFS I/O Pipeline)</span></h3><p>The ZIO pipeline is where all data must pass when going to or from the disk. It is responsible for translation DVAs (Device Virtual Addresses) into logical locations on a vdev, as well as checksumming and compressing data as necessary. It is implemented as a multi-stage pipeline, with a bit mask to control which stage gets executed for each I/O. The pipeline itself is quite complex, but can be summed up by the following digram:</p><table><tr><th scope="col">I/O types</th><th scope="col">ZIO state</th><th scope="col">Compression</th><th scope="col">Checksum</th><th scope="col">Gang Blocks&nbsp;</th><th scope="col">DVA management</th><th scope="col">Vdev I/O</th></tr><tr><td>RWFCI</td><td>open</td><td></td><td></td><td></td><td></td><td><br/></td></tr><tr><td>RWFCI</td><td>wait for<br/>children ready</td><td></td><td></td><td></td><td></td><td><br/></td></tr><tr><td>-W-<del></del></td><td></td><td>write compress</td><td></td><td></td><td></td><td><br/></td></tr><tr><td>-W-<del></del></td><td></td><td></td><td>checksum generate</td><td></td><td></td><td><br/></td></tr><tr><td>-WFC-</td><td></td><td></td><td></td><td>gang pipeline</td><td></td><td><br/></td></tr><tr><td>-WFC-</td><td></td><td></td><td></td><td>get gang header</td><td></td><td><br/></td></tr><tr><td>-W-<del></del></td><td></td><td></td><td></td><td>rewrite gang<br/>header</td><td></td><td><br/></td></tr><tr><td>--F--</td><td></td><td></td><td></td><td>free gang<br/>members</td><td></td><td><br/></td></tr><tr><td>-<del>C-</del></td><td></td><td></td><td></td><td>claim gang<br/>members</td><td></td><td><br/></td></tr><tr><td>-W-<del></del></td><td></td><td></td><td></td><td></td><td>DVA allocate</td><td><br/></td></tr><tr><td>--F--</td><td></td><td></td><td></td><td></td><td>DVA free</td><td><br/></td></tr><tr><td>-<del>C-</del></td><td></td><td></td><td></td><td></td><td>DVA claim</td><td><br/></td></tr><tr><td>-W-<del></del></td><td></td><td></td><td>gang checksum<br/>generate</td><td></td><td></td><td><br/></td></tr><tr><td>RWFCI</td><td>ready</td><td></td><td></td><td></td><td></td><td><br/></td></tr><tr><td>RW--I</td><td></td><td></td><td></td><td></td><td></td><td>I/O start</td></tr><tr><td>RW--I</td><td></td><td></td><td></td><td></td><td></td><td>I/O done</td></tr><tr><td>RW--I</td><td></td><td></td><td></td><td></td><td></td><td>I/O assess</td></tr><tr><td>RWFCI</td><td>wait for<br/>children done</td><td></td><td></td><td></td><td></td><td><br/></td></tr><tr><td>R-<del>-</del></td><td></td><td></td><td>checksum verify</td><td></td><td></td><td><br/></td></tr><tr><td>R-<del>-</del></td><td></td><td></td><td></td><td>read gang<br/>members</td><td></td><td><br/></td></tr><tr><td>R-<del>-</del></td><td></td><td>read decompress</td><td></td><td></td><td></td><td><br/></td></tr><tr><td>RWFCI</td><td>done</td><td></td><td></td><td></td><td></td><td></td></tr></table><dl><dt>I/O types</dt><dd>Each phase of the I/O pipeline applies to a certain type of I/O. The letters stand for (R)ead, (W)rite, (F)ree, (C)laim, and (I)octl.</dd><dt>ZIO state</dt><dd>These are internal states used to synchronize I/Os. For example, an I/O which child I/Os must wait for all children to be ready before allocating a BP, and must wait for all children to be done before returning.</dd><dt>Compression</dt><dd>This phase applies any compression algorithms, if applicable.</dd><dt>Checksum</dt><dd>This phase applies any checksum algorithms, if applicable.</dd><dt>Gang blocks</dt><dd>When there is not enough contiguous space to write a complete block, the ZIO pipeline will break the I/O up into smaller 'gang blocks' which can later be assembled transparently to appear as complete blocks.</dd><dt>DVA management</dt><dd>Each I/O must be allocated a DVA (Device Virtual Address) to correspon to a particular portion of a vdev in the pool. These phases perform the necessary allocation of these addresses, using metaslabs and the space map.</dd><dt>Vdev I/O</dt><dd>These phases are the once which actually issue I/O to the vdevs contained within the pool.</dd></dl><table><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/zio.c">zio.c</a></span></td><td>The main ZIO stages, including gang block translation</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/zio_checksum.c">zio_checksum.c</a></span></td><td>Generic checksum interface</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/fletcher.c">fletcher.c</a></span></td><td>Fletcher2 and fletcher4 checksum algorithms</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/sha256.c">sha256.c</a></span></td><td>SHA256 checksum algorithm</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/zio_compress.c">zio_compress.c</a></span></td><td>Generic compression interface</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/lzjb.c">lzjb.c</a></span></td><td>LZJB compression algorithm</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/uberblock.c">uberblock.c</a></span></td><td>Basic uberblock (root block) routines</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/bplist.c">bplist.c</a></span></td><td>Keeps track of lists of block pointers</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/metaslab.c">metaslab.c</a></span></td><td>The bulk of DVA translation</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/space_map.c">space_map.c</a></span></td><td>Keeps track of free space, used during DVA translation</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/zio_inject.c">szio_inject.c</a></span></td><td>Framework for injecting persistent errors for data and devices</td></tr></table><h3 id="HVDEV28VirtualDevices29"><span>VDEV (Virtual Devices)</span></h3><p>The virtual device subsystem provides a unified method of arranging and accessing devices. Virtual devices form a tree, with a single root vdev and multiple interior (mirror and RAID-Z) and leaf (disk and file) vdevs. Each vdev is responsible for representing the available space, as well as laying out blocks on the physical disk.</p><table><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/vdev.c">vdev.c</a></span></td><td>Generic vdev routines</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/vdev_disk.c">vdev_disk.c</a></span></td><td>Disk virtual device</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/vdev_file.c">vdev_file.c</a></span></td><td>File virtual device</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/vdev_mirror.c">vdev_mirror.c</a></span></td><td>N-Way mirrroring</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/vdev_raidz.c">vdev_raidz.c</a></span></td><td>RAID-Z grouping (see <span class="wikiexternallink"><a href="http://blogs.sun.com/roller/page/bonwick?entry=raid_z">Jeff's blog</a></span>).</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/vdev_root.c">vdev_root.c</a></span></td><td>Toplevel pseudo vdev</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/vdev_missing.c">vdev_missing.c</a></span></td><td>Special device for import</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/vdev_label.c">vdev_label.c</a></span></td><td>Routines for reading and writing identifying labels</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/vdev_cache.c">vdev_cache.c</a></span></td><td>Simple device-level caching for reads</td></tr><tr><td><span class="wikiexternallink"><a href="http://src.opensolaris.org/source/xref/onnv/onnv-gate/usr/src/uts/common/fs/zfs/vdev_queue.c">vdev_queue.c</a></span></td><td>I/O Scheduling algorithm for vdevs</td></tr></table><h3 id="HLDI28LayeredDriverInterface29"><span>LDI (Layered Driver Interface)</span></h3><p>At the bottom of the stack, ZFS interacts with the underlying physical devices through LDI, the Layered Driver Interface, as well as the VFS interfaces (when dealing with files).</p>
</div>


    <div class="clearfloats"></div>
  </div>      <div id="xdocFooter">
  
                

       <div class="doc-tags" id="xdocTags">
        Tags:
        </div>
  
  <div id="xdocAuthors">
    <div class="xdocCreation">       Created by admin on 2009/10/26 12:11<br/>
          </div>
    <div class="xdocLastModification">       Last modified by admin on 2009/10/26 12:32
    </div>
  </div>
</div>
<div id="xwikidata" class="layoutsubsection">
        </div>  
    </div>      </div><div id="leftPanels" class="panels left">
                  <div class="panel expanded OSNav">
<h1 class="xwikipaneltitle" onclick="XWiki.togglePanelVisibility(this.parentNode, 'XWiki.XWikiGuest_Panels.OSNav');">Collectives</h1>
<div class="xwikipanelcontents">
<div id="xwikinavcontainer">
<span class="wikilink"><a href="/bin/view/Main/communities">Community Groups</a></span><br/>
<span class="wikilink"><a href="/bin/view/Main/projects">Projects</a></span><br/>
<span class="wikilink"><a href="/bin/view/Main/usergroups">User Groups</a></span>
</div><p/>
<script type="text/javascript">
document.observe('xwiki:dom:loaded', function() {
var obj = {div:'xwikinav',no:$count,height:250};
var acc = createAccordion(obj);
});
</script>
</div>
</div>
                        <div class="panel expanded OSDocs">
<h1 class="xwikipaneltitle" onclick="XWiki.togglePanelVisibility(this.parentNode, 'XWiki.XWikiGuest_Panels.OSDocs');">Community Group zfs Pages</h1>
<div class="xwikipanelcontents">
<ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/boot">ZFS Boot</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/flash">ZFS Flash Support</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/zfsbootFAQ">ZFS Boot  Project FAQ</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/demos">Demos</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/basics">ZFS Basics Screencast</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/selfheal">ZFS Self Healing</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/docs">Documentation</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/faq">ZFS FAQ</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/dedup">ZFS Dedup FAQ</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/encrypt">ZFS Encryption FAQ</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/intro">Getting Started</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/links">Links</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/porting">Porting ZFS</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/source">Source Tour</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/structures">Data Structures</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/translations">Translations</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/french">French</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/japanese">Japanese</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/ptBR">Brazilian Portuguese</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/russian">Russian</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/simplifiedchinese">Simplified Chinese</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/spanish">Spanish</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/version">version</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/1">ZFS Pool Version 1</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/1%2D1">ZFS File System Version 1</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/10">ZFS Pool Version 10</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/11">ZFS Pool Version 11</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/12">ZFS Pool Version 12</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/13">ZFS Pool Version 13</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/14">ZFS Pool Version 14</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/15">ZFS Pool Version 15</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/16">ZFS Pool Version 16</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/17">ZFS Pool Version 17</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/18">ZFS Pool Version 18</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/19">ZFS Pool Version 19</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/2">ZFS Pool Version 2</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/2%2D1">ZFS File System Version 2</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/20">ZFS Pool Version 20</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/21">ZFS Pool Version 21</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/22">ZFS Pool Version 22</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/23">ZFS Pool Version 23</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/24">ZFS Pool Version 24</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/25">ZFS Pool Version 25</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/26">ZFS Pool Version 26</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/27">ZFS Pool Version 27</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/28">ZFS Pool Version 28</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/29">ZFS Pool Version 29</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/3">ZFS Pool Version 3</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/3%2D1">ZFS File System Version 3</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/30">ZFS Pool Version 30</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/31">ZFS Pool Version 31</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/4">ZFS Pool Version 4</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/4%2D1">ZFS File System Version 4</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/5">ZFS Pool Version 5</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/5%2D1">ZFS File System Version 5</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/6">ZFS Pool Version 6</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/7">ZFS Pool Version 7</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/8">ZFS Pool Version 8</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/9">ZFS Pool Version 9</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/N">versionN</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/N%2D1">zplN</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/whatis">What is ZFS?</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/zfstestsuite">ZFS Test Suite</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+zfs/ztest">ZTEST</a></span></li>
</ul>
                              </div>
</div>
      </div>

  </div>
<div class="clearfloats"></div>
  </div></div><div id="footerglobal" class="layoutsection">
<div class="minwidth"></div>
<hr/>
        <div id="xwikiplatformversion">XWiki Enterprise 2.7.1.34853 - <a onclick="openURL('http://enterprise.xwiki.org/xwiki/bin/view/Main/Documentation', '_blank'); return false;" href="http://www.xwiki.org/xwiki/bin/view/Main/Documentation">Documentation</a></div>
<br/>
  
      <div id="footer">
    <p>
                <a href="https://markebrooks.github.io/bin/view/Main/tou/">Terms of Use</a>
                |
                <a href="http://www.oracle.com/html/privacy.html">Privacy</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/trademark/">Trademarks</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/copyrights/">Copyright Policy</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/site_guidelines/">Site Guidelines</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/site-map/">Site Map</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/help/">Help</a>
                <br/>Your use of this web site or any of its content or software indicates your agreement to be bound by these Terms of Use.<br/>
                &copy; 2013, Oracle Corporation and/or its affiliates.<br/><img src="https://markebrooks.github.io:443/static/images/logo_oracle_footer.gif" alt="Oracle Logo"/>
            </p>
        </div>

  
</div>

</div></div></body>
</html>
