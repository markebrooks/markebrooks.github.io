<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
                    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
                                    <title>xVM Dependencies on Installer/LiveCD layouts (Community Group xen.install-depedencies) - XWiki</title>
                <meta http-equiv="Content-Script-Type" content="text/javascript" />
                        <meta http-equiv="imagetoolbar" content="no"/>
                      <link rel="alternate" type="application/x-wiki" title="Edit" href="/bin/edit/Community+Group+xen/install%2Ddepedencies" />
                    <link rel="canonical" href="/bin/view/Community+Group+xen/install%2Ddepedencies" />
                            <meta name="document" content="Community Group xen.install-depedencies"/>
    <meta name="wiki" content="xwiki"/>
    <meta name="space" content="Community Group xen"/>
    <meta name="page" content="install-depedencies"/>
    <meta name="version" content="2.1"/>
    <meta name="restURL" content="/rest/wikis/xwiki/spaces/Community+Group+xen/pages/install-depedencies"/>
                <meta name="gwt:property" content="locale=en" />
                <meta name="revisit-after" content="7 days" />
<meta name="description" content="xVM Dependencies on Installer/LiveCD layouts" />
<meta name="keywords" content="wiki " />
<meta name="distribution" content="GLOBAL" />
<meta name="rating" content="General" />
<meta name="author" content="johnlev" />
<meta http-equiv="reply-to" content="" />
<meta name="language" content="en" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="alternate" type="application/rss+xml" title="Wiki Feed RSS" href="/bin/view/Main/WebRss?xpage=rdf" />
<link rel="alternate" type="application/rss+xml" title="Blog RSS Feed" href="/bin/view/Blog/GlobalBlogRss?xpage=plain" />
<link rel="shortcut icon" href="/resources/icons/oso/icon.png">
                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
<link href="https://markebrooks.github.io/static/css/stylesheet.css" rel="stylesheet" type="text/css" media="all" />
<link href="/bin/skin/skins/colibri/style.css?colorTheme=ColorThemes.Oso" rel="stylesheet" type="text/css" media="all" />
<link href="/bin/skin/skins/colibri/print.css" rel="stylesheet" type="text/css" media="print" />
        <!--[if IE]>
  <link href="/bin/skin/skins/colibri/ie%2Dall.css" rel="stylesheet" type="text/css" />
<![endif]-->
<!--[if IE 6]>
  <link href="/bin/skin/skins/colibri/ie%2D6.css" rel="stylesheet" type="text/css" />
<![endif]-->
<link rel='stylesheet' type='text/css' href='/bin/ssx/AnnotationCode/Settings?language=en'/><link rel='stylesheet' type='text/css' href='/bin/ssx/AnnotationCode/Style?language=en'/><link rel='stylesheet' type='text/css' href='/bin/ssx/XWiki/SharePage?language=en'/>
<link rel='stylesheet' type='text/css' href='/bin/skin/resources/js/xwiki/widgets/modalPopup.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/js/xwiki/widgets/jumpToPage.css?language=en'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/uicomponents/widgets/confirmationBox.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/uicomponents/widgets/notification.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/skins/colibri/resources/uicomponents/viewers/tags.css'/>

    
    <link href="/bin/skin/resources/js/xwiki/suggest/ajaxSuggest.css" rel="stylesheet" type="text/css" />
<link href="/bin/skin/resources/js/xwiki/lightbox/lightbox.css" rel="stylesheet" type="text/css" />
<!--[if IE]>
  <link href="/bin/skin/resources/js/xwiki/lightbox/lightboxIE.css" rel="stylesheet" type="text/css" />
<![endif]-->












<script type="text/javascript" src="/resources/js/prototype/prototype.js"></script>
<script type="text/javascript" src="/bin/skin/resources/js/xwiki/xwiki.js"></script>
<script type="text/javascript">
// <![CDATA[
XWiki.webapppath = "";
XWiki.servletpath = "bin/";
XWiki.contextPath = "";
XWiki.mainWiki = "xwiki";
XWiki.currentWiki = "xwiki";
XWiki.currentSpace = "Community Group xen";
XWiki.currentPage = "install-depedencies";
XWiki.editor = "";
XWiki.viewer = "";
XWiki.contextaction = "view";
XWiki.docisnew = false;
XWiki.docsyntax = "xwiki/2.0";
XWiki.blacklistedSpaces = [ "Import","Panels","Scheduler","Stats","XAppClasses","XAppSheets","XAppTemplates","XWiki","WatchCode","WatchSheets","XApp","WatchAdmin","Watch","ColorThemes","AnnotationCode" ];
XWiki.hasEdit = false;
XWiki.hasProgramming = false;
XWiki.hasBackupPackImportRights = false;
window.docviewurl = "/bin/view/Community+Group+xen/install%2Ddepedencies";
window.docediturl = "/bin/edit/Community+Group+xen/install%2Ddepedencies";
window.docsaveurl = "/bin/save/Community+Group+xen/install%2Ddepedencies";
window.docgeturl = "/bin/get/Community+Group+xen/install%2Ddepedencies";
// ]]>
</script>
<script type='text/javascript' src='/bin/skin/resources/js/scriptaculous/effects.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/js/xwiki/widgets/modalPopup.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/js/xwiki/widgets/jumpToPage.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/confirmationBox.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/confirmedAjaxRequest.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/notification.js' defer='defer'></script>
<script type='text/javascript' src='/resources/uicomponents/widgets/list/xlist.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/xwiki/suggest/ajaxSuggest.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/skins/colibri/resources/uicomponents/viewers/tags.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/scriptaculous/scriptaculous.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/xwiki/accordion/accordion.js' defer='defer'></script>

<script type='text/javascript' src='/bin/jsx/XWiki/WebDAV?language=en' defer='defer'></script>
<script type='text/javascript' src='/bin/jsx/AnnotationCode/Settings?language=en' defer='defer'></script>
<script type='text/javascript' src='/bin/jsx/AnnotationCode/Script?language=en' defer='defer'></script>

<script type="text/javascript" src="/resources/js/xwiki/compatibility.js" defer="defer"></script>

  </head>
  <body id="body" class="wiki-xwiki space-Community_Group_xen viewbody hideright">
<div id="xwikimaincontainer">
<div id="xwikimaincontainerinner">

  <div id="menuview">
    <div id="mainmenu" class="layoutsubsection actionmenu">
<strong id="xwikimenutitle" class="hidden">General Actions:</strong>
<div class="rightmenu">
      <div id="tmLogin" class="tmLogin topmenuentry ">
   <a class="tme" href="https://auth.opensolaris.org/login.action?targetUrl=http%3A%2F%2Fmarkebrooks.github.io%2Fbin%2Fview%2FCommunity%2BGroup%2Bxen%2Finstall%252Ddepedencies"><strong>Log-in</strong></a>
  </div>
  </div>
<div class="leftmenu">
  <div id="tmWiki" class="tmWiki topmenuentry hasIcon">
   <a class="tme" href="/bin/view/Main/"><strong>Wiki</strong></a>
  </div>
  <div id="tmSpace" class="tmSpace topmenuentry dropdownmenuentry  hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme" href="/bin/view/Community+Group+xen/"><strong>Community Group xen</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
                <span class="submenuitem "><a href="/bin/view/Main/SpaceIndex?space=Community+Group+xen" id="tmSpaceDocumentIndex" class="tmSpaceDocumentIndex">Document Index</a></span>
    </span></div>

<div id="tmSubSites" class="tmSubSites topmenuentry dropdownmenuentry dropdownnolink hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>Subsites</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
<span class="submenuitem hasIcon"><a href="https://cr.opensolaris.org/" id="tmCR" class="tmCR">Code Reviews</a></span>
<span class="submenuitem hasIcon"><a href="http://repo.opensolaris.org/" id="tmRepo" class="tmRepo">SCM Management</a></span>
<span class="submenuitem hasIcon"><a href="http://pkg.opensolaris.org/" id="tmPkg" class="tmPkg">Package Search</a></span>
<span class="submenuitem hasIcon"><a href="http://bugs.opensolaris.org/" id="tmBugs" class="tmBugs">Bugster</a></span>
<span class="submenuitem hasIcon"><a href="http://defect.opensolaris.org/" id="tmDefect" class="tmDefect">Bugzilla</a></span>
<span class="submenuitem hasIcon"><a href="http://test.opensolaris.org/" id="tmTest" class="tmTest">Test Machines</a></span>
<span class="submenuitem hasIcon"><a href="http://planet.opensolaris.org/" id="tmPlanet" class="tmPlanet">Planet</a></span>
<span class="submenuitem hasIcon"><a href="http://mail.opensolaris.org/" id="tmMail" class="tmMail">Mailing Lists</a></span>
<span class="submenuitem hasIcon"><a href="http://poll.opensolaris.org/" id="tmPoll" class="tmPoll">Elections &amp; Polls</a></span>
<span class="submenuitem hasIcon"><a href="http://arc.opensolaris.org/" id="tmArc" class="tmArc">ARC Case Logs</a></span>
<span class="submenuitem hasIcon"><a href="http://jucr.opensolaris.org/" id="tmJucr" class="tmJucr">Source Juicer</a></span>
<span class="submenuitem hasIcon"><a href="http://pkgfactory.opensolaris.org/" id="tmPkgfactory" class="tmPkgfactory">Package Factory</a></span>
<span class="submenuitem hasIcon"><a href="http://auth.opensolaris.org/" id="tmAuth" class="tmAuth">Auth</a></span>
</span></div>

</div>
</div>

  </div>
 <div id="header" class="layoutsection">
<div class="minwidthb"></div>

  <div id="header">
    <table style="width: 100%;">
        <tr>
            <td style="width: 1%;">
                 <a href="https://markebrooks.github.io/bin/view/Main/"><div id="logo"></div></a>  
            </td>
            <td id="logo-text" style="width: 1%;">
                Solaris
            </td>         
            <td style="width: 98%;">
                <table id="loading-indicator">
                    <tr>
                        <td><img src="https://markebrooks.github.io:443/static/images/busy.gif"
                                 alt="Loading" title="Loading"/></td>
                        <td>Loading...</td>
                    </tr>
                </table>
            </td>
            <td style="width: 1%;">
                <table id="iconbar">
                    <tr>
                    <td><a id="collectives-icon" href="https://markebrooks.github.io/bin/view/Main/collectives">
                        Collectives</a></td>
                    <td><a id="discussions-icon" href="https://markebrooks.github.io/bin/view/Main/discussions">
                            Discussions</a></td>
                    <td><a id="documentation-icon" href="https://markebrooks.github.io/bin/view/Main/documentation">
                            Documentation</a></td>
                    <td><a id="download-icon" href="https://markebrooks.github.io/bin/view/Main/downloads">
                            Download</a></td>
                    <td><a id="source-browser-icon" href="http://src.opensolaris.org/source">
                            Source Browser</a></td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>

 </div> 
  <div id="globallinks">
    <form action="/bin/view/Main/Search">
      <div class="globalsearch">
        <label class="hidden" for="headerglobalsearchinput">Search</label><input class="globalsearchinput withTip" id="headerglobalsearchinput" type="text" name="text" value="search..." size="15"/><input class="button" type="image" value="Go" alt="Go" src="/resources/icons/xwiki/search.png"/>
      </div>
    </form>
  </div> <div style="float:left;">

                

   <div id="hierarchy">
                              <a href='/bin/view/Community+Group+xen/devdocs'>Developer documentation</a> <span class='separator'>&#187;</span> <span class='current'>xVM Dependencies on Installer/LiveCD layouts</span>
                </div>

</div>
  <span class="glink" id="headerlanguages" style="float:right">
        <a href="/bin/view/Community+Group+xen/install%2Ddepedencies?language=en" class="language-default language-current">en</a>
    </span>


<div class="contenthideright" id="contentcontainer">
<div id="contentcontainerinner">
<div class="leftsidecolumns">
  <div id="contentcolumn"> 
          <div class="main layoutsubsection">
      <div id="contentmenu" class="actionmenu">
    <strong id="xwikicontentmenutitle" class="hidden">Page Actions:</strong>
<div class="rightmenu">
</div>
<div class="leftmenu">
  <div id="tmExport" class="tmExport topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>Export</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="/bin/export/Community+Group+xen/install%2Ddepedencies?format=pdf&amp;language=en" id="tmExportPdf" class="tmExportPdf">Export as PDF</a></span>
  <span class="submenuitem "><a href="/bin/export/Community+Group+xen/install%2Ddepedencies?format=rtf&amp;language=en" id="tmExportRtf" class="tmExportRtf">Export as RTF</a></span>
  <span class="submenuitem "><a href="/bin/export/Community+Group+xen/install%2Ddepedencies?format=html&amp;language=en" id="tmExportHtml" class="tmExportHtml">Export as HTML</a></span>
    </span></div>

<div id="tmShow" class="tmShow topmenuentry dropdownmenuentry  " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme" href="/bin/view/Community+Group+xen/install%2Ddepedencies?viewer=code&amp;language=en"><strong>View</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
<span class="submenuitem "><a href="/bin/view/Community+Group+xen/install%2Ddepedencies?viewer=comments&amp;language=en" id="tmViewComments" class="tmViewComments">Comments</a></span>
<span class="submenuitem "><a href="/bin/view/Community+Group+xen/install%2Ddepedencies?viewer=attachments&amp;language=en" id="tmViewAttachments" class="tmViewAttachments">Attachments</a></span>
<span class="submenuitem "><a href="/bin/view/Community+Group+xen/install%2Ddepedencies?viewer=history&amp;language=en" id="tmViewHistory" class="tmViewHistory">History</a></span>
<span class="submenuitem "><a href="/bin/view/Community+Group+xen/install%2Ddepedencies?viewer=information&amp;language=en" id="tmViewInformation" class="tmViewInformation">Information</a></span>
<span class="submenuitem "><a href="/bin/view/Community+Group+xen/install%2Ddepedencies?viewer=code&amp;language=en" id="tmViewSource" class="tmViewSource">View Source</a></span>
</span></div>

  <div id="tmMoreActions" class="tmMoreActions topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>More actions</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="/bin/view/Community+Group+xen/install%2Ddepedencies?xpage=print&amp;language=en" id="tmPrintPreview" class="tmPrintPreview">Print preview</a></span>
          </span></div>
</div>

    </div>
    <div id="mainContentArea">
      








    
<div id="document-title"><h1>xVM Dependencies on Installer/LiveCD layouts</h1></div>





              <div id="document-info">
    <div>
          </div>
    <div class="clearfloats"></div>
  </div>

<div id="xwikicontent">
<h1 id="HInstalldependencies"><span>Install dependencies</span></h1><p>As of: 2009-09-29</p><p>virt-install is a Python utility that is used for installing Xen/xVM<br/>domUs. It has a number of dependencies upon Solaris install behaviour,<br/>and this document is an attempt at enumerating them.</p><p>Detailed docs can be found via the man pages xVM(5) and<br/>virt-install(1m).</p><p>One important point: most of these dependencies also apply to Linux<br/>dom0s: they use the same code!</p><div class="wikimodel-emptyline"></div><h2 id="HHVMinstalls"><span>HVM installs</span></h2><p>"HVM" installs provide a simulated x86 machine for the guest to run in.<br/>In particular, there's an emulated BIOS that directly runs grub. In this<br/>sense, the install path is "as usual".</p><p>For example, we might run:</p><pre>
    virt-install -n domu-222 -r 1024 --mac `~johnlev/bin/maca domu-222`
    -f /dev/zvol/dsk/export/zvol/domu-222-root --hvm --os-type=solaris
    --os-variant=solaris10 --vnc
    -c /net/heaped/export/netimage/s10u6/07/solarisdvd.iso
</pre><p>to install from an ISO.</p><p>As we run via the system's grub, we do not have the ability to pass<br/>command line options in, so this case is much less dependent upon the<br/>Solaris installer.</p><h2 id="HPVinstalls"><span>PV installs</span></h2><p>PV installs, however, have a much higher-level platform abstraction. In<br/>particular, instead of booting grub, we grab the kernel+ramdisk directly<br/>from the media (typically an ISO, but also NFS), and run that directly<br/>along with a set of command line options.</p><p>For example:</p><pre>
    virt-install -n domu-220 -r 1024 --mac `~johnlev/bin/maca domu-220`
    -f /dev/zvol/dsk/export/dom/domu-220-root --paravirt --os-type=solaris
    --nographics -l /net/heaped/export/netimage/opensolaris/osol-0906-109.iso
</pre><p>will do a PV install of OpenSolaris from the given ISO path.</p><p>Because we need to find the kernel and ramdisk binaries, we have a hard<br/>dependency on their locations. If the guest has at least 1024Mb RAM allocated, and the host is 64-bit capable, we boot in 64-bit mode. Otherwise, we boot in 32-bit mode.</p><p>We look in the following paths for 32-bit:</p><pre>
    OpenSolaris kernel: /platform/i86xpv/kernel/unix
    OpenSolaris ramdisk (2009.06 and earlier): /boot/x86.microroot
    OpenSolaris ramdisk (post-2009.06, b128 or so): /platform/i86pc/boot_archive
</pre><pre>
    Nevada kernel: /boot/platform/i86xpv/kernel/unix
    Nevada ramdisk: /boot/x86.miniroot
</pre><p>And these paths for 64-bit:</p><pre>
    OpenSolaris kernel: /platform/i86xpv/kernel/amd64/unix
    OpenSolaris ramdisk (pre-2009.06): /boot/x86.microroot
    OpenSolaris ramdisk (pre-2009.06): /boot/amd64/x86.microroot
    OpenSolaris ramdisk (post-2009.06, b128 or so): /platform/i86pc/amd64/boot_archive
</pre><pre>
    Nevada kernel: /boot/platform/i86xpv/kernel/amd64/unix
    Nevada ramdisk: /boot/amd64/x86.miniroot
</pre><p>We also depend on being able to read the filesystem. Installation from<br/>unusual file systems will thus be a problem (we also have to track ZFS<br/>versions, sadly).</p><h3 id="HPVcommandline"><span>PV command line</span></h3><p>As well as the actual kernel+ramdisk, we have to pass in a synthetic<br/>command line similar to that set in the grub menus for hardware case.<br/>This can/will include:</p><p>&nbsp;- any options set by the use with virt-install -x<br/>&nbsp;- any networking setup (see below)<br/>&nbsp;- ZFS root pool information</p><p>We have some processing code that understands the difference between<br/>(say) -kdv and -B options. We process, but ignore, -m (SMF) arguments at<br/>the moment.</p><p>For ISO installs, we pass -B install_media=cdrom. We expect the<br/>installer to correctly find the (emulated!) CD.</p><p>We have special ZFS handling. When reading the kernel/ramdisk from the<br/>ZFS file system, &nbsp;(so this is post-install), we grab the current root<br/>pool objset, and pass that in to mount, for example:</p><pre>
    [2009-03-16 18:18:14 100341] DEBUG (image:634) cmdline        =
     /platform/i86xpv/kernel/amd64/unix -B
     zfs-bootfs=rpool/57,bootpath='/xpvd/xdf@51712:a'
</pre><h3 id="HNetinstalls"><span>Netinstalls</span></h3><p>In order to support NFS installs in PV mode (we don't have PXE!), we<br/>pass in a bunch of config options that the installer understands. In<br/>particular:</p><ol><li>if the user specifies subnet-mask in the -x argument, we grab and use it.<br/>2. If we can't resolve the given guest name on the dom0, we pass in 'dhcp'<br/>3. we construct the following:</li></ol><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-B install_media=x.x.x.x:/path/to/media/dir/,host-ip=y.y.y.y,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subnet-mask=...,router-ip=z.z.z.z,boot-mac=MAC, where<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x.x.x.x is the NFS server's IP address, y.y.y.y is the guest's IP<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;address, z.z.z.z is dom0's default route, and MAC is the --mac option</p><p>This is generally enough to drop the Nevada installer into &nbsp;NFS install<br/>mode.</p><p>We don't do any of this currently if it's OpenSolaris media (see AI<br/>below).</p><h2 id="HPXE"><span>PXE</span></h2><p>PV mode doesn't support PXE. HVM mode, however, has an emulated PXE ROM,<br/>and works (AFAIK) the same as the real hardware case, via the --pxe<br/>option.</p><h3 id="HJumpStart"><span>JumpStart</span></h3><p>if --autocf is specified, it points to a jumpstart config. We add the<br/>option " install " to indicate this.</p><p>The config must be on an NFS host. We add to the above netinstall<br/>cmdline:</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sysid_config=x.x.x.x:/path/to/jumpstart,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;install_config=x.x.x.x:/path/to/jumpstart</p><p>where x.x.x.x is the IP address of the NFS server with the JumpStart<br/>config.</p><p>For HVM guests, --autocf points to a floppy image that contains the<br/>jumpstart config, just like real hardware (and somewhat crazily).</p><h3 id="HAI"><span>AI</span></h3><p>For HVM guests, we leave it to --pxe and the HVM-emulated PXE boot to just<br/>do the right thing. &nbsp;I'm not aware of anything in AI that allows us to<br/>pass the equivalent of the sysidcfg file contents from jumpstart via floppy,<br/>and we're unable to change grub entries for guests from dom0 with HVM<br/>unfortunately.</p><p>For PV guests, virt-install downloads the kernel and boot_archive from<br/>a path specied by the "-l" flag in order to boot the domU, the same as<br/>Jumpstart.</p><p>This implies that the user has to know the AI is serving on port 5555.</p><p>AI guest installs differ from Jumpstart installs, in that --autocf gets<br/>passed a comma-separated list of name=value pairs, each of which then<br/>get passed as a -B option to the kernel.</p><p>If the -l flag above is a http url, this is automatically passed as the<br/>'install_media' AI boot option assuming it's not overridden by an<br/>'install_media' autocf option. &nbsp;If -l isn't a http address, we're not<br/>automatically passing it, assuming some sort of physical AI bootable media.</p><p>So, for example we could have:</p><pre>
    virt-install -l http://host/path [std. domU guest options] \
    --autocf install~_service=x86_install,install_media=http://otherhost/path
</pre><p>the virt-install code then automatically adds some default arguments to<br/>the kernel it's about to boot:</p><pre>
    "-B network-interface=xnf0,xpv-hcp=dhcp,livemode=text"
</pre><p>and with the fix for <span class="wikiexternallink"><a href="http://defect.opensolaris.org/bz/show_bug.cgi?id=6850">bug 6850</a></span>, this is<br/>enough to boot the guest, configure networking using DHCP and start the <br/>AI install.</p><p>Additional AI keywords of interest to installing xVM guests include:</p><p>The client will usually require DNS configured before /usr is mounted. As of this writing, this is broken (see <span class="wikiexternallink"><a href="http://defect.opensolaris.org/bz/show_bug.cgi?id=11606">bug 11606</a></span>).</p><p>'install_debug=enable'<br/>if provided, AI runs in debug mode - good for evaluating encountered issues</p><p>'livessh=enable'<br/>if provided, AI client enables remote access via ssh&nbsp;</p><h3 id="HBootableAI"><span>Bootable AI</span></h3><p>When the bootable AI project integrates, you can install entirely from an ISO. virtadm is planning on using this functionality. If an opensolaris guest is installed, and the install source is an ISO, then /by default/ the following options are set:</p><pre>
    media_boot=true,auto-shutdown=enable,aimanifest=default
</pre><p>These are set even for the live ISO. The user can over-ride any of these parameters.</p><p>Whilst it's not currently possible to specify a manifest file available via HTTP or NFS, we would find great use in such a facility, as it means users can modify their install without having to set up an install server.</p><h3 id="HConsoles"><span>Consoles</span></h3><p>HVM Solaris can be installed either via the emulated serial console, or<br/>via X (with vncviewer). However, to enable the serial console install,<br/>the user has to fire up vncviewer and interact with grub to choose the<br/>serial mode install.</p><p>PV installs do not support graphical installs directly, as there is no<br/>framebuffer support. However, VNC from the guest can be used.<br/>OpenSolaris has special code for this, described in detail here:</p><p><span class="wikiexternallink"><a class="wikimodel-freestanding" href="http://blogs.sun.com/levon/entry/opensolaris_2008_11_as_a"><span class="wikigeneratedlinkcontent">http://blogs.sun.com/levon/entry/opensolaris_2008_11_as_a</span></a></span></p><p>For Nevada installer, if --nographics is passed, we add 'nowin' boot<br/>option.</p><h3 id="HReboots"><span>Reboots</span></h3><p>virt-install can/will wait for installation to finish. In this case, it<br/>assumes that the user wants to reboot after the install, and will start<br/>up the domain again.</p>
</div>


    <div class="clearfloats"></div>
  </div>      <div id="xdocFooter">
  
                

       <div class="doc-tags" id="xdocTags">
        Tags:
        </div>
  
  <div id="xdocAuthors">
    <div class="xdocCreation">       Created by admin on 2009/10/26 12:11<br/>
          </div>
    <div class="xdocLastModification">       Last modified by johnlev on 2009/11/12 23:16
    </div>
  </div>
</div>
<div id="xwikidata" class="layoutsubsection">
        </div>  
    </div>      </div><div id="leftPanels" class="panels left">
                  <div class="panel expanded OSNav">
<h1 class="xwikipaneltitle" onclick="XWiki.togglePanelVisibility(this.parentNode, 'XWiki.XWikiGuest_Panels.OSNav');">Collectives</h1>
<div class="xwikipanelcontents">
<div id="xwikinavcontainer">
<span class="wikilink"><a href="/bin/view/Main/communities">Community Groups</a></span><br/>
<span class="wikilink"><a href="/bin/view/Main/projects">Projects</a></span><br/>
<span class="wikilink"><a href="/bin/view/Main/usergroups">User Groups</a></span>
</div><p/>
<script type="text/javascript">
document.observe('xwiki:dom:loaded', function() {
var obj = {div:'xwikinav',no:$count,height:250};
var acc = createAccordion(obj);
});
</script>
</div>
</div>
                        <div class="panel expanded OSDocs">
<h1 class="xwikipaneltitle" onclick="XWiki.togglePanelVisibility(this.parentNode, 'XWiki.XWikiGuest_Panels.OSDocs');">Community Group xen Pages</h1>
<div class="xwikipanelcontents">
<ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/Migration+dry%2Drun">Migration+dry&#45;run</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/OVFsupport">Basic Open Virtualization Format Support</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/UpdatedFeatures">Updated Features</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/demos">Demonstrations</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/xvmscreencast">xVM Screencast</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/devdocs">Developer documentation</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/developers">Xen For OpenSolaris Developers</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/install%2Ddepedencies">xVM Dependencies on Installer/LiveCD layouts</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/xVMTests">xVM Tests</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/docs">Documentation</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/2008_11_dom0">How to Set up OpenSolaris as a dom0</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/Bandwidth_VLAN_ID">Configuring VLAN and bandwidth limits for a VNIC</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/SolarisAsGuestHost">Known Issues With Running Solaris OS as a Host and Guest on Different Virtualization Platforms</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/changing%2Dboot%2Dflags">Changing domU boot flags</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/cloning%2Ddomains">Cloning ZFS&#45;based domains</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/configuring%2Ddom0">Configuring dom0</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/guest%2Dcompatibility">Guest types known to work and not work</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/linux%2Ddom0">How To Install an OpenSolaris domU on a Linux dom0</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/manpages">Official docs</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/opensolaris_domu">How to Set up OpenSolaris as a Paravirtual Guest</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/serial%2Dconsole">Enabling serial console for the hypervisor</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/setupvnc">VNC access to guest domains</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/virtinstall">Using virt&#45;install to Install a Domain</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/goals%2Dof%2Dthe%2Dproject">Goals of Project</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/help">Getting help</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/virtcfg+virtadm">virtcfg &amp; virtadm: making xVM guest administration easy</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/virtcfg%2Bvirtadm">virtcfg+virtadm</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/xVM+Visual+Panel">xVM Visual Panel</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/xdt+dtrace">xdt+dtrace</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/xen_faq">FAQ</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+xen/sunxvmfaq">Sun's Announcement on Sun xVM hypervisor</a></span></li>
</ul></li>
</ul>
                              </div>
</div>
      </div>

  </div>
<div class="clearfloats"></div>
  </div></div><div id="footerglobal" class="layoutsection">
<div class="minwidth"></div>
<hr/>
        <div id="xwikiplatformversion">XWiki Enterprise 2.7.1.34853 - <a onclick="openURL('http://enterprise.xwiki.org/xwiki/bin/view/Main/Documentation', '_blank'); return false;" href="http://www.xwiki.org/xwiki/bin/view/Main/Documentation">Documentation</a></div>
<br/>
  
      <div id="footer">
    <p>
                <a href="https://markebrooks.github.io/bin/view/Main/tou/">Terms of Use</a>
                |
                <a href="http://www.oracle.com/html/privacy.html">Privacy</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/trademark/">Trademarks</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/copyrights/">Copyright Policy</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/site_guidelines/">Site Guidelines</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/site-map/">Site Map</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/help/">Help</a>
                <br/>Your use of this web site or any of its content or software indicates your agreement to be bound by these Terms of Use.<br/>
                &copy; 2012, Oracle Corporation and/or its affiliates.<br/><img src="https://markebrooks.github.io:443/static/images/logo_oracle_footer.gif" alt="Oracle Logo"/>
            </p>
        </div>

  
</div>

</div></div></body>
</html>
