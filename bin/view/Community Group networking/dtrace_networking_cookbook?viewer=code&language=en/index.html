<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
                    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
                                    <title>DTrace Networking Cookbook (Community Group networking.dtrace_networking_cookbook) - XWiki</title>
                <meta http-equiv="Content-Script-Type" content="text/javascript" />
                        <meta http-equiv="imagetoolbar" content="no"/>
                      <link rel="alternate" type="application/x-wiki" title="Edit" href="/bin/edit/Community+Group+networking/dtrace_networking_cookbook" />
                    <link rel="canonical" href="/bin/view/Community+Group+networking/dtrace_networking_cookbook" />
                            <meta name="document" content="Community Group networking.dtrace_networking_cookbook"/>
    <meta name="wiki" content="xwiki"/>
    <meta name="space" content="Community Group networking"/>
    <meta name="page" content="dtrace_networking_cookbook"/>
    <meta name="version" content="1.1"/>
    <meta name="restURL" content="/rest/wikis/xwiki/spaces/Community+Group+networking/pages/dtrace_networking_cookbook"/>
                <meta name="gwt:property" content="locale=en" />
                <meta name="revisit-after" content="7 days" />
<meta name="description" content="DTrace Networking Cookbook" />
<meta name="keywords" content="wiki " />
<meta name="distribution" content="GLOBAL" />
<meta name="rating" content="General" />
<meta name="author" content="admin" />
<meta http-equiv="reply-to" content="" />
<meta name="language" content="en" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="alternate" type="application/rss+xml" title="Wiki Feed RSS" href="/bin/view/Main/WebRss?xpage=rdf" />
<link rel="alternate" type="application/rss+xml" title="Blog RSS Feed" href="/bin/view/Blog/GlobalBlogRss?xpage=plain" />
<link rel="shortcut icon" href="/resources/icons/oso/icon.png">
                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
<link href="https://markebrooks.github.io/static/css/stylesheet.css" rel="stylesheet" type="text/css" media="all" />
<link href="/bin/skin/skins/colibri/style.css?colorTheme=ColorThemes.Oso" rel="stylesheet" type="text/css" media="all" />
<link href="/bin/skin/skins/colibri/print.css" rel="stylesheet" type="text/css" media="print" />
        <!--[if IE]>
  <link href="/bin/skin/skins/colibri/ie%2Dall.css" rel="stylesheet" type="text/css" />
<![endif]-->
<!--[if IE 6]>
  <link href="/bin/skin/skins/colibri/ie%2D6.css" rel="stylesheet" type="text/css" />
<![endif]-->
<link rel='stylesheet' type='text/css' href='/bin/ssx/AnnotationCode/Settings?language=en'/><link rel='stylesheet' type='text/css' href='/bin/ssx/AnnotationCode/Style?language=en'/><link rel='stylesheet' type='text/css' href='/bin/ssx/XWiki/SharePage?language=en'/>
<link rel='stylesheet' type='text/css' href='/bin/skin/resources/js/xwiki/widgets/modalPopup.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/js/xwiki/widgets/jumpToPage.css?language=en'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/uicomponents/widgets/confirmationBox.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/uicomponents/widgets/notification.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/uicomponents/widgets/fullScreen.css'/>

    
    <link href="/bin/skin/resources/js/xwiki/suggest/ajaxSuggest.css" rel="stylesheet" type="text/css" />
<link href="/bin/skin/resources/js/xwiki/lightbox/lightbox.css" rel="stylesheet" type="text/css" />
<!--[if IE]>
  <link href="/bin/skin/resources/js/xwiki/lightbox/lightboxIE.css" rel="stylesheet" type="text/css" />
<![endif]-->












<script type="text/javascript" src="/resources/js/prototype/prototype.js"></script>
<script type="text/javascript" src="/bin/skin/resources/js/xwiki/xwiki.js"></script>
<script type="text/javascript">
// <![CDATA[
XWiki.webapppath = "";
XWiki.servletpath = "bin/";
XWiki.contextPath = "";
XWiki.mainWiki = "xwiki";
XWiki.currentWiki = "xwiki";
XWiki.currentSpace = "Community Group networking";
XWiki.currentPage = "dtrace_networking_cookbook";
XWiki.editor = "";
XWiki.viewer = "";
XWiki.contextaction = "view";
XWiki.docisnew = false;
XWiki.docsyntax = "xwiki/2.0";
XWiki.blacklistedSpaces = [ "Import","Panels","Scheduler","Stats","XAppClasses","XAppSheets","XAppTemplates","XWiki","WatchCode","WatchSheets","XApp","WatchAdmin","Watch","ColorThemes","AnnotationCode" ];
XWiki.hasEdit = false;
XWiki.hasProgramming = false;
XWiki.hasBackupPackImportRights = false;
window.docviewurl = "/bin/view/Community+Group+networking/dtrace_networking_cookbook";
window.docediturl = "/bin/edit/Community+Group+networking/dtrace_networking_cookbook";
window.docsaveurl = "/bin/save/Community+Group+networking/dtrace_networking_cookbook";
window.docgeturl = "/bin/get/Community+Group+networking/dtrace_networking_cookbook";
// ]]>
</script>
<script type='text/javascript' src='/bin/skin/resources/js/scriptaculous/effects.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/js/xwiki/widgets/modalPopup.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/js/xwiki/widgets/jumpToPage.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/confirmationBox.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/confirmedAjaxRequest.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/notification.js' defer='defer'></script>
<script type='text/javascript' src='/resources/uicomponents/widgets/list/xlist.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/xwiki/suggest/ajaxSuggest.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/viewers/code.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/fullScreen.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/scriptaculous/scriptaculous.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/xwiki/accordion/accordion.js' defer='defer'></script>

<script type='text/javascript' src='/bin/jsx/XWiki/WebDAV?language=en' defer='defer'></script>
<script type='text/javascript' src='/bin/jsx/AnnotationCode/Settings?language=en' defer='defer'></script>
<script type='text/javascript' src='/bin/jsx/AnnotationCode/Script?language=en' defer='defer'></script>

<script type="text/javascript" src="/resources/js/xwiki/compatibility.js" defer="defer"></script>

  </head>
  <body id="body" class="wiki-xwiki space-Community_Group_networking viewbody hideright">
<div id="xwikimaincontainer">
<div id="xwikimaincontainerinner">

  <div id="menuview">
    <div id="mainmenu" class="layoutsubsection actionmenu">
<strong id="xwikimenutitle" class="hidden">General Actions:</strong>
<div class="rightmenu">
      <div id="tmLogin" class="tmLogin topmenuentry ">
   <a class="tme" href="https://auth.opensolaris.org/login.action?targetUrl=http%3A%2F%2Fmarkebrooks.github.io%2Fbin%2Fview%2FCommunity%2BGroup%2Bnetworking%2Fdtrace_networking_cookbook%3Fviewer%3Dcode%26%2338%3Blanguage%3Den"><strong>Log-in</strong></a>
  </div>
  </div>
<div class="leftmenu">
  <div id="tmWiki" class="tmWiki topmenuentry hasIcon">
   <a class="tme" href="/bin/view/Main/"><strong>Wiki</strong></a>
  </div>
  <div id="tmSpace" class="tmSpace topmenuentry dropdownmenuentry  hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme" href="/bin/view/Community+Group+networking/"><strong>Community Group networking</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
                <span class="submenuitem "><a href="/bin/view/Main/SpaceIndex?space=Community+Group+networking" id="tmSpaceDocumentIndex" class="tmSpaceDocumentIndex">Document Index</a></span>
    </span></div>

<div id="tmSubSites" class="tmSubSites topmenuentry dropdownmenuentry dropdownnolink hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>Subsites</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
<span class="submenuitem hasIcon"><a href="https://cr.opensolaris.org/" id="tmCR" class="tmCR">Code Reviews</a></span>
<span class="submenuitem hasIcon"><a href="http://repo.opensolaris.org/" id="tmRepo" class="tmRepo">SCM Management</a></span>
<span class="submenuitem hasIcon"><a href="http://pkg.opensolaris.org/" id="tmPkg" class="tmPkg">Package Search</a></span>
<span class="submenuitem hasIcon"><a href="http://bugs.opensolaris.org/" id="tmBugs" class="tmBugs">Bugster</a></span>
<span class="submenuitem hasIcon"><a href="http://defect.opensolaris.org/" id="tmDefect" class="tmDefect">Bugzilla</a></span>
<span class="submenuitem hasIcon"><a href="http://test.opensolaris.org/" id="tmTest" class="tmTest">Test Machines</a></span>
<span class="submenuitem hasIcon"><a href="http://planet.opensolaris.org/" id="tmPlanet" class="tmPlanet">Planet</a></span>
<span class="submenuitem hasIcon"><a href="http://mail.opensolaris.org/" id="tmMail" class="tmMail">Mailing Lists</a></span>
<span class="submenuitem hasIcon"><a href="http://poll.opensolaris.org/" id="tmPoll" class="tmPoll">Elections &amp; Polls</a></span>
<span class="submenuitem hasIcon"><a href="http://arc.opensolaris.org/" id="tmArc" class="tmArc">ARC Case Logs</a></span>
<span class="submenuitem hasIcon"><a href="http://jucr.opensolaris.org/" id="tmJucr" class="tmJucr">Source Juicer</a></span>
<span class="submenuitem hasIcon"><a href="http://pkgfactory.opensolaris.org/" id="tmPkgfactory" class="tmPkgfactory">Package Factory</a></span>
<span class="submenuitem hasIcon"><a href="http://auth.opensolaris.org/" id="tmAuth" class="tmAuth">Auth</a></span>
</span></div>

</div>
</div>

  </div>
 <div id="header" class="layoutsection">
<div class="minwidthb"></div>

  <div id="header">
    <table style="width: 100%;">
        <tr>
            <td style="width: 1%;">
                 <a href="https://markebrooks.github.io/bin/view/Main/"><div id="logo"></div></a>  
            </td>
            <td id="logo-text" style="width: 1%;">
                Solaris
            </td>         
            <td style="width: 98%;">
                <table id="loading-indicator">
                    <tr>
                        <td><img src="https://markebrooks.github.io:443/static/images/busy.gif"
                                 alt="Loading" title="Loading"/></td>
                        <td>Loading...</td>
                    </tr>
                </table>
            </td>
            <td style="width: 1%;">
                <table id="iconbar">
                    <tr>
                    <td><a id="collectives-icon" href="https://markebrooks.github.io/bin/view/Main/collectives">
                        Collectives</a></td>
                    <td><a id="discussions-icon" href="https://markebrooks.github.io/bin/view/Main/discussions">
                            Discussions</a></td>
                    <td><a id="documentation-icon" href="https://markebrooks.github.io/bin/view/Main/documentation">
                            Documentation</a></td>
                    <td><a id="download-icon" href="https://markebrooks.github.io/bin/view/Main/downloads">
                            Download</a></td>
                    <td><a id="source-browser-icon" href="http://src.opensolaris.org/source">
                            Source Browser</a></td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>

 </div> 
  <div id="globallinks">
    <form action="/bin/view/Main/Search">
      <div class="globalsearch">
        <label class="hidden" for="headerglobalsearchinput">Search</label><input class="globalsearchinput withTip" id="headerglobalsearchinput" type="text" name="text" value="search..." size="15"/><input class="button" type="image" value="Go" alt="Go" src="/resources/icons/xwiki/search.png"/>
      </div>
    </form>
  </div> <div style="float:left;">

                

   <div id="hierarchy">
                              <a href='/bin/view/Community+Group+networking/docs'>Documentation</a> <span class='separator'>&#187;</span> <span class='current'>DTrace Networking Cookbook</span>
                </div>

</div>
  <span class="glink" id="headerlanguages" style="float:right">
        <a href="/bin/view/Community+Group+networking/dtrace_networking_cookbook?language=en" class="language-default language-current">en</a>
    </span>


<div class="contenthideright" id="contentcontainer">
<div id="contentcontainerinner">
<div class="leftsidecolumns">
  <div id="contentcolumn"> 
        <div class="main layoutsubsection">
      <div id="contentmenu" class="actionmenu">
    <strong id="xwikicontentmenutitle" class="hidden">Page Actions:</strong>
<div class="rightmenu">
</div>
<div class="leftmenu">
  <div id="tmExport" class="tmExport topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>Export</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="/bin/export/Community+Group+networking/dtrace_networking_cookbook?format=pdf&amp;language=en" id="tmExportPdf" class="tmExportPdf">Export as PDF</a></span>
  <span class="submenuitem "><a href="/bin/export/Community+Group+networking/dtrace_networking_cookbook?format=rtf&amp;language=en" id="tmExportRtf" class="tmExportRtf">Export as RTF</a></span>
  <span class="submenuitem "><a href="/bin/export/Community+Group+networking/dtrace_networking_cookbook?format=html&amp;language=en" id="tmExportHtml" class="tmExportHtml">Export as HTML</a></span>
    </span></div>

<div id="tmShow" class="tmShow topmenuentry dropdownmenuentry  " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme" href="/bin/view/Community+Group+networking/dtrace_networking_cookbook?viewer=code&amp;language=en"><strong>View</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
<span class="submenuitem "><a href="/bin/view/Community+Group+networking/dtrace_networking_cookbook?viewer=comments&amp;language=en" id="tmViewComments" class="tmViewComments">Comments</a></span>
<span class="submenuitem "><a href="/bin/view/Community+Group+networking/dtrace_networking_cookbook?viewer=attachments&amp;language=en" id="tmViewAttachments" class="tmViewAttachments">Attachments</a></span>
<span class="submenuitem "><a href="/bin/view/Community+Group+networking/dtrace_networking_cookbook?viewer=history&amp;language=en" id="tmViewHistory" class="tmViewHistory">History</a></span>
<span class="submenuitem "><a href="/bin/view/Community+Group+networking/dtrace_networking_cookbook?viewer=information&amp;language=en" id="tmViewInformation" class="tmViewInformation">Information</a></span>
<span class="submenuitem "><a href="/bin/view/Community+Group+networking/dtrace_networking_cookbook?viewer=code&amp;language=en" id="tmViewSource" class="tmViewSource">View Source</a></span>
</span></div>

  <div id="tmMoreActions" class="tmMoreActions topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>More actions</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="/bin/view/Community+Group+networking/dtrace_networking_cookbook?xpage=print&amp;language=en" id="tmPrintPreview" class="tmPrintPreview">Print preview</a></span>
          <span class="submenuitem "><a href="/bin/view/Community+Group+networking/dtrace_networking_cookbook?xpage=copy" id="tmActionCopy" class="tmActionCopy">Copy</a></span>
      </span></div>
</div>

    </div>
    <div id="mainContentArea">
      


<div id="document-title"><h1>Wiki source code of <a href="/bin/view/Community+Group+networking/dtrace_networking_cookbook">DTrace Networking Cookbook</a></h1></div>
                <div id="document-info">
    <div>
                      <span id="contentshortcut"><a href="/bin/view/Community+Group+networking/dtrace_networking_cookbook?viewer=content">Content</a></span>
          </div>
    <div class="clearfloats"></div>
  </div>







<div>
  <a href="/bin/view/Community+Group+networking/dtrace_networking_cookbook?viewer=code&amp;showlinenumbers=0&amp;language=en" id="toggleLineNumbers">Hide line numbers</a>
                                  <textarea readonly="readonly" class="wiki-code" rows="25" cols="80">
  1: = Dtrace Networking Cookbook
  2: 
  3: === From CTG
  4: 
  5: //Author: Sowmini Varadhan//
  6: 
  7: == Background Information
  8: 
  9: Dtrace is a handy tool for debugging some types of networking problems esp. in the kernel, and this cookbook will attempt to provide a quick tour of dtrace, what it can/can't do, and a collection of handy networking specific scripts of varying complexity. The objective is to provide a repository of scripts that can be borrowed from, or built upon, by someone in the middle of a nasty network bug, who's thinking &quot;Gee, I wish I could find out what's happening //here// but I don't have the time to take a Dtrace class!&quot;
 10: 
 11: Note that the scripts included here are mostly intended to be used as sources for cut/paste templates for solving other problems, rather than as complete &quot;cure-all&quot; examples of their own.
 12: 
 13: Contributions of all shapes, sizes and complexity to the repository are welcome! Please send mail to [[Sowmini&gt;&gt;mailto:sowmini.varadhan@sun.com]]&nbsp; with any input!
 14: 
 15: Here are some useful links to other documentation:
 16: 
 17: * [[OpenSolaris Dtrace Community&gt;&gt;Community Group dtrace.WebHome]]&nbsp;
 18: * [[The Solaris&trade; Dynamic Tracing Guide&gt;&gt;http://docs.sun.com/app/docs/doc/819-5488/gbwaz?l=en&amp;q=dtrace&amp;a=view]]&nbsp;
 19: * [[Dtrace Scripts&gt;&gt;Community Group dtrace.scripts]]&nbsp;
 20: * [[Dtrace Toolkit&gt;&gt;Community Group dtrace.dtracetoolkit]]&nbsp;
 21: * [[DExplorer&gt;&gt;Community Group dtrace.dexplorer]]&nbsp;
 22: 
 23: == Dtrace for Networking Tutorial
 24: 
 25: === General Start
 26: 
 27: * [[Solaris Dynamic Tracing Guide - Chapter 1&gt;&gt;http://docs.sun.com/app/docs/doc/817-6223/6mlkidlf1?a=view]]&nbsp;
 28: * [[Dtrace How To Guide&gt;&gt;http://www.sun.com/software/solaris/howtoguides/dtracehowto.jsp]]&nbsp;
 29: * [[tpg.com.au Guide&gt;&gt;http://users.tpg.com.au/adsln4yb/dtrace.html#Guide]]
 30: 
 31: === Guide
 32: 
 33: How do I use DTrace? You will probably either use DTrace scripts or write DTrace scripts:
 34: 
 35: **Use DTrace scripts**
 36: 
 37: * Download the DTraceToolkit
 38: * Download Scripts from this website or Other websites.
 39: * Check out the DTrace OneLiners.
 40: * Use scripts found in /usr/demo/dtrace, or in the [[DTrace Guide&gt;&gt;http://docs.sun.com/app/docs/doc/819-5488/gbwaz?l=en&amp;q=dtrace&amp;a=view]]&nbsp;
 41: * Seach the BigAdmin [[Forum&gt;&gt;http://forum.sun.com/forum.jsp?forum=211]] for useful script or elsewhere on the Internet.
 42: 
 43: **Write DTrace Scripts**
 44: 
 45: Some people will write their own customised DTrace scripts to troubleshoot faults or solve performance issues.
 46: 
 47: * It helps to know C
 48: * It helps to know a little about the kernel
 49: * Nearly anything is possible
 50: 
 51: To get started writing your own scripts:
 52: 
 53: * Read Chapter 1 (at least) of the [[DTrace Guide&gt;&gt;http://docs.sun.com/app/docs/doc/819-5488/gbwaz?l=en&amp;q=dtrace&amp;a=view]]&nbsp;
 54: * Check out the DTrace OneLiners.
 55: * Read through the DTrace Examples.
 56: * Study scripts.
 57: * See Other websites for scripts.
 58: * Download the DTraceToolkit
 59: * Participate in the BigAdmin [[Forum&gt;&gt;http://forum.sun.com/forum.jsp?forum=211]]&nbsp;
 60: 
 61: **Note:** Many of the DTrace scripts on this site have been wrapped in the Bourne shell or Perl to provide command line options. In the future, DTrace may may be directly capable of optional arguments. In the meantime this code has been written in such a way that future conversion to pure DTrace is easy.
 62: 
 63: == Networking Dtrace Scripts
 64: 
 65: [[&gt;&gt;attach:Community Group networking.WebHome@src.tar.gz]]
 66: 
 67:  Several dtrace one-liners are available at&nbsp; [[usres.tpg.com.au&gt;&gt;http://users.tpg.com.au/adsln4yb/dtrace.html#Examples]]
 68: 
 69:  In addition a tarball of&nbsp; Dscripts of varying complexity (detailed descriptions follow)&nbsp; may be found&nbsp; [[here&gt;&gt;attach:Community Group networking.WebHome@src.tar.gz]]
 70: 
 71: === Some Simple Dscripts
 72: 
 73: bge_send.d&nbsp; - count packets sent in bge_send, and the fails. Can easily be modified to count packets of a particular type (like ip proto etc.)
 74: 
 75: arp_lookup.d&nbsp; - print out ipv4 address that we are trying to lookup in arp.
 76: 
 77: arp_snoop.d&nbsp; prints stack trace and packet layout (in snoop-like format) of packets intercepted in ar_rput().
 78: 
 79: break_in_kmdb.html - demonstrates how to get dscripts to stop in kmdb.
 80: 
 81: ctx.d&nbsp; - watch for context switching during sendto() calls using pswitch probe.
 82: 
 83: udp.d&nbsp; - use UDP MIB provider to show udp stats once per second.
 84: 
 85: ip_reass.d&nbsp; - track fragmented ip packets; has a user-friendly output of 32 bit ip addresses..
 86: 
 87: unknown_proto.d&nbsp; is a dtrace script to print out the identity of &quot;unknown IP protocol&quot; packets ~-- the things bumping up the ipInUnknownProtos MIB/netstat counter.
 88: 
 89: === Dscripts for Timing Drivers, Functions
 90: 
 91: e1000g.d&nbsp; - count e1000g driver calls, time the expensive CleanTxInterrupts() function; Demonstrates use of Aggregations (&quot;@&quot;).
 92: 
 93: ce.d.html - measure the service time in the arp module with ce driver.
 94: 
 95: jitter.d - Measure time spent in sendto, recvfrom, looking for &quot;jitter&quot;, or long pauses; jitter2.d refines jitter.d by using speculate()
 96: 
 97: trace_nce_res_mp.d is a simple template that can be customized to help pick out a particular packet at critical functions (dblk_free, in this example) in the stack.
 98: 
 99: === Dscripts for kernel profiling
100: 
101: prof.d&nbsp; - Profile the kernel looking for high system time; demonstrates how to use the profile provider with aggregations. prof2.d&nbsp; and prof3.d are refinements of prof.d..
102: 
103: ==== Profiling tools built over dtrace
104: 
105: The Sun Studio Compiler also supports the er_kernel tool for profiling the Solaris kernel. er_kernel can collect data using either of two drivers: DTrace, for Solaris 10, which will be externally available, and an no-ship loadable driver, kpcsdrv, available for Solaris 8, 9, or 10. The DTrace driver is the default; the kpcsdrv driver is accessed when the first argument to er_kernel is -X.
106: 
107: A wealth of information about this tool is available at the following locations:
108: 
109: * [[Overview of er_kernel&gt;&gt;http://dpweb.sfbay/products/analyzer/kernel.html]]&nbsp;
110: * [[Official documentation &gt;&gt;http://docs.sun.com/source/819-0493/]]&nbsp;
111: * [[man pages&gt;&gt;http://dpweb.sfbay/products/analyzer/manpages/]]&nbsp;
112: 
113: === And More Elaborate Ones....
114: 
115: There are some examples of scripts to watch connections at the **[[dtrace discussions &gt;&gt;Community Group dtrace.scripts]]&nbsp;(//http://www.open solaris.org/os/community/dtrace/scripts///)** site.
116: 
117: **[[zerocopy.d&gt;&gt;http://npt.eng/dtrace/zerocopy.d.html]]&nbsp;(//http://npt.eng/dtrace/zerocopy.d.html//)** - monitors
118: 
119: **zerocopy.d **- monitors TCP's ZeroCopy feature, shows what happens at different components, e.g. STREAM head, TCP, IP(ill), mblk, etc.
120: 
121: === Other Dtrace Script Listings
122: 
123: [[Richard McDougall's Dtrace Scripts&gt;&gt;http://www.solarisinternals.com/si/dtrace/index.php]]&nbsp;
124: 
125: == Limitations of Dtrace for Networking
126: 
127: Dtrace is not a good tool for post-mortem analysis. For example, one problem frequently encountered in Networking is the &quot;where did my packet get queued up?&quot; problem posed in this [[customer's &gt;&gt;http://www.opensolaris.org/jive/thread.jspa?threadID=1426
128: 0&amp;tstart=0]] question. Another class of problems encountered is the analysis of the sequence of events that led to a memory leak or reference-count leak after the leak has occurred.
129: 
130: == Contributors
131: 
132: [[Jim Carlson&gt;&gt;mailto:james.d.carlson@sun.com]], [[Jim Fiori&gt;&gt;mailto:jim.fiori@sun.com]], [[Darrin Johnson&gt;&gt;mailto:darrin.johnson@sun.com]], [[Alex Peng&gt;&gt;mailto:alex.peng@sun.com]], [[Sowmini Varadhan&gt;&gt;mailto:sowmini.varadhan@sun.com]]
133: 
134: Retrieved from &quot;[[http://ctg.central.sun.com/wiki/index.php/Dtrace_Networking_Cookbook&gt;&gt;http://ctg.central.sun.com/wiki/index.php/Dtrace_Networking_Cookbook]]&quot;
135: [[&gt;&gt;/wiki/index.php/Main_Page]]
136: 
137: ===== Search
</textarea>
</div>

    <div class="clearfloats"></div>
  </div>    </div>      </div><div id="leftPanels" class="panels left">
                  <div class="panel expanded OSNav">
<h1 class="xwikipaneltitle" onclick="XWiki.togglePanelVisibility(this.parentNode, 'XWiki.XWikiGuest_Panels.OSNav');">Collectives</h1>
<div class="xwikipanelcontents">
<div id="xwikinavcontainer">
<span class="wikilink"><a href="/bin/view/Main/communities">Community Groups</a></span><br/>
<span class="wikilink"><a href="/bin/view/Main/projects">Projects</a></span><br/>
<span class="wikilink"><a href="/bin/view/Main/usergroups">User Groups</a></span>
</div><p/>
<script type="text/javascript">
document.observe('xwiki:dom:loaded', function() {
var obj = {div:'xwikinav',no:$count,height:250};
var acc = createAccordion(obj);
});
</script>
</div>
</div>
                        <div class="panel expanded OSDocs">
<h1 class="xwikipaneltitle" onclick="XWiki.togglePanelVisibility(this.parentNode, 'XWiki.XWikiGuest_Panels.OSDocs');">Community Group networking Pages</h1>
<div class="xwikipanelcontents">
<ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+networking/docs">Documentation</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+networking/dtrace_networking_cookbook">DTrace Networking Cookbook</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+networking/pfhooks">Solaris Packet Filtering Hooks</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+networking/files">Files</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+networking/projects">Networking Projects</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+networking/emulex%2Dcna">Emulex Advanced Ethernet Device Driver</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+networking/qlogic%2Dcna">QLogic CNA GLDv3 Driver</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+networking/tests">Network Tests</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+networking/nc">Netcat Test Suite</a></span></li>
</ul></li>
</ul>
                              </div>
</div>
      </div>

  </div>
<div class="clearfloats"></div>
  </div></div><div id="footerglobal" class="layoutsection">
<div class="minwidth"></div>
<hr/>
        <div id="xwikiplatformversion">XWiki Enterprise 2.7.1.34853 - <a onclick="openURL('http://enterprise.xwiki.org/xwiki/bin/view/Main/Documentation', '_blank'); return false;" href="http://www.xwiki.org/xwiki/bin/view/Main/Documentation">Documentation</a></div>
<br/>
  
      <div id="footer">
    <p>
                <a href="https://markebrooks.github.io/bin/view/Main/tou/">Terms of Use</a>
                |
                <a href="http://www.oracle.com/html/privacy.html">Privacy</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/trademark/">Trademarks</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/copyrights/">Copyright Policy</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/site_guidelines/">Site Guidelines</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/site-map/">Site Map</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/help/">Help</a>
                <br/>Your use of this web site or any of its content or software indicates your agreement to be bound by these Terms of Use.<br/>
                &copy; 2012, Oracle Corporation and/or its affiliates.<br/><img src="https://markebrooks.github.io:443/static/images/logo_oracle_footer.gif" alt="Oracle Logo"/>
            </p>
        </div>

  
</div>

</div></div></body>
</html>
