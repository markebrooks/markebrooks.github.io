<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
                    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
                                    <title>IPS for Consolidations (Project pkg.IPS for Consolidations) - XWiki</title>
                <meta http-equiv="Content-Script-Type" content="text/javascript" />
                        <meta http-equiv="imagetoolbar" content="no"/>
                      <link rel="alternate" type="application/x-wiki" title="Edit" href="/bin/edit/Project+pkg/IPS+for+Consolidations" />
                    <link rel="canonical" href="/bin/view/Project+pkg/IPS+for+Consolidations" />
                            <meta name="document" content="Project pkg.IPS for Consolidations"/>
    <meta name="wiki" content="xwiki"/>
    <meta name="space" content="Project pkg"/>
    <meta name="page" content="IPS for Consolidations"/>
    <meta name="version" content="22.1"/>
    <meta name="restURL" content="/rest/wikis/xwiki/spaces/Project+pkg/pages/IPS+for+Consolidations"/>
                <meta name="gwt:property" content="locale=en" />
                <meta name="revisit-after" content="7 days" />
<meta name="description" content="IPS for Consolidations" />
<meta name="keywords" content="wiki " />
<meta name="distribution" content="GLOBAL" />
<meta name="rating" content="General" />
<meta name="author" content="David Comay" />
<meta http-equiv="reply-to" content="" />
<meta name="language" content="en" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="alternate" type="application/rss+xml" title="Wiki Feed RSS" href="/bin/view/Main/WebRss?xpage=rdf" />
<link rel="alternate" type="application/rss+xml" title="Blog RSS Feed" href="/bin/view/Blog/GlobalBlogRss?xpage=plain" />
<link rel="shortcut icon" href="/resources/icons/oso/icon.png">
                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
<link href="https://markebrooks.github.io/static/css/stylesheet.css" rel="stylesheet" type="text/css" media="all" />
<link href="/bin/skin/skins/colibri/style.css?colorTheme=ColorThemes.Oso" rel="stylesheet" type="text/css" media="all" />
<link href="/bin/skin/skins/colibri/print.css" rel="stylesheet" type="text/css" media="print" />
        <!--[if IE]>
  <link href="/bin/skin/skins/colibri/ie%2Dall.css" rel="stylesheet" type="text/css" />
<![endif]-->
<!--[if IE 6]>
  <link href="/bin/skin/skins/colibri/ie%2D6.css" rel="stylesheet" type="text/css" />
<![endif]-->
<link rel='stylesheet' type='text/css' href='/bin/ssx/AnnotationCode/Settings?language=en'/><link rel='stylesheet' type='text/css' href='/bin/ssx/AnnotationCode/Style?language=en'/><link rel='stylesheet' type='text/css' href='/bin/ssx/XWiki/SharePage?language=en'/>
<link rel='stylesheet' type='text/css' href='/bin/skin/resources/js/xwiki/widgets/modalPopup.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/js/xwiki/widgets/jumpToPage.css?language=en'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/uicomponents/widgets/confirmationBox.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/uicomponents/widgets/notification.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/skins/colibri/resources/uicomponents/viewers/tags.css'/>

    
    <link href="/bin/skin/resources/js/xwiki/suggest/ajaxSuggest.css" rel="stylesheet" type="text/css" />
<link href="/bin/skin/resources/js/xwiki/lightbox/lightbox.css" rel="stylesheet" type="text/css" />
<!--[if IE]>
  <link href="/bin/skin/resources/js/xwiki/lightbox/lightboxIE.css" rel="stylesheet" type="text/css" />
<![endif]-->












<script type="text/javascript" src="/resources/js/prototype/prototype.js"></script>
<script type="text/javascript" src="/bin/skin/resources/js/xwiki/xwiki.js"></script>
<script type="text/javascript">
// <![CDATA[
XWiki.webapppath = "";
XWiki.servletpath = "bin/";
XWiki.contextPath = "";
XWiki.mainWiki = "xwiki";
XWiki.currentWiki = "xwiki";
XWiki.currentSpace = "Project pkg";
XWiki.currentPage = "IPS for Consolidations";
XWiki.editor = "";
XWiki.viewer = "";
XWiki.contextaction = "view";
XWiki.docisnew = false;
XWiki.docsyntax = "xwiki/2.0";
XWiki.blacklistedSpaces = [ "Import","Panels","Scheduler","Stats","XAppClasses","XAppSheets","XAppTemplates","XWiki","WatchCode","WatchSheets","XApp","WatchAdmin","Watch","ColorThemes","AnnotationCode" ];
XWiki.hasEdit = false;
XWiki.hasProgramming = false;
XWiki.hasBackupPackImportRights = false;
window.docviewurl = "/bin/view/Project+pkg/IPS+for+Consolidations";
window.docediturl = "/bin/edit/Project+pkg/IPS+for+Consolidations";
window.docsaveurl = "/bin/save/Project+pkg/IPS+for+Consolidations";
window.docgeturl = "/bin/get/Project+pkg/IPS+for+Consolidations";
// ]]>
</script>
<script type='text/javascript' src='/bin/skin/resources/js/scriptaculous/effects.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/js/xwiki/widgets/modalPopup.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/js/xwiki/widgets/jumpToPage.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/confirmationBox.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/confirmedAjaxRequest.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/notification.js' defer='defer'></script>
<script type='text/javascript' src='/resources/uicomponents/widgets/list/xlist.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/xwiki/suggest/ajaxSuggest.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/skins/colibri/resources/uicomponents/viewers/tags.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/scriptaculous/scriptaculous.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/xwiki/accordion/accordion.js' defer='defer'></script>

<script type='text/javascript' src='/bin/jsx/XWiki/WebDAV?language=en' defer='defer'></script>
<script type='text/javascript' src='/bin/jsx/AnnotationCode/Settings?language=en' defer='defer'></script>
<script type='text/javascript' src='/bin/jsx/AnnotationCode/Script?language=en' defer='defer'></script>

<script type="text/javascript" src="/resources/js/xwiki/compatibility.js" defer="defer"></script>

  </head>
  <body id="body" class="wiki-xwiki space-Project_pkg viewbody hideright">
<div id="xwikimaincontainer">
<div id="xwikimaincontainerinner">

  <div id="menuview">
    <div id="mainmenu" class="layoutsubsection actionmenu">
<strong id="xwikimenutitle" class="hidden">General Actions:</strong>
<div class="rightmenu">
      <div id="tmLogin" class="tmLogin topmenuentry ">
   <a class="tme" href="https://auth.opensolaris.org/login.action?targetUrl=http%3A%2F%2Fmarkebrooks.github.io%2Fbin%2Fview%2FProject%2Bpkg%2FIPS%2Bfor%2BConsolidations"><strong>Log-in</strong></a>
  </div>
  </div>
<div class="leftmenu">
  <div id="tmWiki" class="tmWiki topmenuentry hasIcon">
   <a class="tme" href="/bin/view/Main/"><strong>Wiki</strong></a>
  </div>
  <div id="tmSpace" class="tmSpace topmenuentry dropdownmenuentry  hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme" href="/bin/view/Project+pkg/"><strong>Project pkg</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
                <span class="submenuitem "><a href="/bin/view/Main/SpaceIndex?space=Project+pkg" id="tmSpaceDocumentIndex" class="tmSpaceDocumentIndex">Document Index</a></span>
    </span></div>

<div id="tmSubSites" class="tmSubSites topmenuentry dropdownmenuentry dropdownnolink hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>Subsites</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
<span class="submenuitem hasIcon"><a href="https://cr.opensolaris.org/" id="tmCR" class="tmCR">Code Reviews</a></span>
<span class="submenuitem hasIcon"><a href="http://repo.opensolaris.org/" id="tmRepo" class="tmRepo">SCM Management</a></span>
<span class="submenuitem hasIcon"><a href="http://pkg.opensolaris.org/" id="tmPkg" class="tmPkg">Package Search</a></span>
<span class="submenuitem hasIcon"><a href="http://bugs.opensolaris.org/" id="tmBugs" class="tmBugs">Bugster</a></span>
<span class="submenuitem hasIcon"><a href="http://defect.opensolaris.org/" id="tmDefect" class="tmDefect">Bugzilla</a></span>
<span class="submenuitem hasIcon"><a href="http://test.opensolaris.org/" id="tmTest" class="tmTest">Test Machines</a></span>
<span class="submenuitem hasIcon"><a href="http://planet.opensolaris.org/" id="tmPlanet" class="tmPlanet">Planet</a></span>
<span class="submenuitem hasIcon"><a href="http://mail.opensolaris.org/" id="tmMail" class="tmMail">Mailing Lists</a></span>
<span class="submenuitem hasIcon"><a href="http://poll.opensolaris.org/" id="tmPoll" class="tmPoll">Elections &amp; Polls</a></span>
<span class="submenuitem hasIcon"><a href="http://arc.opensolaris.org/" id="tmArc" class="tmArc">ARC Case Logs</a></span>
<span class="submenuitem hasIcon"><a href="http://jucr.opensolaris.org/" id="tmJucr" class="tmJucr">Source Juicer</a></span>
<span class="submenuitem hasIcon"><a href="http://pkgfactory.opensolaris.org/" id="tmPkgfactory" class="tmPkgfactory">Package Factory</a></span>
<span class="submenuitem hasIcon"><a href="http://auth.opensolaris.org/" id="tmAuth" class="tmAuth">Auth</a></span>
</span></div>

</div>
</div>

  </div>
 <div id="header" class="layoutsection">
<div class="minwidthb"></div>

  <div id="header">
    <div id="header_banner">
	<table style="width: 100%;">
	    <tr>
		<td style="width: 1%;">
		    <a href="https://markebrooks.github.io/bin/view/Main/"><div id="logo"></div></a>  
		</td>
		<td id="logo-text" style="width: 1%;">
		    Solaris
		</td>         
		<td style="width: 98%;">
		    <table id="loading-indicator">
			<tr>
			    <td><img src="https://markebrooks.github.io:443/static/images/busy.gif"
				    alt="Loading" title="Loading"/></td>
			    <td>Loading...</td>
			</tr>
		    </table>
		</td>
		<td style="width: 1%;">
		    <table id="iconbar">
			<tr>
			<td><a id="collectives-icon" href="https://markebrooks.github.io/bin/view/Main/collectives">
			    Collectives</a></td>
			<td><a id="discussions-icon" href="https://markebrooks.github.io/bin/view/Main/discussions">
				Discussions</a></td>
			<td><a id="documentation-icon" href="https://markebrooks.github.io/bin/view/Main/documentation">
				Documentation</a></td>
			<td><a id="download-icon" href="https://markebrooks.github.io/bin/view/Main/downloads">
				Download</a></td>
			<td><a id="source-browser-icon" href="http://src.opensolaris.org/source">
				Source Browser</a></td>
			</tr>
		    </table>
		</td>
	    </tr>
	</table>
    </div>
    <div id="site-notice">
	<span>
	    <a href="https://markebrooks.github.io/bin/view/Main/">ATTENTION: This website and all services within the opensolaris.org domain will be unavailable after March 24, 2013.</a>	   
	</span>
    </div>
</div>
 </div> 
  <div id="globallinks">
    <form action="/bin/view/Main/Search">
      <div class="globalsearch">
        <label class="hidden" for="headerglobalsearchinput">Search</label><input class="globalsearchinput withTip" id="headerglobalsearchinput" type="text" name="text" value="search..." size="15"/><input class="button" type="image" value="Go" alt="Go" src="/resources/icons/xwiki/search.png"/>
      </div>
    </form>
  </div> <div style="float:left;">

                

   <div id="hierarchy">
                              <a href='/bin/view/Project+pkg/devinfo'>Developer information</a> <span class='separator'>&#187;</span> <span class='current'>IPS for Consolidations</span>
                </div>

</div>
  <span class="glink" id="headerlanguages" style="float:right">
        <a href="/bin/view/Project+pkg/IPS+for+Consolidations?language=en" class="language-default language-current">en</a>
    </span>


<div class="contenthideright" id="contentcontainer">
<div id="contentcontainerinner">
<div class="leftsidecolumns">
  <div id="contentcolumn"> 
          <div class="main layoutsubsection">
      <div id="contentmenu" class="actionmenu">
    <strong id="xwikicontentmenutitle" class="hidden">Page Actions:</strong>
<div class="rightmenu">
</div>
<div class="leftmenu">
  <div id="tmExport" class="tmExport topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>Export</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="/bin/export/Project+pkg/IPS+for+Consolidations?format=pdf&amp;language=en" id="tmExportPdf" class="tmExportPdf">Export as PDF</a></span>
  <span class="submenuitem "><a href="/bin/export/Project+pkg/IPS+for+Consolidations?format=rtf&amp;language=en" id="tmExportRtf" class="tmExportRtf">Export as RTF</a></span>
  <span class="submenuitem "><a href="/bin/export/Project+pkg/IPS+for+Consolidations?format=html&amp;language=en" id="tmExportHtml" class="tmExportHtml">Export as HTML</a></span>
    </span></div>

<div id="tmShow" class="tmShow topmenuentry dropdownmenuentry  " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme" href="/bin/view/Project+pkg/IPS+for+Consolidations?viewer=code&amp;language=en"><strong>View</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
<span class="submenuitem "><a href="/bin/view/Project+pkg/IPS+for+Consolidations?viewer=comments&amp;language=en" id="tmViewComments" class="tmViewComments">Comments</a></span>
<span class="submenuitem "><a href="/bin/view/Project+pkg/IPS+for+Consolidations?viewer=attachments&amp;language=en" id="tmViewAttachments" class="tmViewAttachments">Attachments</a></span>
<span class="submenuitem "><a href="/bin/view/Project+pkg/IPS+for+Consolidations?viewer=history&amp;language=en" id="tmViewHistory" class="tmViewHistory">History</a></span>
<span class="submenuitem "><a href="/bin/view/Project+pkg/IPS+for+Consolidations?viewer=information&amp;language=en" id="tmViewInformation" class="tmViewInformation">Information</a></span>
<span class="submenuitem "><a href="/bin/view/Project+pkg/IPS+for+Consolidations?viewer=code&amp;language=en" id="tmViewSource" class="tmViewSource">View Source</a></span>
</span></div>

  <div id="tmMoreActions" class="tmMoreActions topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>More actions</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="/bin/view/Project+pkg/IPS+for+Consolidations?xpage=print&amp;language=en" id="tmPrintPreview" class="tmPrintPreview">Print preview</a></span>
          </span></div>
</div>

    </div>
    <div id="mainContentArea">
      








    
<div id="document-title"><h1>IPS for Consolidations</h1></div>





              <div id="document-info">
    <div>
          </div>
    <div class="clearfloats"></div>
  </div>

<div id="xwikicontent">
<h1 id="HRequirementsandAdviceforConsolidationsDeliveringIPSrepositories"><span>Requirements and Advice for Consolidations Delivering IPS repositories</span></h1><p><strong>This page is a work in progress. &nbsp;Advice and requirements here are not yet final.</strong></p><p>Consolidations which deliver to the OpenSolaris/Solaris Release Engineering (RE) docks must transition from delivering SVR4 packages to delivering IPS repositories. &nbsp;This page captures the technical requirements for that transition, and expects basic familiarity with existing consolidation delivery practices.</p><ul><li><span class="wikilink"><a href="#HRequirements">Requirements</a></span><ul><li><span class="wikilink"><a href="#HGeneralRequirements">General Requirements</a></span></li><li><span class="wikilink"><a href="#HRepositoryFormatRequirements">Repository Format Requirements</a></span></li><li><span class="wikilink"><a href="#HPackageRequirements">Package Requirements</a></span></li><li><span class="wikilink"><a href="#HObsoletes2CRenames2CandFileMoveRequirements">Obsoletes, Renames, and File Move Requirements</a></span></li></ul></li><li><span class="wikilink"><a href="#HTransitionProcess">Transition Process</a></span></li><li><span class="wikilink"><a href="#HOngoingRequirements">Ongoing Requirements</a></span></li></ul><hr/><h2 id="HRequirements"><span>Requirements</span></h2><h3 id="HGeneralRequirements"><span>General Requirements</span></h3><ul><li>Consolidations must be prepared to re-deliver throughout this release with some frequency. &nbsp;Consolidation assembly is a work in progress, and the distribution will need a few updates from all consolidations as new IPS features become available to make the distribution better for customers overall.</li></ul><ul><li>IPS repositories should be built from source manifest files. &nbsp;A consolidation is expected to create these manifests, and use them to populate a repository during the consolidation packaging build. &nbsp;RE will *NOT* accept repositories created by a build-time conversion from SVR4 packages using <tt>pkgsend</tt>(1) or the IPS <tt>importer.py</tt>.</li></ul><ul><li>Consolidations are expected to deliver all packages that are currently identified as from OpenSolaris/Solaris in their consolidation, including those that were previously renamed or obsoleted. &nbsp;If only a subset of packages will be delivered initially, please coordinate with the release lead to confirm that expectations are being met. &nbsp;This list can be retrieved from the current development package repository by reviewing the contents of <tt>consolidation/&lt;consolidation name&gt;/&lt;consolidation name&gt;-incorporation</tt>.</li></ul><ul><li>Consolidations must use <tt>pkgdepend</tt>(1) to generate dependencies. &nbsp;Additional manually-added dependencies are permitted, but the bulk of dependencies are expected to be generated automatically. &nbsp;In general, dependencies between files should first be generated using "<tt>pkgdepend generate</tt>". &nbsp;After this has completed, "<tt>pkgdepend resolve</tt>" can be run against all of the updated package manifests to build inter-package dependencies.</li></ul><ul><li>"<tt>pkgdepend resolve</tt>" must run cleanly for your consolidation.</li></ul><ul><li><tt>pkglint</tt>(1) is a command that can be used to check for common packaging errors. &nbsp;Consolidations should be delivering repositories that are "pkglint clean" to RE. &nbsp;Any errors should be discussed with the release lead and the IPS distribution team.</li></ul><ul><li><tt>pkgfmt</tt>(1) is another useful tool to make sure that all manifests have a common and generally readable format. &nbsp;We recommend, though do not require, consolidation makefiles run "<tt>pkgfmt -c</tt>" to ensure manifests stay formatted.</li></ul><ul><li>The extension <tt>.p5m</tt> is recommended, though not required, for your manifest files.</li></ul><h3 id="HRepositoryFormatRequirements"><span>Repository Format Requirements</span></h3><ul><li>In order to make testing for your gatelings easy, set your publisher name to a unique name for your consolidation. &nbsp;For example, ON uses <tt>on-nightly</tt>. &nbsp;RE will take care of translating this to the official publisher name during their build assembly.</li></ul><ul><li>Consolidations will no longer integrate individual packages for each architecture. &nbsp;Instead, they'll deliver an IPS repository to RE which contains the complete set of consolidation packages for that build.</li></ul><ul><li>Consolidations should deliver merged repositories and not separate ones for each architecture variant. The <tt>pkgmerge</tt>(1) command (available from build 160 as <tt>/usr/bin/pkgmerge</tt>) can be used to merge an <tt>i386</tt> and <tt>sparc</tt> repository together. All packages, even those available on only one architecture, should be merged so their contents is correctly variant tagged.</li></ul><ul><li>Consolidations should deliver a package named <tt>consolidation/&lt;consolidation name&gt;/&lt;consolidation name&gt;-all</tt> which has require dependencies on all packages delivered by that consolidation that are neither obsolete nor renamed. &nbsp;This group package should contain a valid <tt>pkg.description</tt> and <tt>pkg.summary</tt> as well as a <tt>info.classification</tt> value of the form "<tt>org.opensolaris.category.2008:Meta Packages/Group Packages</tt>" (a more specific classification is preferred if available.)</li></ul><h3 id="HPackageRequirements"><span>Package Requirements</span></h3><ul><li><tt>pkgmogrify</tt>(1) is a very useful tool to set consolidation-level defaults and transformations, such as the ones required in this section. &nbsp;It allows addition of package-level or even file-level defaults without editing each manifest.</li></ul><ul><li>Every package delivered by a consolidation must specify the consolidation it was delivered from in the <tt>org.opensolaris.consolidation</tt> key. &nbsp;If in doubt about the appropriate consolidation name, check the existing OpenSolaris/Solaris development builds for the correct setting. &nbsp;For example, <tt>set name=org.opensolaris.consolidation value=osnet</tt>.</li></ul><ul><li>Generally, each package delivered by a consolidation must depend on its consolidation incorporation. &nbsp;If this is not planned for your consolidation, discuss the details with the release lead.</li></ul><ul><li>Take care to set your variants correctly. &nbsp;Make sure that previously "hollow" packages deliver with the global zones variant.</li></ul><ul><li>Package names must currently be vetted by the OpenSolaris/Solaris release lead (ARC is expected to take over management of this namespace in the near future.)</li></ul><ul><li><tt>pkg.description</tt> and <tt>pkg.summary</tt> are expected to be useful for end-users. &nbsp;The package summary is a short description of the package, suitable for display on one line. &nbsp;Figure on 40 characters as a rough upper bound. &nbsp;The description should be roughly a short paragraph in length, perhaps including a couple of sentences. &nbsp;If there's no reason to have a description of that length, then there may be no need for one at all. &nbsp;Certainly having a description identical to the summary is not useful (in that case, drop the description.)</li></ul><ul><li>Packages must be classified with <tt>info.classification</tt>, and classifications must conform to one of the existing GUI classifications. &nbsp;The current list of GUI classifications can be found in <tt>/usr/share/package-manager/data/opensolaris.org.sections</tt>. &nbsp;New classifications are not permitted without coordination with the OpenSolaris/Solaris release lead.</li></ul><ul><li>The value of the <tt>info.classification</tt> attribute should be of the form "<tt>org.opensolaris.category.2008:&lt;category/subcategory&gt;</tt>" (the only valid year presently is 2008.)</li></ul><ul><li>Each package must have one or more license actions.</li></ul><ul><li>We recommend default owners, groups, and modes for common consolidation directory trees are set using <tt>pkgmogrify</tt> rather than repeated explicitly for each file.</li></ul><ul><li>Each package should continue to deliver the legacy action as delivered by OpenSolaris/Solaris today. &nbsp;This defines compatibility for SVR4 package dependencies, and does not need to be changed unless if the package boundaries are changing.</li></ul><h3 id="HObsoletes2CRenames2CandFileMoveRequirements"><span>Obsoletes, Renames, and File Move Requirements</span></h3><ul><li>Renames must be done with care. &nbsp;Specifically, any files with the preserve attribute set which belong to a renamed package must be explicitly mentioned in the new package. &nbsp;See the next point about preserved files which move between packages.</li></ul><ul><li>The first time a preserve=true file moves between packages, set "<tt>original_name</tt>" for that file to "&lt;original package&gt;:&lt;file&gt;".</li></ul><ul><li>Package obsoletion must be done with great care. &nbsp;Please make sure before doing any obsoletes that you've coordinated with any other consolidations which have dependencies on your packages. &nbsp;Package obsoletions are done by delivering an updated package within your repository. &nbsp;*ALL* packages which are renamed ancestors of an obsolete package must also be obsoleted in the same build. &nbsp;If this isn't done properly, your obsolete package will cause failures to upgrade for our customers. &nbsp;For example, if package A had been renamed to package B, and later package B and been renamed to package C, and then eventually package C is to be obsoleted, package A, B and C should be obsoleted in the same build.</li></ul><ul><li>When obsoleting a package, the branch id of the version should be set to the build the obsoletion took place (for example, 1.2.3,5.11-0.158 for build 158.) &nbsp;In addition to removing the obvious actions in the manifest, the <tt>pkg.description</tt>, <tt>pkg.summary</tt> and <tt>info.classification</tt> set actions should also be removed from all obsolete and renamed packages.</li></ul><hr/><h2 id="HTransitionProcess"><span>Transition Process</span></h2><p>Generally speaking, the transition from delivering SVR4 to delivering IPS repositories involves a few steps.</p><ol><li>Convert your consolidation per the steps above using a known baseline.</li><li>Compare using <tt>pkgdiff</tt>(1) that your deliveries do not deviate from the current OpenSolaris/Solaris baseline. &nbsp;Any differences should be scrutinized and potentially discussed with the release lead and the IPS distribution team.</li><li>Work with the IPS distribution team to do a test run and get a review. &nbsp;You can usually do a test run yourself by modifying <tt>src/util/distro-import/Makefile</tt> in the IPS gate to add new <tt>CONSOLIDATION_OPTIONS</tt> values for your consolidation. &nbsp;Contact the IPS team if you need help.</li><li>Coordinate final delivery with RE and the IPS distribution team so that your packages are no longer expected to be built by the IPS <tt>importer.py</tt> command.</li><li>Obsolete the old SVR4 packages by using RE's <tt>pkgobs</tt> command.</li></ol><hr/><h2 id="HOngoingRequirements"><span>Ongoing Requirements</span></h2><p>Once the initial transition is complete, all of the transition requirements remain. &nbsp;There are a few additional requirements to consider for some less-common consolidation operations.</p><ul><li>Package Refactor/Split<ul><li>Package boundaries should represent minimization boundaries. &nbsp;They represent a feature which is complete when combined with its dependencies. &nbsp;Optional components (e.g. graphical libraries, etc.) should be split into separate packages.</li><li>Many packages in the WOS today do not reflect these boundaries, so we expect some splitting and refactoring over time.</li><li>When splitting a package with existing legacy actions, care must be taken with those actions. &nbsp;If the legacy action reflects a common SVR4 package dependency, and that dependency is not satisfied by any one of the new packages, a legacy package might need to be created which specifies dependencies on each of the required new packages. &nbsp;Check with the release lead when doing significant refactoring work.</li><li>Work is currently in progress to create a new dependency type which will mitigate some of the problems with splitting packages.</li></ul></li></ul><ul><li>Move Between Consolidations<ul><li>Moving a package between consolidation needs to be done with some care. &nbsp;The same files cannot be delivered by 2 consolidations at the same time. &nbsp;These instructions provide a way to keep the WOS working, as well as not disrupt developers of either consolidation.</li><li>Put the package into the new consolidation. &nbsp;When doing this, don't change the package contents, the package name, or the package version. &nbsp;Explicitly put the old version number from the old consolidation into the package in the new consolidation.</li><li>*IN THE SAME BUILD* delete the package from the old consolidation.</li><li>After that WOS build has been available to developers for a bit (expect 2-3 builds will pass), do a putback to the new consolidation which changes the package version back to the default version, rather than the old one. &nbsp;At this point, you may make any changes necessary to the package contents.</li><li>At the time of this putback, send a FLAG DAY to the developers of the new consolidation telling them they must upgrade to at least the WOS build chosen above to be able to upgrade to this putback.&nbsp;</li></ul></li></ul><ul><li>Cross-Consolidation Dependency Introduction/Update<ul><li>Make sure cross-consolidation dependencies are available in a published WOS build before introducing the dependent code into a consolidation.</li><li>Integrating a dependency and a dependent in the same build causes problems for developers in the dependent consolidation. &nbsp;Only do this if Ã½ou have told developers in the dependent consolidation how to navigate the potentially difficult transition.</li></ul></li></ul>
</div>


    <div class="clearfloats"></div>
  </div>      <div id="xdocFooter">
  
                

       <div class="doc-tags" id="xdocTags">
        Tags:
        </div>
  
  <div id="xdocAuthors">
    <div class="xdocCreation">       Created by Liane Praza on 2010/02/03 15:32<br/>
          </div>
    <div class="xdocLastModification">       Last modified by David Comay on 2011/05/15 18:33
    </div>
  </div>
</div>
<div id="xwikidata" class="layoutsubsection">
        </div>  
    </div>      </div><div id="leftPanels" class="panels left">
                  <div class="panel expanded OSNav">
<h1 class="xwikipaneltitle" onclick="XWiki.togglePanelVisibility(this.parentNode, 'XWiki.XWikiGuest_Panels.OSNav');">Collectives</h1>
<div class="xwikipanelcontents">
<div id="xwikinavcontainer">
<span class="wikilink"><a href="/bin/view/Main/communities">Community Groups</a></span><br/>
<span class="wikilink"><a href="/bin/view/Main/projects">Projects</a></span><br/>
<span class="wikilink"><a href="/bin/view/Main/usergroups">User Groups</a></span>
</div><p/>
<script type="text/javascript">
document.observe('xwiki:dom:loaded', function() {
var obj = {div:'xwikinav',no:$count,height:250};
var acc = createAccordion(obj);
});
</script>
</div>
</div>
                        <div class="panel expanded OSDocs">
<h1 class="xwikipaneltitle" onclick="XWiki.togglePanelVisibility(this.parentNode, 'XWiki.XWikiGuest_Panels.OSDocs');">Project pkg Pages</h1>
<div class="xwikipanelcontents">
<ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+pkg/FAQ">FAQ</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+pkg/Mirroring">Mirroring repositories</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+pkg/Renamed">OpenSolaris Packages Renamed in Oracle Solaris 11 Express</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+pkg/add_package">Adding Packages to IPS</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+pkg/devinfo">Developer information</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+pkg/IPS+for+Consolidations">IPS for Consolidations</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+pkg/bestpractices">Best Practices</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+pkg/rtinotes">Integration Notes</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+pkg/documents">Documentation</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+pkg/May2008">Getting Started with IPS for 2008.05</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+pkg/Nov2008">Getting Started with IPS for 2008.11</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+pkg/Using+repositories">Repositories</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Project+pkg/files">Files</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Project+pkg/testing">Testing</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Project+pkg/testplan">Test Plan</a></span></li>
</ul></li>
</ul>
                              </div>
</div>
      </div>

  </div>
<div class="clearfloats"></div>
  </div></div><div id="footerglobal" class="layoutsection">
<div class="minwidth"></div>
<hr/>
        <div id="xwikiplatformversion">XWiki Enterprise 2.7.1.34853 - <a onclick="openURL('http://enterprise.xwiki.org/xwiki/bin/view/Main/Documentation', '_blank'); return false;" href="http://www.xwiki.org/xwiki/bin/view/Main/Documentation">Documentation</a></div>
<br/>
  
      <div id="footer">
    <p>
                <a href="https://markebrooks.github.io/bin/view/Main/tou/">Terms of Use</a>
                |
                <a href="http://www.oracle.com/html/privacy.html">Privacy</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/trademark/">Trademarks</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/copyrights/">Copyright Policy</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/site_guidelines/">Site Guidelines</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/site-map/">Site Map</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/help/">Help</a>
                <br/>Your use of this web site or any of its content or software indicates your agreement to be bound by these Terms of Use.<br/>
                &copy; 2013, Oracle Corporation and/or its affiliates.<br/><img src="https://markebrooks.github.io:443/static/images/logo_oracle_footer.gif" alt="Oracle Logo"/>
            </p>
        </div>

  
</div>

</div></div></body>
</html>
