<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
                    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
                                    <title>OpenSolaris DSCM Evaluation: Mercurial (Community Group tools.dcm_evaluation_mercurial) - XWiki</title>
                <meta http-equiv="Content-Script-Type" content="text/javascript" />
                        <meta http-equiv="imagetoolbar" content="no"/>
                      <link rel="alternate" type="application/x-wiki" title="Edit" href="/bin/edit/Community+Group+tools/dcm_evaluation_mercurial" />
                    <link rel="canonical" href="/bin/view/Community+Group+tools/dcm_evaluation_mercurial" />
                            <meta name="document" content="Community Group tools.dcm_evaluation_mercurial"/>
    <meta name="wiki" content="xwiki"/>
    <meta name="space" content="Community Group tools"/>
    <meta name="page" content="dcm_evaluation_mercurial"/>
    <meta name="version" content="1.1"/>
    <meta name="restURL" content="/rest/wikis/xwiki/spaces/Community+Group+tools/pages/dcm_evaluation_mercurial"/>
                <meta name="gwt:property" content="locale=en" />
                <meta name="revisit-after" content="7 days" />
<meta name="description" content="OpenSolaris DSCM Evaluation: Mercurial" />
<meta name="keywords" content="wiki " />
<meta name="distribution" content="GLOBAL" />
<meta name="rating" content="General" />
<meta name="author" content="admin" />
<meta http-equiv="reply-to" content="" />
<meta name="language" content="en" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="alternate" type="application/rss+xml" title="Wiki Feed RSS" href="/bin/view/Main/WebRss?xpage=rdf" />
<link rel="alternate" type="application/rss+xml" title="Blog RSS Feed" href="/bin/view/Blog/GlobalBlogRss?xpage=plain" />
<link rel="shortcut icon" href="/resources/icons/oso/icon.png">
                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
<link href="https://markebrooks.github.io/static/css/stylesheet.css" rel="stylesheet" type="text/css" media="all" />
<link href="/bin/skin/skins/colibri/style.css?colorTheme=ColorThemes.Oso" rel="stylesheet" type="text/css" media="all" />
<link href="/bin/skin/skins/colibri/print.css" rel="stylesheet" type="text/css" media="print" />
        <!--[if IE]>
  <link href="/bin/skin/skins/colibri/ie%2Dall.css" rel="stylesheet" type="text/css" />
<![endif]-->
<!--[if IE 6]>
  <link href="/bin/skin/skins/colibri/ie%2D6.css" rel="stylesheet" type="text/css" />
<![endif]-->
<link rel='stylesheet' type='text/css' href='/bin/ssx/AnnotationCode/Settings?language=en'/><link rel='stylesheet' type='text/css' href='/bin/ssx/AnnotationCode/Style?language=en'/><link rel='stylesheet' type='text/css' href='/bin/ssx/XWiki/SharePage?language=en'/>
<link rel='stylesheet' type='text/css' href='/bin/skin/resources/js/xwiki/widgets/modalPopup.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/js/xwiki/widgets/jumpToPage.css?language=en'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/uicomponents/widgets/confirmationBox.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/uicomponents/widgets/notification.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/skins/colibri/resources/uicomponents/viewers/tags.css'/>

    
    <link href="/bin/skin/resources/js/xwiki/suggest/ajaxSuggest.css" rel="stylesheet" type="text/css" />
<link href="/bin/skin/resources/js/xwiki/lightbox/lightbox.css" rel="stylesheet" type="text/css" />
<!--[if IE]>
  <link href="/bin/skin/resources/js/xwiki/lightbox/lightboxIE.css" rel="stylesheet" type="text/css" />
<![endif]-->












<script type="text/javascript" src="/resources/js/prototype/prototype.js"></script>
<script type="text/javascript" src="/bin/skin/resources/js/xwiki/xwiki.js"></script>
<script type="text/javascript">
// <![CDATA[
XWiki.webapppath = "";
XWiki.servletpath = "bin/";
XWiki.contextPath = "";
XWiki.mainWiki = "xwiki";
XWiki.currentWiki = "xwiki";
XWiki.currentSpace = "Community Group tools";
XWiki.currentPage = "dcm_evaluation_mercurial";
XWiki.editor = "";
XWiki.viewer = "";
XWiki.contextaction = "view";
XWiki.docisnew = false;
XWiki.docsyntax = "xwiki/2.0";
XWiki.blacklistedSpaces = [ "Import","Panels","Scheduler","Stats","XAppClasses","XAppSheets","XAppTemplates","XWiki","WatchCode","WatchSheets","XApp","WatchAdmin","Watch","ColorThemes","AnnotationCode" ];
XWiki.hasEdit = false;
XWiki.hasProgramming = false;
XWiki.hasBackupPackImportRights = false;
window.docviewurl = "/bin/view/Community+Group+tools/dcm_evaluation_mercurial";
window.docediturl = "/bin/edit/Community+Group+tools/dcm_evaluation_mercurial";
window.docsaveurl = "/bin/save/Community+Group+tools/dcm_evaluation_mercurial";
window.docgeturl = "/bin/get/Community+Group+tools/dcm_evaluation_mercurial";
// ]]>
</script>
<script type='text/javascript' src='/bin/skin/resources/js/scriptaculous/effects.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/js/xwiki/widgets/modalPopup.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/js/xwiki/widgets/jumpToPage.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/confirmationBox.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/confirmedAjaxRequest.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/notification.js' defer='defer'></script>
<script type='text/javascript' src='/resources/uicomponents/widgets/list/xlist.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/xwiki/suggest/ajaxSuggest.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/skins/colibri/resources/uicomponents/viewers/tags.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/scriptaculous/scriptaculous.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/xwiki/accordion/accordion.js' defer='defer'></script>

<script type='text/javascript' src='/bin/jsx/XWiki/WebDAV?language=en' defer='defer'></script>
<script type='text/javascript' src='/bin/jsx/AnnotationCode/Settings?language=en' defer='defer'></script>
<script type='text/javascript' src='/bin/jsx/AnnotationCode/Script?language=en' defer='defer'></script>

<script type="text/javascript" src="/resources/js/xwiki/compatibility.js" defer="defer"></script>

  </head>
  <body id="body" class="wiki-xwiki space-Community_Group_tools viewbody hideright">
<div id="xwikimaincontainer">
<div id="xwikimaincontainerinner">

  <div id="menuview">
    <div id="mainmenu" class="layoutsubsection actionmenu">
<strong id="xwikimenutitle" class="hidden">General Actions:</strong>
<div class="rightmenu">
      <div id="tmLogin" class="tmLogin topmenuentry ">
   <a class="tme" href="https://auth.opensolaris.org/login.action?targetUrl=http%3A%2F%2Fmarkebrooks.github.io%2Fbin%2Fview%2FCommunity%2BGroup%2Btools%2Fdcm_evaluation_mercurial"><strong>Log-in</strong></a>
  </div>
  </div>
<div class="leftmenu">
  <div id="tmWiki" class="tmWiki topmenuentry hasIcon">
   <a class="tme" href="/bin/view/Main/"><strong>Wiki</strong></a>
  </div>
  <div id="tmSpace" class="tmSpace topmenuentry dropdownmenuentry  hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme" href="/bin/view/Community+Group+tools/"><strong>Community Group tools</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
                <span class="submenuitem "><a href="/bin/view/Main/SpaceIndex?space=Community+Group+tools" id="tmSpaceDocumentIndex" class="tmSpaceDocumentIndex">Document Index</a></span>
    </span></div>

<div id="tmSubSites" class="tmSubSites topmenuentry dropdownmenuentry dropdownnolink hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>Subsites</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
<span class="submenuitem hasIcon"><a href="https://cr.opensolaris.org/" id="tmCR" class="tmCR">Code Reviews</a></span>
<span class="submenuitem hasIcon"><a href="http://repo.opensolaris.org/" id="tmRepo" class="tmRepo">SCM Management</a></span>
<span class="submenuitem hasIcon"><a href="http://pkg.opensolaris.org/" id="tmPkg" class="tmPkg">Package Search</a></span>
<span class="submenuitem hasIcon"><a href="http://bugs.opensolaris.org/" id="tmBugs" class="tmBugs">Bugster</a></span>
<span class="submenuitem hasIcon"><a href="http://defect.opensolaris.org/" id="tmDefect" class="tmDefect">Bugzilla</a></span>
<span class="submenuitem hasIcon"><a href="http://test.opensolaris.org/" id="tmTest" class="tmTest">Test Machines</a></span>
<span class="submenuitem hasIcon"><a href="http://planet.opensolaris.org/" id="tmPlanet" class="tmPlanet">Planet</a></span>
<span class="submenuitem hasIcon"><a href="http://mail.opensolaris.org/" id="tmMail" class="tmMail">Mailing Lists</a></span>
<span class="submenuitem hasIcon"><a href="http://poll.opensolaris.org/" id="tmPoll" class="tmPoll">Elections &amp; Polls</a></span>
<span class="submenuitem hasIcon"><a href="http://arc.opensolaris.org/" id="tmArc" class="tmArc">ARC Case Logs</a></span>
<span class="submenuitem hasIcon"><a href="http://jucr.opensolaris.org/" id="tmJucr" class="tmJucr">Source Juicer</a></span>
<span class="submenuitem hasIcon"><a href="http://pkgfactory.opensolaris.org/" id="tmPkgfactory" class="tmPkgfactory">Package Factory</a></span>
<span class="submenuitem hasIcon"><a href="http://auth.opensolaris.org/" id="tmAuth" class="tmAuth">Auth</a></span>
</span></div>

</div>
</div>

  </div>
 <div id="header" class="layoutsection">
<div class="minwidthb"></div>

  <div id="header">
    <table style="width: 100%;">
        <tr>
            <td style="width: 1%;">
                 <a href="https://markebrooks.github.io/bin/view/Main/"><div id="logo"></div></a>  
            </td>
            <td id="logo-text" style="width: 1%;">
                Solaris
            </td>         
            <td style="width: 98%;">
                <table id="loading-indicator">
                    <tr>
                        <td><img src="https://markebrooks.github.io:443/static/images/busy.gif"
                                 alt="Loading" title="Loading"/></td>
                        <td>Loading...</td>
                    </tr>
                </table>
            </td>
            <td style="width: 1%;">
                <table id="iconbar">
                    <tr>
                    <td><a id="collectives-icon" href="https://markebrooks.github.io/bin/view/Main/collectives">
                        Collectives</a></td>
                    <td><a id="discussions-icon" href="https://markebrooks.github.io/bin/view/Main/discussions">
                            Discussions</a></td>
                    <td><a id="documentation-icon" href="https://markebrooks.github.io/bin/view/Main/documentation">
                            Documentation</a></td>
                    <td><a id="download-icon" href="https://markebrooks.github.io/bin/view/Main/downloads">
                            Download</a></td>
                    <td><a id="source-browser-icon" href="http://src.opensolaris.org/source">
                            Source Browser</a></td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>

 </div> 
  <div id="globallinks">
    <form action="/bin/view/Main/Search">
      <div class="globalsearch">
        <label class="hidden" for="headerglobalsearchinput">Search</label><input class="globalsearchinput withTip" id="headerglobalsearchinput" type="text" name="text" value="search..." size="15"/><input class="button" type="image" value="Go" alt="Go" src="/resources/icons/xwiki/search.png"/>
      </div>
    </form>
  </div> <div style="float:left;">

                

   <div id="hierarchy">
                              <a href='/bin/view/Community+Group+tools/scm'>OpenSolaris Source Code Management</a> <span class='separator'>&#187;</span> <span class='current'>OpenSolaris DSCM Evaluation: Mercurial</span>
                </div>

</div>
  <span class="glink" id="headerlanguages" style="float:right">
        <a href="/bin/view/Community+Group+tools/dcm_evaluation_mercurial?language=en" class="language-default language-current">en</a>
    </span>


<div class="contenthideright" id="contentcontainer">
<div id="contentcontainerinner">
<div class="leftsidecolumns">
  <div id="contentcolumn"> 
          <div class="main layoutsubsection">
      <div id="contentmenu" class="actionmenu">
    <strong id="xwikicontentmenutitle" class="hidden">Page Actions:</strong>
<div class="rightmenu">
</div>
<div class="leftmenu">
  <div id="tmExport" class="tmExport topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>Export</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="/bin/export/Community+Group+tools/dcm_evaluation_mercurial?format=pdf&amp;language=en" id="tmExportPdf" class="tmExportPdf">Export as PDF</a></span>
  <span class="submenuitem "><a href="/bin/export/Community+Group+tools/dcm_evaluation_mercurial?format=rtf&amp;language=en" id="tmExportRtf" class="tmExportRtf">Export as RTF</a></span>
  <span class="submenuitem "><a href="/bin/export/Community+Group+tools/dcm_evaluation_mercurial?format=html&amp;language=en" id="tmExportHtml" class="tmExportHtml">Export as HTML</a></span>
    </span></div>

<div id="tmShow" class="tmShow topmenuentry dropdownmenuentry  " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme" href="/bin/view/Community+Group+tools/dcm_evaluation_mercurial?viewer=code&amp;language=en"><strong>View</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
<span class="submenuitem "><a href="/bin/view/Community+Group+tools/dcm_evaluation_mercurial?viewer=comments&amp;language=en" id="tmViewComments" class="tmViewComments">Comments</a></span>
<span class="submenuitem "><a href="/bin/view/Community+Group+tools/dcm_evaluation_mercurial?viewer=attachments&amp;language=en" id="tmViewAttachments" class="tmViewAttachments">Attachments</a></span>
<span class="submenuitem "><a href="/bin/view/Community+Group+tools/dcm_evaluation_mercurial?viewer=history&amp;language=en" id="tmViewHistory" class="tmViewHistory">History</a></span>
<span class="submenuitem "><a href="/bin/view/Community+Group+tools/dcm_evaluation_mercurial?viewer=information&amp;language=en" id="tmViewInformation" class="tmViewInformation">Information</a></span>
<span class="submenuitem "><a href="/bin/view/Community+Group+tools/dcm_evaluation_mercurial?viewer=code&amp;language=en" id="tmViewSource" class="tmViewSource">View Source</a></span>
</span></div>

  <div id="tmMoreActions" class="tmMoreActions topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>More actions</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="/bin/view/Community+Group+tools/dcm_evaluation_mercurial?xpage=print&amp;language=en" id="tmPrintPreview" class="tmPrintPreview">Print preview</a></span>
          <span class="submenuitem "><a href="/bin/view/Community+Group+tools/dcm_evaluation_mercurial?xpage=copy" id="tmActionCopy" class="tmActionCopy">Copy</a></span>
      </span></div>
</div>

    </div>
    <div id="mainContentArea">
      








                      
<div id="document-title"><h1>OpenSolaris DSCM Evaluation: Mercurial</h1></div>





              <div id="document-info">
    <div>
          </div>
    <div class="clearfloats"></div>
  </div>

<div id="xwikicontent">
<h1 class='hidden'>OpenSolaris DSCM Evaluation: Mercurial</h1><h2 id="HA.ToolInformation"><span>A. Tool Information</span></h2><p>Mercurial version 0.8.</p><h2 id="HB.ConfigurationDetails"><span>B. Configuration Details</span></h2><h3 id="H1.CPUarchitectureandmachinespecifics"><span>1. CPU architecture and machine specifics</span></h3><pre>

kosh$ psrinfo -v
Status of virtual processor 0 as of: 03/30/2006 14:15:16
  on-line since 03/09/2006 16:44:59.
  The i386 processor operates at 1600 MHz,
        and has an i387 compatible floating point processor.
kosh$ uname -a
SunOS kosh 5.11 snv_35 i86pc i386 i86pc

</pre><h3 id="H2.Memoryavailable"><span>2. Memory available</span></h3><pre>

Memory size: 1024 Megabytes

</pre><h3 id="H3.Sizeoftherepository28space29"><span>3. Size of the repository (space)</span></h3><p>641MB, including working directory. This repository mirrors ON's internal Teamware workspace as of 2006-04-11 16:52:19Z and has history back to build 18 (shortly after the OpenSolaris launch).</p><h3 id="H4.Numberoffilesintherepository"><span>4. Number of files in the repository</span></h3><p>43,311.</p><h3 id="H5.Averagenumberofdeltasperfile"><span>5. Average number of deltas per file</span></h3><p>1.3.</p><p>More details: 1,884 changesets, 57,173 changes. (57173/43311=1.3)</p><h2 id="HC.EvaluationAreas"><span>C. Evaluation Areas</span></h2><h3 id="H1.OperationFunctionality"><span>1. Operation Functionality</span></h3><p>(Refer to the Requirements Document for detail.)</p><h4 id="He1.unbiasedanddisconnecteddistribution"><span>e1. unbiased and disconnected distribution</span></h4><p>Mercurial implements a model of independent repositories, though a repository can be configured to have a <span class="wikiexternallink"><a href="http://www.opensolaris.org/jive/message.jspa?messageID=30643&amp;tstart=0">de-facto parent</a></span>.</p><p>Mercurial supports updates between two repositories with a common ancestor. If child-2 pulls from child-1 and has one or more changesets that aren't in child-1 (a common scenario in ON development), child-2 will have to do an "update -m", even if the changes are non-conflicting. Unlike Teamware, the merge must then be explicitly committed. (This is a feature, since it means you can test the merge before committing it, but it seems likely to cause confusion for Sun engineers. If we use Mercurial Queues for most development work, this issue probably goes away.)</p><p>The "disconnected-use" requirements are all satisfied.</p><h4 id="He2.networkedoperation"><span>e2. networked operation</span></h4><p>As mentioned in the requirements document, Mercurial supports remote access via <span class="box code">ssh</span>. Pulls can also be done over HTTP. (And of course NFS can be used for pushes and pulls).</p><h4 id="He3.interfacestabilityandcompleteness"><span>e3. interface stability and completeness</span></h4><h5 id="Hstorage"><span>storage</span></h5><p>The storage representation appears to be well-documented. Certainly there's more <span class="wikiexternallink"><a href="http://www.selenic.com/mercurial/wiki/index.cgi/Design">information</a></span> on the Mercurial website than we've been able to find for SCCS's storage representation.</p><p>Mercurial's storage representation does not use Unix i-numbers, so snapshots such as those provided by ZFS or Network Appliance filers should not cause problems.</p><p>A ZFS snapshot can be used as the source for a Mercurial clone operation.</p><p>At least some of the on-disk data structures do not appear to be versioned. This is a potential hazard. At least one storage representation change is planned: "RevlogNG", which is <span class="wikiexternallink"><a href="http://marc.theaimsgroup.com/?l=mercurial&amp;m=114375669405791&amp;w=2">planned for Mercurial 0.9</a></span>. This change is expected to address the versioning issue.</p><p>On-disk data structures are binary files, but I had no problems using the same repository from both SPARC and x86 systems. Binary files give improved performance, but in the unlikely event that manual repairs are needed, we'll need a binary editing program.</p><p>Mercurial does not provide its own access control mechanism for controlling access to subtrees within a repository. While it might be possible to restrict user access to certain subtrees using filesystem ACLs, it would probably be better to use various pre-operation hooks (e.g., <span class="box code">pretxnchangegroup</span>) to implement that sort of control. Bryan O'Sullivan reports that there is a recipe in the wiki for doing <span class="wikiexternallink"><a href="http://www.selenic.com/mercurial/wiki/index.cgi/SharedSSH">access control over <span class="box code">ssh</span></a></span>, without needing to create a separate user account for everyone.</p><h5 id="Hcommand-lineinterface2Chooks"><span>command-line interface, hooks</span></h5><p>The <span class="wikiexternallink"><a href="http://www.selenic.com/mercurial/hg.1.html">command-line</a></span> and <span class="wikiexternallink"><a href="http://www.selenic.com/mercurial/hgrc.5.html">hook</a></span> interfaces appear to be adequately documented.</p><p>One nit: the current documentation appears to reflect the current development version of the code, rather than the most recent release<span class="wikilink"><a href="#docexample">[1]</a></span>; there is nothing in the documentation to clarify what version it applies to. If OpenSolaris uses Mercurial, we may wish to place snapshots of the code and documentation on opensolaris.org to avoid confusion.</p><p>The hook infrastructure invokes the named hook(s) with a few tokens such as the changeset ID passed in via the environment. This means that the hook may need to invoke various Mercurial commands to find out more about the changeset. A potential issue is that it may not always be possible to get the desired information back from the existing Mercurial command-line interfaces. For example, "hg log" gives the old and new names of a renamed file, along with the names of any other files involved in the changeset, but it can't tell you that file "foo" was renamed to "bar". Fortunately, all the known examples of this problem are considered bugs and have fixes planned.</p><p>Bryan O'Sullivan reports that the Mercurial team is also considering support for Python hooks that would run in the Mercurial process.</p><p>Lock-reentrancy does not appear to be a problem. Mercurial does not need read locks, and hooks are currently limited to only doing read operations.</p><p>At least one unexpected behavior was noted while testing: pushing a changeset from repository A to repository B caused A's <span class="box code">commit</span> hook to fire. This appears to be a <span class="wikiexternallink"><a href="http://www.selenic.com/mercurial/bts/issue113">known bug</a></span>.</p><h5 id="Hnetworkprotocol28s29"><span>network protocol(s)</span></h5><p>There is some documentation on the <span class="wikiexternallink"><a href="http://www.selenic.com/mercurial/wiki/index.cgi/WireProtocol">network protocol</a></span>, though it's a bit sketchy. The protocol is versioned.</p><h4 id="He4.standardoperationsandtransactions"><span>e4. standard operations and transactions</span></h4><p>Mercurial operates on files. Rename or remove of a directory is translated into a rename or remove on the directory's contents.</p><p>Rename is implemented as copy and delete. More work is needed here: merges don't track renames, and rename conflicts are not detected.</p><p>Deleting a file and creating a new file with the same path is supported. The new instance includes the history of the old instance.</p><p>Mercurial supports the scenario where a file is deleted in one workspace, the deletion is backed out in the "gate" repository, and the file is edited concurrently in a second workspace. The backout was done via</p><blockquote><p>&nbsp;&nbsp;$ hg revert -r lastrev</p></blockquote><p>&nbsp;$ hg add file<br/>&nbsp;$ hg commit -m "back out deletion of file"</p><p>where lastrev refers to the last changeset before the deletion.</p><p>The merge in the second workspace was a little messy: after the "update -m", the working copy of the file had the old and new versions of the file concatenated together.</p><p>Deleted files can still be referenced using the path and the -r option, for example</p><blockquote><p>&nbsp;&nbsp;$ hg cat -r rev file</p></blockquote><p>&nbsp;$ hg diff -r rev1 -r rev2 file</p><h4 id="He5.per-changesetmetadata"><span>e5. per-changeset metadata</span></h4><p>Mercurial associates a text comment with each changeset; this is added as part of the <span class="box code">commit</span> operation. The first line of the comment is displayed as a summary of the changeset for operations like "log", though the full comment can be displayed with the "-v" option. This is somewhat inconsistent with the current conventions for putbacks into ON; we'll want to think about what we want to do. Mercurial supports customization of "log" output, so that's one option.</p><h4 id="Hc6.easeofuse"><span>c6. ease of use</span></h4><p>Although I haven't built Mercurial from source, Bryan O'Sullivan reports</p><blockquote><p>&nbsp;&nbsp;It builds out of the box on Solaris 10, once the system Python's Makefile is fixed to use gcc.</p></blockquote><p>The primary interface is the <span class="box code">hg</span> command, with subcommands for the various options. This is pretty standard.</p><p>The model is straightforward: you <span class="box code">commit</span> one or more changesets to the repository that you're working in, then you <span class="box code">push</span> or <span class="box code">pull</span> them to other repositories. Note that pushing (or pulling) a changeset updates the target repository, but updating the target's source tree is a separate step ("hg update").</p><p>Mercurial offers subcommands specifically for generating and accepting source patches.</p><p>Mercurial supplies an HTTP server, as well. This can be used for browsing and for pulls over HTTP.</p><p>Support for backouts: the <span class="box code">revert</span> subcommand can be used to back out all changesets back to a particular revision. Backing out a changeset after the files have been subsequently modified is less straightforward. There is currently an <span class="wikiexternallink"><a href="http://www.selenic.com/mercurial/bts/issue146">open feature request</a></span> for this. In the meantime, one can generate a source patch for the changeset that you want to back out, then apply the patch using "patch -R".</p><p>By default, "hg status" lists files that aren't tracked in the repository (e.g., compiled binaries, editor backup files). While this is not peculiar to Mercurial, it's a change from Teamware, and it will generate an impossible level of noise in most real-life scenarios with ON. While doing "dmake clobber" will reduce the noise considerably<span class="wikilink"><a href="#clobber">[2]</a></span>, that is inconvenient for a tree the size of ON. Mercurial does provide mechanisms to filter out noise (e.g., <span class="box code">status</span> subcommand options, and <span class="xwikirenderingerror">Failed to execute the [code] macro</span><span class="xwikirenderingerrordescription hidden"><tt class="wikimodel-verbatim">org.xwiki.rendering.macro.MacroExecutionException: Failed to highlight content
	at org.xwiki.rendering.internal.macro.code.CodeMacro.parseContent(CodeMacro.java:108)
	at org.xwiki.rendering.internal.macro.code.CodeMacro.parseContent(CodeMacro.java:48)
	at org.xwiki.rendering.macro.box.AbstractBoxMacro.execute(AbstractBoxMacro.java:125)
	at org.xwiki.rendering.macro.box.AbstractBoxMacro.execute(AbstractBoxMacro.java:51)
	at org.xwiki.rendering.internal.transformation.macro.MacroTransformation.transformOnce(MacroTransformation.java:184)
	at org.xwiki.rendering.internal.transformation.macro.MacroTransformation.transform(MacroTransformation.java:129)
	at org.xwiki.rendering.internal.transformation.DefaultTransformationManager.performTransformations(DefaultTransformationManager.java:72)
	at com.xpn.xwiki.doc.XWikiDocument.performSyntaxConversion(XWikiDocument.java:7483)
	at com.xpn.xwiki.doc.XWikiDocument.performSyntaxConversion(XWikiDocument.java:7432)
	at com.xpn.xwiki.doc.XWikiDocument.getRenderedContent(XWikiDocument.java:835)
	at com.xpn.xwiki.doc.XWikiDocument.getRenderedContent(XWikiDocument.java:783)
	at com.xpn.xwiki.doc.XWikiDocument.getRenderedContent(XWikiDocument.java:878)
	at com.xpn.xwiki.api.Document.getRenderedContent(Document.java:545)
	at sun.reflect.GeneratedMethodAccessor325.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.velocity.util.introspection.UberspectImpl$VelMethodImpl.doInvoke(UberspectImpl.java:389)
	at org.apache.velocity.util.introspection.UberspectImpl$VelMethodImpl.invoke(UberspectImpl.java:378)
	at org.apache.velocity.runtime.parser.node.ASTMethod.execute(ASTMethod.java:270)
	at org.apache.velocity.runtime.parser.node.ASTReference.execute(ASTReference.java:252)
	at org.apache.velocity.runtime.parser.node.ASTReference.value(ASTReference.java:493)
	at org.apache.velocity.runtime.parser.node.ASTExpression.value(ASTExpression.java:71)
	at org.apache.velocity.runtime.parser.node.ASTSetDirective.render(ASTSetDirective.java:142)
	at org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:72)
	at org.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:336)
	at org.apache.velocity.runtime.parser.node.ASTIfStatement.render(ASTIfStatement.java:106)
	at org.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:336)
	at org.xwiki.velocity.internal.DefaultVelocityEngine.evaluate(DefaultVelocityEngine.java:196)
	at org.xwiki.velocity.internal.DefaultVelocityEngine.evaluate(DefaultVelocityEngine.java:161)
	at com.xpn.xwiki.render.XWikiVelocityRenderer.evaluate(XWikiVelocityRenderer.java:116)
	at com.xpn.xwiki.XWiki.evaluateTemplate(XWiki.java:1895)
	at com.xpn.xwiki.XWiki.parseTemplate(XWiki.java:1833)
	at com.xpn.xwiki.api.XWiki.parseTemplate(XWiki.java:860)
	at sun.reflect.GeneratedMethodAccessor137.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.velocity.util.introspection.UberspectImpl$VelMethodImpl.doInvoke(UberspectImpl.java:389)
	at org.apache.velocity.util.introspection.UberspectImpl$VelMethodImpl.invoke(UberspectImpl.java:378)
	at org.apache.velocity.runtime.parser.node.ASTMethod.execute(ASTMethod.java:270)
	at org.apache.velocity.runtime.parser.node.ASTReference.execute(ASTReference.java:252)
	at org.apache.velocity.runtime.parser.node.ASTReference.render(ASTReference.java:332)
	at org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:72)
	at org.apache.velocity.runtime.directive.VelocimacroProxy.render(VelocimacroProxy.java:212)
	at org.apache.velocity.runtime.directive.RuntimeMacro.render(RuntimeMacro.java:247)
	at org.apache.velocity.runtime.parser.node.ASTDirective.render(ASTDirective.java:175)
	at org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:72)
	at org.apache.velocity.runtime.parser.node.ASTIfStatement.render(ASTIfStatement.java:87)
	at org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:72)
	at org.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:336)
	at org.apache.velocity.runtime.parser.node.ASTIfStatement.render(ASTIfStatement.java:106)
	at org.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:336)
	at org.xwiki.velocity.internal.DefaultVelocityEngine.evaluate(DefaultVelocityEngine.java:196)
	at org.xwiki.velocity.internal.DefaultVelocityEngine.evaluate(DefaultVelocityEngine.java:161)
	at com.xpn.xwiki.render.XWikiVelocityRenderer.evaluate(XWikiVelocityRenderer.java:116)
	at com.xpn.xwiki.XWiki.parseTemplate(XWiki.java:1943)
	at com.xpn.xwiki.XWiki.evaluateTemplate(XWiki.java:1856)
	at com.xpn.xwiki.web.Utils.parseTemplate(Utils.java:154)
	at com.xpn.xwiki.web.XWikiAction.execute(XWikiAction.java:226)
	at com.xpn.xwiki.web.XWikiAction.execute(XWikiAction.java:117)
	at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:431)
	at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:236)
	at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
	at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at com.xpn.xwiki.web.ActionFilter.doFilter(ActionFilter.java:129)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at com.xpn.xwiki.wysiwyg.server.filter.ConversionFilter.doFilter(ConversionFilter.java:152)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.xwiki.container.servlet.filters.internal.SavedRequestRestorerFilter.doFilter(SavedRequestRestorerFilter.java:218)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.xwiki.container.servlet.filters.internal.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:112)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:433)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
	at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:568)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
	at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:354)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.Thread.run(Thread.java:662)
Caused by: Traceback (most recent call last):
  File "&lt;string&gt;", line 3, in &lt;module&gt;
  File "&lt;string&gt;", line 3, in &lt;module&gt;
  File "__pyclasspath__/pygments/lexers/__init__.py", line 199, in guess_lexer
  File "__pyclasspath__/pygments/util.py", line 116, in text_analyse
TypeError: float() argument must be a string or a number

	at org.python.core.PyException.fillInStackTrace(PyException.java:70)
	at java.lang.Throwable.&lt;init&gt;(Throwable.java:181)
	at java.lang.Exception.&lt;init&gt;(Exception.java:29)
	at java.lang.RuntimeException.&lt;init&gt;(RuntimeException.java:32)
	at org.python.core.PyException.&lt;init&gt;(PyException.java:46)
	at org.python.core.PyException.&lt;init&gt;(PyException.java:43)
	at org.python.core.PyException.&lt;init&gt;(PyException.java:61)
	at org.python.core.Py.TypeError(Py.java:221)
	at org.python.core.PyFloat.float_new(PyFloat.java:69)
	at org.python.core.PyFloat$exposed___new__.new_impl(Unknown Source)
	at org.python.core.PyType.invokeNew(PyType.java:466)
	at org.python.core.PyType.type___call__(PyType.java:1558)
	at org.python.core.PyType.__call__(PyType.java:1548)
	at org.python.core.PyObject.__call__(PyObject.java:387)
	at org.python.core.PyObject.__call__(PyObject.java:391)
	at pygments.util$py.text_analyse$9(__pyclasspath__/pygments/util.py:116)
	at pygments.util$py.call_function(__pyclasspath__/pygments/util.py)
	at org.python.core.PyTableCode.call(PyTableCode.java:165)
	at org.python.core.PyBaseCode.call(PyBaseCode.java:134)
	at org.python.core.PyFunction.__call__(PyFunction.java:317)
	at pygments.lexers$py.guess_lexer$10(__pyclasspath__/pygments/lexers/__init__.py:206)
	at pygments.lexers$py.call_function(__pyclasspath__/pygments/lexers/__init__.py)
	at org.python.core.PyTableCode.call(PyTableCode.java:165)
	at org.python.core.PyBaseCode.call(PyBaseCode.java:301)
	at org.python.core.PyFunction.function___call__(PyFunction.java:376)
	at org.python.core.PyFunction.__call__(PyFunction.java:371)
	at org.python.pycode._pyx18119115.f$0(&lt;string&gt;:5)
	at org.python.pycode._pyx18119115.call_function(&lt;string&gt;)
	at org.python.core.PyTableCode.call(PyTableCode.java:165)
	at org.python.core.PyCode.call(PyCode.java:18)
	at org.python.core.Py.runCode(Py.java:1261)
	at org.python.core.Py.exec(Py.java:1305)
	at org.python.util.PythonInterpreter.exec(PythonInterpreter.java:206)
	at org.xwiki.rendering.internal.parser.pygments.PygmentsParser.getLexer(PygmentsParser.java:267)
	at org.xwiki.rendering.internal.parser.pygments.PygmentsParser.highlight(PygmentsParser.java:222)
	at org.xwiki.rendering.internal.parser.pygments.PygmentsParser.highlight(PygmentsParser.java:193)
	at org.xwiki.rendering.internal.macro.code.CodeMacro.highlight(CodeMacro.java:146)
	at org.xwiki.rendering.internal.macro.code.CodeMacro.parseContent(CodeMacro.java:105)
	... 92 more
</tt></span> files), but it's not clear they can be used to give the desired results (show untracked source files and makefiles, but ignore all other untracked files).</p><p>Files should be imported with read-write permission. Mercurial keeps track of the permissions, and it complains if you try to update a read-only file (e.g., after a push or pull).</p><h5 id="Hmerging"><span>merging</span></h5><p>Mercurial's default for resolving conflicts is the <span class="box code">hgmerge</span> script. This script checks for the presence of various third-party conflict resolver programs, such as <span class="box code">tkdiff</span>. At least some of these programs (e.g., <span class="box code">tkdiff</span>) offer functionality that is comparable to what is available with Teamware and Filemerge. It should be easy to add Filemerge support to <span class="box code">hgmerge</span> if that's desired.</p><p>If <span class="box code">hgmerge</span> can't find any of the expected conflict resolvers, it falls back to using <span class="box code">diff(1)</span> and <span class="box code">patch(1)</span>. If <span class="box code">patch</span> rejects any part of the diffs, <span class="box code">hgmerge</span> invokes an editor so that the user can manually repair the conflict.</p><p>While first experimenting with Mercurial, I found it very easy to get my repository into a state where it would keep complaining about "outstanding uncommitted changes", but it was hard to figure out how to get out of that state. (Answer: use "hg update -C".) This probably needs to go into a FAQ.</p><h5 id="Hmismerges"><span>mismerges</span></h5><p>The current version of <span class="box code">hgmerge</span> has some problems that make it easy to introduce mismerges. One of the Mercurial developers is looking at reducing the likelihood of mismerges. We may also wish to consider our own changes.</p><p>First, if <span class="box code">hgmerge</span> uses <span class="box code">patch</span>, we may want to force a review of the changes, even if the patch applies cleanly.</p><p>Second, the code for invoking the editor and determining whether the conflict was resolved is a bit brittle<span class="wikilink"><a href="#conflicts">[3]</a></span>. This may just be a bug that needs fixing. But we may also want a more explicit "yes I have resolved the conflicts" action from the user (which is something Subversion does).</p><p>There is at least one <span class="wikiexternallink"><a href="http://www.selenic.com/mercurial/bts/issue12">open issue in the Mercurial bug database</a></span> related to failed merges. Resolving this issue may address the brittleness problem mentioned above.</p><h5 id="Hintermediarysnapshots"><span>intermediary snapshots</span></h5><p>The current ON convention is that putbacks should not introduce SCCS deltas for intermediary snapshots or Teamware merges. This is achieved by using the <span class="box code">redelget</span> and <span class="box code">reedit</span> subcommands in <span class="box code">wx</span>. Similar functionality is available with Mercurial using the <span class="wikiexternallink"><a href="http://www.selenic.com/mercurial/wiki/index.cgi/MqExtension">Mercurial Queue (mq)</a></span> extension.</p><h4 id="Hc7.no-dedicated-servermode"><span>c7. no-dedicated-server mode</span></h4><p>Mercurial can run without any server daemons. <span class="box code">ssh</span> support is handled by starting a remote, transient Mercurial server automatically, which communicates with the local system over the <span class="box code">ssh</span> connection.</p><h4 id="Hc8.toolcommunityhealth"><span>c8. tool community health</span></h4><p>Mercurial has an active developer community. At least one developer (Bryan O'Sullivan) has helped with our evaluation of Mercurial, and he is interested in helping to address issues that we have run into so far (e.g., rename).</p><p>There have been a few Solaris-specific problems with Mercurial. The Mercurial developers have been quick to respond. And in at least one case they installed Solaris so that they could troubleshoot the issue. Also, the developers have paid attention to larger issues, rather than applying a steady stream of band-aids. For example, to address the recurring shell-compatibility problems with <span class="box code">hgmerge</span>, one developer suggested rewriting <span class="box code">hgmerge</span> in Python.</p><h4 id="Hc9.OpenSolariscommunityexpertise"><span>c9. OpenSolaris community expertise</span></h4><p>Mercurial is almost entirely written in Python; <span class="box code">hgmerge</span> is a shell script, though there is some talk of rewriting it in Python, too. It's unclear (to me) how much Python expertise there is in the OpenSolaris community. Fortunately, Python appears easy to learn, and the code tends to be more readable than, say, Perl. Commenting is a bit sparse, but I haven't had problems following the code.</p><h4 id="Hc10.interfaceextensibility"><span>c10. interface extensibility</span></h4><p>Mercurial has a <span class="wikiexternallink"><a href="http://www.selenic.com/mercurial/hgrc.5.html">hooks mechanism</a></span> as well as a documented <span class="wikiexternallink"><a href="http://www.selenic.com/mercurial/wiki/index.cgi/ExtensionHowto">extensions mechanism</a></span>. Some hooks can abort the current operation.</p><h4 id="Hc11.transactionaloperationsandcorruptionrecovery"><span>c11. transactional operations and corruption recovery</span></h4><p>Mercurial's state files are updating by appending. So corrupted files can be repaired by rolling back to a consistent set of files.</p><p>Signal handling (e.g., <span class="box code">SIGINT</span>) appears sensible.</p><p>I simulated a crash using <span class="box code">SIGKILL</span> during a clone operation and was able to get the workspace into a state where there were many missing files. That is, the files were in the repository, but they were not in the visible source tree. This experiment raised a couple issues that we'll want to look at more carefully.</p><ul><li>the child repository was left with two lock files which would block some operations but not others. A push to the parent was not blocked. Either this is a bug or we need to understand Mercurial's use of locks better.</li><li>Mercurial seemed confused by the contents of the child. I edited a file in the workspace--<span class="box code">README.opensolaris</span>--and tried to commit it, but Mercurial said there were no changes. Mercurial let me clone the child, edit <span class="box code">README.opensolaris</span> in the second child, and push the changes to the first child. Trying to work with <span class="box code">README.opensolaris</span> in the first child was still troublesome--it was as though Mercurial did not realize that <span class="box code">README.opensolaris</span> was already in the repository. For operational simplicitly, we'll want some sort of cleanup and repair script, with simple guidelines on when to run it.</li></ul><p>There also appear to be a couple open issues related to locking<span class="wikilink"><a href="#locking">[4]</a></span>.</p><h4 id="Hc12.contentgenerality"><span>c12. content generality</span></h4><p>Mercurial supports binary files as well as text. However, the merge code appears to assume text files. We'll need to think about to handle binary files.</p><h4 id="Ho13.partialtrees"><span>o13. partial trees</span></h4><p>Not currently supported, though there have been discussions about adding support for it..</p><h4 id="Ho14.per-filehistories"><span>o14. per-file histories</span></h4><p>Changesets are for the entire repository, not per-file. But you can get a per-file history by specifying the file name with "hg log".</p><h3 id="H2.Storage"><span>2. Storage</span></h3><p>We didn't have any problems running out of storage or swap. No storage spikes were observed.</p><p>One thing that deserves further investigation is the storage consumed by the conflict tests in the test harness that we used. The first test introduces a content conflict in usr/src/cmd/sort/Makefile.com. The second test introduces a couple rename conflicts in usr/src/cmd/pwd. This led to a size increase of 2.3MB in the test repository, which seems excessive.</p><h3 id="H3.Performance"><span>3. Performance</span></h3><p>A local clone of the OpenSolaris ON 20060222 tree takes a couple minutes on the above hardware using ZFS; about twice that on UFS.</p><p>Using the <span class="wikilink"><a href="#repo">repo with history</a></span>, performance looks like this (times are in mm:ss):</p><table><tr><th scope="col">operation</th><th scope="col">Local (zfs)</th><th scope="col">LAN (NFS)</th><th scope="col">LAN (ssh)</th><th scope="col">WAN (Menlo Park-United Kingdom) (ssh)</th></tr><tr><td>clone (6 samples)</td><td>2:55 (std dev: 1:00)</td><td>6:54 (std dev: 0:17)</td><td>4:01 (std dev: 0:08)</td><td>35:42 (std dev: 2:45)</td></tr><tr><td>local commit (1 file; 6 samples)</td><td>0:23 (std dev: 0:13)</td><td>0:17 (std dev: 0:09)</td><td>0:19 (std dev: 0:11)</td><td>0:19 (std dev: 0:10)</td></tr><tr><td>push (1 file, 1-3 deltas; 4 samples)</td><td>0:01</td><td>0:02</td><td>0:03</td><td>0:06</td></tr><tr><td>pull (1 file, 1-3 deltas; 6 samples)</td><td>0:01</td><td>0:01</td><td>0:02</td><td>0:06</td></tr></table><h2 id="HD.Changes2FFeaturesRequired2FDesired"><span>D. Changes/Features Required/Desired</span></h2><h3 id="HMustHaveInitially"><span>Must Have Initially</span></h3><ul><li>rename/merge integration</li><li>versioning of on-disk data structures (this should be in the upcoming RevlogNG changes)</li><li>a reliable mechanism for checking a tree (repository plus working directory) after a crash and making any necessary repairs (see <span class="wikilink"><a href="#c11">Section c11</a></span> above)</li></ul><h3 id="HWantEventually"><span>Want Eventually</span></h3><ul><li>detection of rename conflicts</li><li>supported interface for showing renames and deletions in the log (planned for Mercurial 0.9)</li><li>better handling of failed merges (<span class="wikiexternallink"><a href="http://www.selenic.com/mercurial/bts/issue12">issue12</a></span> in the Mercurial issue database)</li></ul><h2 id="HNotes"><span>Notes</span></h2><p>[1] For example, the 2006-03-22 version of the <span class="box code">hgrc(5)</span> man page lists hooks that were apparently added after 0.8, although 0.8 is the most recent release.</p><p>[2] Besides leaving editor backup files, our clobber builds leave some generated files behind.</p><p>[3] The relevant code is</p><pre>

$EDITOR "$LOCAL" "$LOCAL.rej" &amp;&amp; test -s "$LOCAL.rej" || exit 0

</pre><p>If <span class="box code">$EDITOR</span> can't be invoked for some reason, we'll take the "exit 0", which indicates a successful merge.</p><p>[4] <span class="wikiexternallink"><a href="http://www.selenic.com/mercurial/bts/issue132">issue132</a></span> "hg should revalidate its data after locking the repo" and <span class="wikiexternallink"><a href="http://www.selenic.com/mercurial/bts/issue154">issue154</a></span> "race between undo and all readers"</p><h2 id="HHistory"><span>History</span></h2><dl><dt>2006-04-20</dt><dd>Resolved TBDs. More information on use with ZFS snapshots. Minor editorial changes.</dd><dt>2006-04-13</dt><dd>Updates after email discussion with Bryan O'Sullivan &lt;bos@serpentine.com&gt;</dd><dt>2006-03-31</dt><dd>First draft.</dd></dl><p><em>&nbsp;Last change: 2006-04-20 11:29 PDT&nbsp;</em></p>
</div>


    <div class="clearfloats"></div>
  </div>      <div id="xdocFooter">
  
                

       <div class="doc-tags" id="xdocTags">
        Tags:
        </div>
  
  <div id="xdocAuthors">
    <div class="xdocCreation">       Created by admin on 2009/10/26 12:11<br/>
          </div>
    <div class="xdocLastModification">       Last modified by admin on 2009/10/26 12:11
    </div>
  </div>
</div>
<div id="xwikidata" class="layoutsubsection">
        </div>  
    </div>      </div><div id="leftPanels" class="panels left">
                  <div class="panel expanded OSNav">
<h1 class="xwikipaneltitle" onclick="XWiki.togglePanelVisibility(this.parentNode, 'XWiki.XWikiGuest_Panels.OSNav');">Collectives</h1>
<div class="xwikipanelcontents">
<div id="xwikinavcontainer">
<span class="wikilink"><a href="/bin/view/Main/communities">Community Groups</a></span><br/>
<span class="wikilink"><a href="/bin/view/Main/projects">Projects</a></span><br/>
<span class="wikilink"><a href="/bin/view/Main/usergroups">User Groups</a></span>
</div><p/>
<script type="text/javascript">
document.observe('xwiki:dom:loaded', function() {
var obj = {div:'xwikinav',no:$count,height:250};
var acc = createAccordion(obj);
});
</script>
</div>
</div>
                        <div class="panel expanded OSDocs">
<h1 class="xwikipaneltitle" onclick="XWiki.togglePanelVisibility(this.parentNode, 'XWiki.XWikiGuest_Panels.OSDocs');">Community Group tools Pages</h1>
<div class="xwikipanelcontents">
<ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/building_opensolaris">Build/Install OpenSolaris (Part 1)</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/building_opensolaris_part2">Build/Install OpenSolaris (Part 2)</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/downloads">Downloads</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/files">Files</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/gcc">GCC</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/bug_fixing_notes">Bug Fixing Notes</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/build_instr">Build Instructions</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/flagday">Important Notes</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/on_policy">ONNV Policy</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/rationale">Background and Rationale</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/shadow">Shadow Compilation</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/status">Current Status</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/hg">Mercurial Tools</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/linker">Dynamic Linking</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/scm">OpenSolaris Source Code Management</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/bzr%2Deval">OpenSolaris DSCM Evaluation: Bzr (Interim Report)</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/dcm_evaluation_mercurial">OpenSolaris DSCM Evaluation: Mercurial</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/dscmreqdoc">DSCM Requirements Document</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/evalform">Candidate Evaluation Form</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/evalplan">Evaluation Plan</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/hg_help">How To Use Mercurial (hg) Repositories</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/hg_teamware_transition">How To Transition from Teamware to Mercurial</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/history">SCM Project History</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/on%2Dscm%2Dtools">ON SCM&#45;Related Tools</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/scm_milestone">Source Code Management for OpenSolaris: MILESTONES</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/scmconsolespec">SCM console specification</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/scmhostspec">SCM hosting implementation specification</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/svn_help">How To Use SVN Repositories</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/scmdownloads">Source Code Management Downloads</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/sun_studio_tools">Sun Studio Downloads</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/faqs">Sun Studio FAQs</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/getstarted">Sun Studio Getting Started</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/sss11ent">Sun Studio 11 License</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/sss12ent_license">Sun Studio 12 License</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/sssent">Sun Studio 10 License</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/sun_studio_10_tools">Sun Studio 10 Downloads</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/sun_studio_11_tools">Sun Studio 11 Downloads</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/sun_studio_11_tools_previous">Sun Studio 11&#45;&#45; Previous Downloads</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/sun_studio_12_tools">Sun Studio 12 Compilers and Tools for the OpenSolaris Common Build Environment (CBE)</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/support">Sun Studio Support</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/testing+nightly">testing nightly</a></span></li>
</ul>
                              </div>
</div>
      </div>

  </div>
<div class="clearfloats"></div>
  </div></div><div id="footerglobal" class="layoutsection">
<div class="minwidth"></div>
<hr/>
        <div id="xwikiplatformversion">XWiki Enterprise 2.7.1.34853 - <a onclick="openURL('http://enterprise.xwiki.org/xwiki/bin/view/Main/Documentation', '_blank'); return false;" href="http://www.xwiki.org/xwiki/bin/view/Main/Documentation">Documentation</a></div>
<br/>
  
      <div id="footer">
    <p>
                <a href="https://markebrooks.github.io/bin/view/Main/tou/">Terms of Use</a>
                |
                <a href="http://www.oracle.com/html/privacy.html">Privacy</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/trademark/">Trademarks</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/copyrights/">Copyright Policy</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/site_guidelines/">Site Guidelines</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/site-map/">Site Map</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/help/">Help</a>
                <br/>Your use of this web site or any of its content or software indicates your agreement to be bound by these Terms of Use.<br/>
                &copy; 2012, Oracle Corporation and/or its affiliates.<br/><img src="https://markebrooks.github.io:443/static/images/logo_oracle_footer.gif" alt="Oracle Logo"/>
            </p>
        </div>

  
</div>

</div></div></body>
</html>
