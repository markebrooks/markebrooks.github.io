<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
                    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
                                    <title>testing nightly (Community Group tools.testing nightly) - XWiki</title>
                <meta http-equiv="Content-Script-Type" content="text/javascript" />
                        <meta http-equiv="imagetoolbar" content="no"/>
                      <link rel="alternate" type="application/x-wiki" title="Edit" href="/bin/edit/Community+Group+tools/testing+nightly" />
                    <link rel="canonical" href="/bin/view/Community+Group+tools/testing+nightly" />
                            <meta name="document" content="Community Group tools.testing nightly"/>
    <meta name="wiki" content="xwiki"/>
    <meta name="space" content="Community Group tools"/>
    <meta name="page" content="testing nightly"/>
    <meta name="version" content="1.1"/>
    <meta name="restURL" content="/rest/wikis/xwiki/spaces/Community+Group+tools/pages/testing+nightly"/>
                <meta name="gwt:property" content="locale=en" />
                <meta name="revisit-after" content="7 days" />
<meta name="description" content="testing nightly" />
<meta name="keywords" content="wiki " />
<meta name="distribution" content="GLOBAL" />
<meta name="rating" content="General" />
<meta name="author" content="kupfer" />
<meta http-equiv="reply-to" content="" />
<meta name="language" content="en" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="alternate" type="application/rss+xml" title="Wiki Feed RSS" href="/bin/view/Main/WebRss?xpage=rdf" />
<link rel="alternate" type="application/rss+xml" title="Blog RSS Feed" href="/bin/view/Blog/GlobalBlogRss?xpage=plain" />
<link rel="shortcut icon" href="/resources/icons/oso/icon.png">
                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
<link href="https://markebrooks.github.io/static/css/stylesheet.css" rel="stylesheet" type="text/css" media="all" />
<link href="/bin/skin/skins/colibri/style.css?colorTheme=ColorThemes.Oso" rel="stylesheet" type="text/css" media="all" />
<link href="/bin/skin/skins/colibri/print.css" rel="stylesheet" type="text/css" media="print" />
        <!--[if IE]>
  <link href="/bin/skin/skins/colibri/ie%2Dall.css" rel="stylesheet" type="text/css" />
<![endif]-->
<!--[if IE 6]>
  <link href="/bin/skin/skins/colibri/ie%2D6.css" rel="stylesheet" type="text/css" />
<![endif]-->
<link rel='stylesheet' type='text/css' href='/bin/ssx/AnnotationCode/Settings?language=en'/><link rel='stylesheet' type='text/css' href='/bin/ssx/AnnotationCode/Style?language=en'/><link rel='stylesheet' type='text/css' href='/bin/ssx/XWiki/SharePage?language=en'/>
<link rel='stylesheet' type='text/css' href='/bin/skin/resources/js/xwiki/widgets/modalPopup.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/js/xwiki/widgets/jumpToPage.css?language=en'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/uicomponents/widgets/confirmationBox.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/resources/uicomponents/widgets/notification.css'/><link rel='stylesheet' type='text/css' href='/bin/skin/skins/colibri/resources/uicomponents/viewers/tags.css'/>

    
    <link href="/bin/skin/resources/js/xwiki/suggest/ajaxSuggest.css" rel="stylesheet" type="text/css" />
<link href="/bin/skin/resources/js/xwiki/lightbox/lightbox.css" rel="stylesheet" type="text/css" />
<!--[if IE]>
  <link href="/bin/skin/resources/js/xwiki/lightbox/lightboxIE.css" rel="stylesheet" type="text/css" />
<![endif]-->












<script type="text/javascript" src="/resources/js/prototype/prototype.js"></script>
<script type="text/javascript" src="/bin/skin/resources/js/xwiki/xwiki.js"></script>
<script type="text/javascript">
// <![CDATA[
XWiki.webapppath = "";
XWiki.servletpath = "bin/";
XWiki.contextPath = "";
XWiki.mainWiki = "xwiki";
XWiki.currentWiki = "xwiki";
XWiki.currentSpace = "Community Group tools";
XWiki.currentPage = "testing nightly";
XWiki.editor = "";
XWiki.viewer = "";
XWiki.contextaction = "view";
XWiki.docisnew = false;
XWiki.docsyntax = "xwiki/2.0";
XWiki.blacklistedSpaces = [ "Import","Panels","Scheduler","Stats","XAppClasses","XAppSheets","XAppTemplates","XWiki","WatchCode","WatchSheets","XApp","WatchAdmin","Watch","ColorThemes","AnnotationCode" ];
XWiki.hasEdit = false;
XWiki.hasProgramming = false;
XWiki.hasBackupPackImportRights = false;
window.docviewurl = "/bin/view/Community+Group+tools/testing+nightly";
window.docediturl = "/bin/edit/Community+Group+tools/testing+nightly";
window.docsaveurl = "/bin/save/Community+Group+tools/testing+nightly";
window.docgeturl = "/bin/get/Community+Group+tools/testing+nightly";
// ]]>
</script>
<script type='text/javascript' src='/bin/skin/resources/js/scriptaculous/effects.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/js/xwiki/widgets/modalPopup.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/js/xwiki/widgets/jumpToPage.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/confirmationBox.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/confirmedAjaxRequest.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/resources/uicomponents/widgets/notification.js' defer='defer'></script>
<script type='text/javascript' src='/resources/uicomponents/widgets/list/xlist.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/xwiki/suggest/ajaxSuggest.js' defer='defer'></script>
<script type='text/javascript' src='/bin/skin/skins/colibri/resources/uicomponents/viewers/tags.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/scriptaculous/scriptaculous.js' defer='defer'></script>
<script type='text/javascript' src='/resources/js/xwiki/accordion/accordion.js' defer='defer'></script>

<script type='text/javascript' src='/bin/jsx/XWiki/WebDAV?language=en' defer='defer'></script>
<script type='text/javascript' src='/bin/jsx/AnnotationCode/Settings?language=en' defer='defer'></script>
<script type='text/javascript' src='/bin/jsx/AnnotationCode/Script?language=en' defer='defer'></script>

<script type="text/javascript" src="/resources/js/xwiki/compatibility.js" defer="defer"></script>

  </head>
  <body id="body" class="wiki-xwiki space-Community_Group_tools viewbody hideright">
<div id="xwikimaincontainer">
<div id="xwikimaincontainerinner">

  <div id="menuview">
    <div id="mainmenu" class="layoutsubsection actionmenu">
<strong id="xwikimenutitle" class="hidden">General Actions:</strong>
<div class="rightmenu">
      <div id="tmLogin" class="tmLogin topmenuentry ">
   <a class="tme" href="https://auth.opensolaris.org/login.action?targetUrl=http%3A%2F%2Fmarkebrooks.github.io%2Fbin%2Fview%2FCommunity%2BGroup%2Btools%2Ftesting%2Bnightly"><strong>Log-in</strong></a>
  </div>
  </div>
<div class="leftmenu">
  <div id="tmWiki" class="tmWiki topmenuentry hasIcon">
   <a class="tme" href="/bin/view/Main/"><strong>Wiki</strong></a>
  </div>
  <div id="tmSpace" class="tmSpace topmenuentry dropdownmenuentry  hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme" href="/bin/view/Community+Group+tools/"><strong>Community Group tools</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
                <span class="submenuitem "><a href="/bin/view/Main/SpaceIndex?space=Community+Group+tools" id="tmSpaceDocumentIndex" class="tmSpaceDocumentIndex">Document Index</a></span>
    </span></div>

<div id="tmSubSites" class="tmSubSites topmenuentry dropdownmenuentry dropdownnolink hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>Subsites</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
<span class="submenuitem hasIcon"><a href="https://cr.opensolaris.org/" id="tmCR" class="tmCR">Code Reviews</a></span>
<span class="submenuitem hasIcon"><a href="http://repo.opensolaris.org/" id="tmRepo" class="tmRepo">SCM Management</a></span>
<span class="submenuitem hasIcon"><a href="http://pkg.opensolaris.org/" id="tmPkg" class="tmPkg">Package Search</a></span>
<span class="submenuitem hasIcon"><a href="http://bugs.opensolaris.org/" id="tmBugs" class="tmBugs">Bugster</a></span>
<span class="submenuitem hasIcon"><a href="http://defect.opensolaris.org/" id="tmDefect" class="tmDefect">Bugzilla</a></span>
<span class="submenuitem hasIcon"><a href="http://test.opensolaris.org/" id="tmTest" class="tmTest">Test Machines</a></span>
<span class="submenuitem hasIcon"><a href="http://planet.opensolaris.org/" id="tmPlanet" class="tmPlanet">Planet</a></span>
<span class="submenuitem hasIcon"><a href="http://mail.opensolaris.org/" id="tmMail" class="tmMail">Mailing Lists</a></span>
<span class="submenuitem hasIcon"><a href="http://poll.opensolaris.org/" id="tmPoll" class="tmPoll">Elections &amp; Polls</a></span>
<span class="submenuitem hasIcon"><a href="http://arc.opensolaris.org/" id="tmArc" class="tmArc">ARC Case Logs</a></span>
<span class="submenuitem hasIcon"><a href="http://jucr.opensolaris.org/" id="tmJucr" class="tmJucr">Source Juicer</a></span>
<span class="submenuitem hasIcon"><a href="http://pkgfactory.opensolaris.org/" id="tmPkgfactory" class="tmPkgfactory">Package Factory</a></span>
<span class="submenuitem hasIcon"><a href="http://auth.opensolaris.org/" id="tmAuth" class="tmAuth">Auth</a></span>
</span></div>

</div>
</div>

  </div>
 <div id="header" class="layoutsection">
<div class="minwidthb"></div>

  <div id="header">
    <table style="width: 100%;">
        <tr>
            <td style="width: 1%;">
                 <a href="https://markebrooks.github.io/bin/view/Main/"><div id="logo"></div></a>  
            </td>
            <td id="logo-text" style="width: 1%;">
                Solaris
            </td>         
            <td style="width: 98%;">
                <table id="loading-indicator">
                    <tr>
                        <td><img src="https://markebrooks.github.io:443/static/images/busy.gif"
                                 alt="Loading" title="Loading"/></td>
                        <td>Loading...</td>
                    </tr>
                </table>
            </td>
            <td style="width: 1%;">
                <table id="iconbar">
                    <tr>
                    <td><a id="collectives-icon" href="https://markebrooks.github.io/bin/view/Main/collectives">
                        Collectives</a></td>
                    <td><a id="discussions-icon" href="https://markebrooks.github.io/bin/view/Main/discussions">
                            Discussions</a></td>
                    <td><a id="documentation-icon" href="https://markebrooks.github.io/bin/view/Main/documentation">
                            Documentation</a></td>
                    <td><a id="download-icon" href="https://markebrooks.github.io/bin/view/Main/downloads">
                            Download</a></td>
                    <td><a id="source-browser-icon" href="http://src.opensolaris.org/source">
                            Source Browser</a></td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>

 </div> 
  <div id="globallinks">
    <form action="/bin/view/Main/Search">
      <div class="globalsearch">
        <label class="hidden" for="headerglobalsearchinput">Search</label><input class="globalsearchinput withTip" id="headerglobalsearchinput" type="text" name="text" value="search..." size="15"/><input class="button" type="image" value="Go" alt="Go" src="/resources/icons/xwiki/search.png"/>
      </div>
    </form>
  </div> <div style="float:left;">

                

   <div id="hierarchy">
                  <span class='current'>testing nightly</span>
          </div>

</div>
  <span class="glink" id="headerlanguages" style="float:right">
        <a href="/bin/view/Community+Group+tools/testing+nightly?language=en" class="language-default language-current">en</a>
    </span>


<div class="contenthideright" id="contentcontainer">
<div id="contentcontainerinner">
<div class="leftsidecolumns">
  <div id="contentcolumn"> 
          <div class="main layoutsubsection">
      <div id="contentmenu" class="actionmenu">
    <strong id="xwikicontentmenutitle" class="hidden">Page Actions:</strong>
<div class="rightmenu">
</div>
<div class="leftmenu">
  <div id="tmExport" class="tmExport topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>Export</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="/bin/export/Community+Group+tools/testing+nightly?format=pdf&amp;language=en" id="tmExportPdf" class="tmExportPdf">Export as PDF</a></span>
  <span class="submenuitem "><a href="/bin/export/Community+Group+tools/testing+nightly?format=rtf&amp;language=en" id="tmExportRtf" class="tmExportRtf">Export as RTF</a></span>
  <span class="submenuitem "><a href="/bin/export/Community+Group+tools/testing+nightly?format=html&amp;language=en" id="tmExportHtml" class="tmExportHtml">Export as HTML</a></span>
    </span></div>

<div id="tmShow" class="tmShow topmenuentry dropdownmenuentry  " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme" href="/bin/view/Community+Group+tools/testing+nightly?viewer=code&amp;language=en"><strong>View</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
<span class="submenuitem "><a href="/bin/view/Community+Group+tools/testing+nightly?viewer=comments&amp;language=en" id="tmViewComments" class="tmViewComments">Comments</a></span>
<span class="submenuitem "><a href="/bin/view/Community+Group+tools/testing+nightly?viewer=attachments&amp;language=en" id="tmViewAttachments" class="tmViewAttachments">Attachments</a></span>
<span class="submenuitem "><a href="/bin/view/Community+Group+tools/testing+nightly?viewer=history&amp;language=en" id="tmViewHistory" class="tmViewHistory">History</a></span>
<span class="submenuitem "><a href="/bin/view/Community+Group+tools/testing+nightly?viewer=information&amp;language=en" id="tmViewInformation" class="tmViewInformation">Information</a></span>
<span class="submenuitem "><a href="/bin/view/Community+Group+tools/testing+nightly?viewer=code&amp;language=en" id="tmViewSource" class="tmViewSource">View Source</a></span>
</span></div>

  <div id="tmMoreActions" class="tmMoreActions topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>More actions</strong></a>
    <span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="/bin/view/Community+Group+tools/testing+nightly?xpage=print&amp;language=en" id="tmPrintPreview" class="tmPrintPreview">Print preview</a></span>
          </span></div>
</div>

    </div>
    <div id="mainContentArea">
      








    
<div id="document-title"><h1>testing nightly</h1></div>





              <div id="document-info">
    <div>
          </div>
    <div class="clearfloats"></div>
  </div>

<div id="xwikicontent">
<h2 id="HIntroduction"><span>Introduction</span></h2><p>The <tt>nightly</tt> script is used by many developers, in many different situations, with a variety of different options. &nbsp;It's hard to remember all the edge cases, and it's not unusual for someone to break <tt>nightly</tt> when they introduce a change. &nbsp;This page gives some guidance on what to consider when you change <tt>nightly</tt>.</p><p>Think of the various test scenarios and inputs as a set of variables: hardware (SPARC vs x86), debug versus non-debug, clobber build versus incremental build, etc.</p><p>The first thing to do is to identify the variables that are important for the change that you're making. &nbsp;Then identify interesting combinations of those variables. &nbsp;To keep the number of test cases sane, try to arrange your test cases so that they test multiple variables. &nbsp;For example, if you need to test debug and non-debug builds, and you need to test on both SPARC and x86, you could test a debug build on SPARC and a non-debug build on x86. &nbsp;(For additional guidance on this approach, see <ins>The Craft of Software Testing</ins> by Brian Marick, Prentice Hall, 1995.)</p><h2 id="HVariables"><span>Variables</span></h2><p>This section gives the variables for <tt>nightly</tt>. &nbsp;Each subsection names a (conceptual) variable, gives the values for the variable, and discusses testing the variable.</p><h3 id="HHardware"><span>Hardware</span></h3><ul><li>sparc</li><li>i386</li></ul><p>For the purposes of testing <tt>nightly</tt>, we only care about testing SPARC and x86 builds. &nbsp;This is because an ON build always builds both 32-bit and 64-bit binaries.</p><p>Depending on what part of the build you're changing, it may be okay to do most of your testing on one ISA. &nbsp;Some sanity testing on the other ISA is usually a good idea, though.</p><p>Note that the SPARC build only builds a 64-bit kernel, whereas the x86 build builds both 32-bit and 64-bit kernels. &nbsp;So if your changes affect the kernel build, be sure to test on both platforms.</p><h3 id="HDebugBuilds"><span>Debug Builds</span></h3><ul><li>non-debug only (default)</li><li>non-debug and debug (-D)</li><li>debug only (-DF)</li></ul><p>There are 2 options in <tt>NIGHTLY_OPTIONS</tt> that control whether debug binaries are built. &nbsp;The <tt>-D</tt> option enables the debug build, and the <tt>-F</tt> option suppresses the non-debug build.</p><p>Some of <tt>nightly</tt>'s options, such as <tt>-l</tt> (lint) are only effective for debug builds.</p><p>If <tt>nightly</tt> is doing both a non-debug and debug build, the non-debug build is always done first. &nbsp;Be careful not to introduce changes that cause one build to depend on the other.</p><p>By default, the same proto area is used for both debug and non-debug builds. &nbsp;In some circumstances, <tt>nightly</tt> will give the non-debug build its own proto area, which can cause problems if the user has specified only a non-debug build. &nbsp;See MULTI_PROTO, below, for details.</p><h3 id="HMULTI_PROTO"><span>MULTI_PROTO</span></h3><ul><li>yes (separate proto areas for debug and non-debug builds)</li><li>no (shared proto area for both builds)</li></ul><p>If the user sets <tt>MULTI_PROTO</tt> to <tt>yes</tt>, or if this is forced by options such as <tt>-O</tt>, the non-debug build is given its own proto area, typically <tt>$CODEMGR_WS/proto/root_$MACH-nd</tt>. &nbsp;This is implemented by temporarily changing the value of <tt>ROOT</tt>. &nbsp;As a result, it can cause problems if the user is only doing a non-debug build. &nbsp;See CR 6604170 for details.</p><h3 id="HIncrementalBuild"><span>Incremental Build</span></h3><ul><li>clobber build (default)</li><li>incremental build (-i)</li></ul><p>By default, <tt>nightly</tt> cleans out the workspace before pulling from its parent or starting the "make install". &nbsp;This cleanup includes "make clobber", deleting all the <tt>.make.state</tt> files in the source tree, and deleting the proto area(s). &nbsp;It also includes removing library binaries and .o files, just in case the "make clobber" missed them.</p><p>If -i is specified, either in <tt>NIGHTLY_OPTIONS</tt> or on the command line, the above steps are skipped. &nbsp;If -i is specified on the command line, some options, such as <tt>-l</tt> (lint) are disabled.</p><p>If developers must do a clobber build after merging in your changes, you must send out a flag day notice to that effect. &nbsp;Ideally, your flag day notice will say what the failure looks like from doing an incremental build.</p><p>If incremental builds will succeed with warnings, send out a heads-up notice so that gatelings know not to worry about the warnings. &nbsp;If you're not sure what will happen with an incremental build, it's okay just to recommend a clobber build.</p><h3 id="HOld2FnewNightly"><span>Old/new Nightly</span></h3><ul><li>new nightly, new source</li><li>new nightly, old source</li><li>old nightly, new source</li></ul><p>Many developers run <tt>nightly</tt> from /ws/onnv-tools/onbld/bin, which is updated daily. &nbsp;In general, your new version of <tt>nightly</tt> should be able to build workspaces that haven't yet merged in your changes. In the rare case where this is not feasible, send a flag-day email telling people with old source to build and use <tt>nightly</tt> from their workspace. &nbsp;If possible, say what the failure will look like if they use the wrong version of <tt>nightly</tt>.</p><p>See also the section on "updates" below. &nbsp;A workspace might contain old source for the clobber phase and then contain your changes for the "make install" phase. &nbsp;If you have a check in <tt>nightly</tt> to tell what type of source you have (old or new), you may need to rerun the check after the pull from the parent.</p><p>It's not necessary to make the build work if the user pulls your changes and then tries to build it with an old version of <tt>nightly</tt>. Unless you know that the old version of <tt>nightly</tt> will work, you should send a flag-day email to tell people to build with the new version of <tt>nightly</tt>. &nbsp;If possible, say what the failure will look like if they use the wrong version of <tt>nightly</tt>.</p><h3 id="Hupdates"><span>updates</span></h3><ul><li>create repo from parent</li><li>update existing repo</li><li>use existing repo (no update)</li></ul><p>Don't assume that the repo existed before the user started <tt>nightly</tt>.</p><p>As mentioned above ("old/new nightly"), the user's repo might not contain your changes prior to the update. &nbsp;Make sure you handle that transition case, or send a flag day note warning users to manually update their workspaces.</p><h3 id="Hclosedtree"><span>closed tree</span></h3><ul><li>closed tree is present</li><li>closed tree is absent</li></ul><p>If the repo already exists, <tt>nightly</tt> auto-detects whether the closed tree is present. &nbsp;The user can override this by setting <tt>CLOSED_IS_PRESENT</tt> to "yes" or "no" in the environment file. &nbsp;If <tt>nightly</tt> is creating the repo from the parent (as per "updates" above), the user can tell <tt>nightly</tt> not to create the closed tree by setting <tt>CLOSED_CLONE_WS</tt> to an empty string in the environment file.</p><p>Some <tt>nightly</tt> options, such as <tt>-O</tt>, require that the closed tree be present.</p><p>See also the "Consolidation" section, below. &nbsp;Not all consolidations have a usr/closed tree.</p><h3 id="HConsolidation"><span>Consolidation</span></h3><ul><li>ON</li><li>SFW</li><li>FishWorks</li></ul><p>Although <tt>nightly</tt> was originally written for ON and it lives in the ON source tree, do not assume that you are building an ON tree. &nbsp;SFW, for example, uses TeamWare rather than Mercurial. &nbsp;It does not have a closed tree, nor does it have signed crypto. &nbsp;Unless you are sure your changes are innocuous, test building the other consolidations listed above.&nbsp;&nbsp;</p><p>If you are introducing new nightly options, make sure that their default settings are appropriate for consolidations other than ON.</p><p>If you are deprecating nightly options, make sure that they are not still in use in consolidations other than ON.</p><p>Check the consolidation's public README for the location of public build machines, who to contact if you have problems, etc. &nbsp;Do not assume that an ON build machine can be used to build non-ON consolidations.</p><p>See also the "Tools" section, below.</p><h3 id="HTools"><span>Tools</span></h3><ul><li>build and use workspace's tools (<tt>-t</tt>)</li><li>use tools in $ONBLD_TOOLS/bin (<tt>+t</tt>)</li></ul><p>For ON development, <tt>-t</tt> is strongly preferred. &nbsp;On the other hand, other consolidations (FishWorks, in particular) may rely on <tt>+t</tt>, so make sure your changes work with <tt>+t</tt>.</p><p>Part of the processing for <tt>-t</tt> involves changing <tt>PATH</tt> so that the freshly built tools are used. &nbsp;This code can be changed without worrying about other consolidations. &nbsp;(SFW invokes its tools using absolute paths, and FishWorks uses <tt>+t</tt>.)</p><h3 id="HTonicBuild28-O29"><span>Tonic Build (-O)</span></h3><ul><li>yes</li><li>no</li></ul><p>This option should not be confused with the <tt>-S O</tt> option (see "Source Builds", below).</p><p>The <tt>-O</tt> option tells <tt>nightly</tt> to generate deliverables for developers outside of Oracle/Sun. &nbsp;These deliverables are used by corporate partners, so Tonic builds still need to work.</p><h3 id="HSourceBuilds"><span>Source Builds</span></h3><ul><li>not a "source build"</li><li><tt>-S O</tt></li><li><tt>-S E</tt></li><li><tt>-S D</tt></li></ul><p>The <tt>-S O</tt> option verifies that the open tree builds, i.e., that it does not have unexpected compile-time dependencies on the closed tree. It has different semantics from the <tt>-O</tt> option (above) and uses different code paths in <tt>nightly</tt>, so it must be tested separately.</p><p>In the past. Sun sold a source product which included (most of) the ON source, with variations depending on whether the sources were for outside the US ("export") or inside ("domestic"). &nbsp;The <tt>-S E</tt> option generates the export version and then verifies that it builds, the <tt>-S D</tt> option does the same for the domestic version.</p><p>If your test of the <tt>-S E</tt> or <tt>-S D</tt> option fails to build, check whether the ON gate builds with that option. &nbsp;If it doesn't and there isn't already a CR for the issue, file a defect CR to report the problem (solaris/consolidation/os-net-misc).</p><h3 id="HOtherNIGHTLY_OPTIONS"><span>Other NIGHTLY_OPTIONS</span></h3><p>At a minimum, do a test build using the standard developer options. &nbsp;For ON, these are the default options in usr/src/tools/env/developer.sh. Other consolidations may have a corresponding environment file, or the standard options might be listed in the consolidation's public README.</p><p>Review the supported options for any that are related to the changes that you are making. &nbsp;For example, if you are changing how "make check" works, you may want to do a test run without <tt>-C</tt> to ensure that you have not accidentally introduced a dependency on your new "make check" code.</p><h3 id="Hsigningbuild"><span>signing build</span></h3><ul><li>yes</li><li>no</li></ul><p>By default, cryptographic binaries are signed with a certificate and key that enables their use on the Sun/Oracle internal network. &nbsp;A limited number of people are able to do a "signing build", in which the resulting crypto binaries can be run anywhere.&nbsp;&nbsp;</p><p>If you are making changes that affect the code path for signing builds, you can do some limited testing by setting the <tt>CODESIGN_USER</tt> environment variable to a non-null dummy value. &nbsp;Then comment out the section of <tt>nightly</tt> that re-signs the binaries (grep for <tt>CODESIGN_USER</tt> to find the appropriate chunk of code). &nbsp;You will probably want to do a final test with a real signing build. &nbsp;Contact the gatekeepers or find someone in the security group who can do a signing build with your changes.</p>
</div>


    <div class="clearfloats"></div>
  </div>      <div id="xdocFooter">
  
                

       <div class="doc-tags" id="xdocTags">
        Tags:
        </div>
  
  <div id="xdocAuthors">
    <div class="xdocCreation">       Created by kupfer on 2010/09/24 21:43<br/>
          </div>
    <div class="xdocLastModification">       Last modified by kupfer on 2010/09/24 21:43
    </div>
  </div>
</div>
<div id="xwikidata" class="layoutsubsection">
        </div>  
    </div>      </div><div id="leftPanels" class="panels left">
                  <div class="panel expanded OSNav">
<h1 class="xwikipaneltitle" onclick="XWiki.togglePanelVisibility(this.parentNode, 'XWiki.XWikiGuest_Panels.OSNav');">Collectives</h1>
<div class="xwikipanelcontents">
<div id="xwikinavcontainer">
<span class="wikilink"><a href="/bin/view/Main/communities">Community Groups</a></span><br/>
<span class="wikilink"><a href="/bin/view/Main/projects">Projects</a></span><br/>
<span class="wikilink"><a href="/bin/view/Main/usergroups">User Groups</a></span>
</div><p/>
<script type="text/javascript">
document.observe('xwiki:dom:loaded', function() {
var obj = {div:'xwikinav',no:$count,height:250};
var acc = createAccordion(obj);
});
</script>
</div>
</div>
                        <div class="panel expanded OSDocs">
<h1 class="xwikipaneltitle" onclick="XWiki.togglePanelVisibility(this.parentNode, 'XWiki.XWikiGuest_Panels.OSDocs');">Community Group tools Pages</h1>
<div class="xwikipanelcontents">
<ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/building_opensolaris">Build/Install OpenSolaris (Part 1)</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/building_opensolaris_part2">Build/Install OpenSolaris (Part 2)</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/downloads">Downloads</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/files">Files</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/gcc">GCC</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/bug_fixing_notes">Bug Fixing Notes</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/build_instr">Build Instructions</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/flagday">Important Notes</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/on_policy">ONNV Policy</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/rationale">Background and Rationale</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/shadow">Shadow Compilation</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/status">Current Status</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/hg">Mercurial Tools</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/linker">Dynamic Linking</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/scm">OpenSolaris Source Code Management</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/bzr%2Deval">OpenSolaris DSCM Evaluation: Bzr (Interim Report)</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/dcm_evaluation_mercurial">OpenSolaris DSCM Evaluation: Mercurial</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/dscmreqdoc">DSCM Requirements Document</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/evalform">Candidate Evaluation Form</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/evalplan">Evaluation Plan</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/hg_help">How To Use Mercurial (hg) Repositories</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/hg_teamware_transition">How To Transition from Teamware to Mercurial</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/history">SCM Project History</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/on%2Dscm%2Dtools">ON SCM&#45;Related Tools</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/scm_milestone">Source Code Management for OpenSolaris: MILESTONES</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/scmconsolespec">SCM console specification</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/scmhostspec">SCM hosting implementation specification</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/svn_help">How To Use SVN Repositories</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/scmdownloads">Source Code Management Downloads</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/sun_studio_tools">Sun Studio Downloads</a></span><ul class="star">
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/faqs">Sun Studio FAQs</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/getstarted">Sun Studio Getting Started</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/sss11ent">Sun Studio 11 License</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/sss12ent_license">Sun Studio 12 License</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/sssent">Sun Studio 10 License</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/sun_studio_10_tools">Sun Studio 10 Downloads</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/sun_studio_11_tools">Sun Studio 11 Downloads</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/sun_studio_11_tools_previous">Sun Studio 11&#45;&#45; Previous Downloads</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/sun_studio_12_tools">Sun Studio 12 Compilers and Tools for the OpenSolaris Common Build Environment (CBE)</a></span></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/support">Sun Studio Support</a></span></li>
</ul></li>
<li><span class="wikilink"><a href="/bin/view/Community+Group+tools/testing+nightly">testing nightly</a></span></li>
</ul>
                              </div>
</div>
      </div>

  </div>
<div class="clearfloats"></div>
  </div></div><div id="footerglobal" class="layoutsection">
<div class="minwidth"></div>
<hr/>
        <div id="xwikiplatformversion">XWiki Enterprise 2.7.1.34853 - <a onclick="openURL('http://enterprise.xwiki.org/xwiki/bin/view/Main/Documentation', '_blank'); return false;" href="http://www.xwiki.org/xwiki/bin/view/Main/Documentation">Documentation</a></div>
<br/>
  
      <div id="footer">
    <p>
                <a href="https://markebrooks.github.io/bin/view/Main/tou/">Terms of Use</a>
                |
                <a href="http://www.oracle.com/html/privacy.html">Privacy</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/trademark/">Trademarks</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/copyrights/">Copyright Policy</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/site_guidelines/">Site Guidelines</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/site-map/">Site Map</a>
                |
                <a href="https://markebrooks.github.io/bin/view/Main/help/">Help</a>
                <br/>Your use of this web site or any of its content or software indicates your agreement to be bound by these Terms of Use.<br/>
                &copy; 2012, Oracle Corporation and/or its affiliates.<br/><img src="https://markebrooks.github.io:443/static/images/logo_oracle_footer.gif" alt="Oracle Logo"/>
            </p>
        </div>

  
</div>

</div></div></body>
</html>
